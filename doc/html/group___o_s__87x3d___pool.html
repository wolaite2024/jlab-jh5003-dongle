<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BT AUDIO SDK: Pool Management</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bbpro-h55px.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BT AUDIO SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,true,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Pool Management<div class="ingroups"><a class="el" href="group___a_p_i___reference.html">API Reference</a> &raquo; <a class="el" href="group___o_s.html">OSIF</a> &raquo; <a class="el" href="group___o_s__87x3d.html">rtl87x3d</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Manage task-safe and fixed-size blocks of dynamic memory.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga001df07c085e5d3b6e6a10b5e9ddc049"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___pool.html#ga001df07c085e5d3b6e6a10b5e9ddc049">OS_POOL_INVALID_HANDLE</a>&#160;&#160;&#160;0xFF</td></tr>
<tr class="memdesc:ga001df07c085e5d3b6e6a10b5e9ddc049"><td class="mdescLeft">&#160;</td><td class="mdescRight">The invalid pool handle. Valid pool handles should be less than OS_POOL_INVALID_HANDLE.  <a href="#ga001df07c085e5d3b6e6a10b5e9ddc049">More...</a><br /></td></tr>
<tr class="separator:ga001df07c085e5d3b6e6a10b5e9ddc049"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga34e3df01f31b2c3bb8688a228f4079d7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___pool.html#ga34e3df01f31b2c3bb8688a228f4079d7">os_pool_create</a>(p_handle,  ram_type,  buf_size,  buf_count)&#160;&#160;&#160;os_pool_create_intern(p_handle, ram_type, buf_size, buf_count, __func__, __LINE__)</td></tr>
<tr class="memdesc:ga34e3df01f31b2c3bb8688a228f4079d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates and initialize a memory pool.  <a href="#ga34e3df01f31b2c3bb8688a228f4079d7">More...</a><br /></td></tr>
<tr class="separator:ga34e3df01f31b2c3bb8688a228f4079d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga48dd65884eab601dcc4da905b2670dac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___pool.html#ga48dd65884eab601dcc4da905b2670dac">os_pool_extend</a>(handle,  buf_size,  buf_count)&#160;&#160;&#160;os_pool_extend_intern(handle, buf_size, buf_count, __func__, __LINE__)</td></tr>
<tr class="memdesc:ga48dd65884eab601dcc4da905b2670dac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extend a set of buffers to the created memory pool. The extended pool buffers have the same RAM type with the created buffers.  <a href="#ga48dd65884eab601dcc4da905b2670dac">More...</a><br /></td></tr>
<tr class="separator:ga48dd65884eab601dcc4da905b2670dac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadfb05fc78a8e0a19efb2b5af182b9dcf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___pool.html#gadfb05fc78a8e0a19efb2b5af182b9dcf">os_pool_delete</a>(handle)&#160;&#160;&#160;os_pool_delete_intern(handle, __func__, __LINE__)</td></tr>
<tr class="memdesc:gadfb05fc78a8e0a19efb2b5af182b9dcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a memory pool.  <a href="#gadfb05fc78a8e0a19efb2b5af182b9dcf">More...</a><br /></td></tr>
<tr class="separator:gadfb05fc78a8e0a19efb2b5af182b9dcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga607c349ef44783385d8bfa10b7da8394"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___pool.html#ga607c349ef44783385d8bfa10b7da8394">os_buffer_get</a>(handle,  buf_size)&#160;&#160;&#160;os_buffer_get_intern(handle, buf_size, __func__, __LINE__)</td></tr>
<tr class="memdesc:ga607c349ef44783385d8bfa10b7da8394"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a pool buffer from the specified memory pool. The allocated pool buffer size may be larger than the required size.  <a href="#ga607c349ef44783385d8bfa10b7da8394">More...</a><br /></td></tr>
<tr class="separator:ga607c349ef44783385d8bfa10b7da8394"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga92d39983d27b732d2e19ec908c866c84"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___pool.html#ga92d39983d27b732d2e19ec908c866c84">os_buffer_put</a>(p_buf)&#160;&#160;&#160;os_buffer_put_intern(p_buf, __func__, __LINE__)</td></tr>
<tr class="memdesc:ga92d39983d27b732d2e19ec908c866c84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free and return the pool buffer to the specified memory pool.  <a href="#ga92d39983d27b732d2e19ec908c866c84">More...</a><br /></td></tr>
<tr class="separator:ga92d39983d27b732d2e19ec908c866c84"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga66481b00eb5e3e4b0655c75b5d32b78c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___pool.html#ga66481b00eb5e3e4b0655c75b5d32b78c">os_pool_dump</a> (uint8_t handle)</td></tr>
<tr class="memdesc:ga66481b00eb5e3e4b0655c75b5d32b78c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dump the pool buffers of the specified memory pool.  <a href="#ga66481b00eb5e3e4b0655c75b5d32b78c">More...</a><br /></td></tr>
<tr class="separator:ga66481b00eb5e3e4b0655c75b5d32b78c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Manage task-safe and fixed-size blocks of dynamic memory. </p>
<p>Memory pools are fixed-size blocks of memory that are task-safe. They operate much faster than the dynamically allocated heap and do not suffer from fragmentation. Being task-safe, they can be accessed from tasks and ISRs alike.<br />
 Shared memory is one of the basic models to exchange information between tasks. Using memory pools for exchanging data, you can share more complex objects between taks if compared to the Message Queue. Memory pool management functions are used to define and manage such fixed-sized memory pools.<br />
 </p><div class="image">
<img src="OS-pool-overview.jpg" alt="OS-pool-overview.jpg" width="601px" height="481px"/>
<div class="caption">
Memory Pool Overview</div></div>
 <h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga001df07c085e5d3b6e6a10b5e9ddc049"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga001df07c085e5d3b6e6a10b5e9ddc049">&#9670;&nbsp;</a></span>OS_POOL_INVALID_HANDLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OS_POOL_INVALID_HANDLE&#160;&#160;&#160;0xFF</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The invalid pool handle. Valid pool handles should be less than OS_POOL_INVALID_HANDLE. </p>
<p>os_pool.h </p>

</div>
</div>
<a id="ga34e3df01f31b2c3bb8688a228f4079d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga34e3df01f31b2c3bb8688a228f4079d7">&#9670;&nbsp;</a></span>os_pool_create</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define os_pool_create</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p_handle, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ram_type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">buf_size, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">buf_count&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;os_pool_create_intern(p_handle, ram_type, buf_size, buf_count, __func__, __LINE__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates and initialize a memory pool. </p>
<p>os_pool.h</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">p_handle</td><td>Used to pass back a handle by which the memory pool can be referenced.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ram_type</td><td>RAM type for the memory pool buffer. <ul>
<li><code>RAM_TYPE_DATA_ON</code> Data ON RAM type. </li>
<li><code>RAM_TYPE_DATA_OFF</code> Data OFF RAM type. </li>
<li><code>RAM_TYPE_BUFFER_ON</code> BUFFER ON RAM type. </li>
<li><code>RAM_TYPE_BUFFER_OFF</code> BUFFER OFF RAM type.</li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf_size</td><td>The pool buffer size in bytes.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf_count</td><td>The number of pool buffers allocated.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the memory pool creation. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Pool was created successfully. </td></tr>
    <tr><td class="paramname">false</td><td>Pool was failed to create.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#define BUF_SIZE 0x40</span></div><div class="line"><span class="preprocessor">#define BUF_NUM  16</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    uint8_t handle;</div><div class="line"></div><div class="line">    <span class="comment">// Create a memory pool capable of containing 16 buffers.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3d___pool.html#ga34e3df01f31b2c3bb8688a228f4079d7">os_pool_create</a>(&amp;handle, <a class="code" href="group__x3e___m_e_m___c_o_n_f_i_g___exported___types.html#gga20f6fc28665b1bdf8326a4826ba69b77a53394a9ecf33e56adc53407220bae73d">RAM_TYPE_DATA_ON</a>, BUF_SIZE, BUF_NUM) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Memory pool created successfully.</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">// Memory pool failed to create.</span></div><div class="line">        <span class="keywordflow">return</span> -1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga48dd65884eab601dcc4da905b2670dac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga48dd65884eab601dcc4da905b2670dac">&#9670;&nbsp;</a></span>os_pool_extend</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define os_pool_extend</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">handle, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">buf_size, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">buf_count&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;os_pool_extend_intern(handle, buf_size, buf_count, __func__, __LINE__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extend a set of buffers to the created memory pool. The extended pool buffers have the same RAM type with the created buffers. </p>
<p>os_pool.h</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>The handle of the created memory pool.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf_size</td><td>The pool buffer size in bytes.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf_count</td><td>The number of pool buffers allocated.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the memory pool extension. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Pool was extended successfully. </td></tr>
    <tr><td class="paramname">false</td><td>Pool was failed to extend.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#define BUF_SIZE1 0x40</span></div><div class="line"><span class="preprocessor">#define BUF_NUM1  16</span></div><div class="line"><span class="preprocessor">#define BUF_SIZE2 0x20</span></div><div class="line"><span class="preprocessor">#define BUF_NUM2  8</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    uint8_t handle;</div><div class="line"></div><div class="line">    <span class="comment">// Create a memory pool capable of containing 16 buffers.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3d___pool.html#ga34e3df01f31b2c3bb8688a228f4079d7">os_pool_create</a>(&amp;handle, <a class="code" href="group__x3e___m_e_m___c_o_n_f_i_g___exported___types.html#gga20f6fc28665b1bdf8326a4826ba69b77a53394a9ecf33e56adc53407220bae73d">RAM_TYPE_DATA_ON</a>, BUF_SIZE1, BUF_NUM1) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Memory pool created successfully.</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">// Memory pool failed to create.</span></div><div class="line">        <span class="keywordflow">return</span> -1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Extend the memory pool to have extra 8 buffers each in 0x20 bytes.</span></div><div class="line">    <a class="code" href="group___o_s__87x3d___pool.html#ga48dd65884eab601dcc4da905b2670dac">os_pool_extend</a>(handle, BUF_SIZE2, BUF_NUM2);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="gadfb05fc78a8e0a19efb2b5af182b9dcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadfb05fc78a8e0a19efb2b5af182b9dcf">&#9670;&nbsp;</a></span>os_pool_delete</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define os_pool_delete</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">handle</td><td>)</td>
          <td>&#160;&#160;&#160;os_pool_delete_intern(handle, __func__, __LINE__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a memory pool. </p>
<p>os_pool.h</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>The handle of the memory pool to be deleted.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the memory pool deletion. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Pool was deleted successfully. </td></tr>
    <tr><td class="paramname">false</td><td>Pool was failed to delete.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#define BUF_SIZE 0x40</span></div><div class="line"><span class="preprocessor">#define BUF_NUM  16</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    uint8_t handle;</div><div class="line"></div><div class="line">    <span class="comment">// Create a memory pool capable of containing 16 buffers.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3d___pool.html#ga34e3df01f31b2c3bb8688a228f4079d7">os_pool_create</a>(&amp;handle, <a class="code" href="group__x3e___m_e_m___c_o_n_f_i_g___exported___types.html#gga20f6fc28665b1bdf8326a4826ba69b77a53394a9ecf33e56adc53407220bae73d">RAM_TYPE_DATA_ON</a>, BUF_SIZE, BUF_NUM) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Memory pool created successfully.</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">// Memory pool failed to create.</span></div><div class="line">        <span class="keywordflow">return</span> -1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Delete the memory pool.</span></div><div class="line">    <a class="code" href="group___o_s__87x3d___pool.html#gadfb05fc78a8e0a19efb2b5af182b9dcf">os_pool_delete</a>(handle);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga607c349ef44783385d8bfa10b7da8394"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga607c349ef44783385d8bfa10b7da8394">&#9670;&nbsp;</a></span>os_buffer_get</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define os_buffer_get</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">handle, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">buf_size&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;os_buffer_get_intern(handle, buf_size, __func__, __LINE__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a pool buffer from the specified memory pool. The allocated pool buffer size may be larger than the required size. </p>
<p>os_pool.h</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>The handle of the created memory pool.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf_size</td><td>The pool buffer size in bytes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The address of the allocated pool buffer. If the address is NULL, the buffer allocation failed.</dd></dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#define BUF_SIZE1 0x40</span></div><div class="line"><span class="preprocessor">#define BUF_NUM1  16</span></div><div class="line"><span class="preprocessor">#define BUF_SIZE2 0x20</span></div><div class="line"><span class="preprocessor">#define BUF_NUM2  8</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    uint8_t handle;</div><div class="line">    <span class="keywordtype">void</span> *p_buf;</div><div class="line"></div><div class="line">    <span class="comment">// Create a memory pool capable of containing 16 buffers.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3d___pool.html#ga34e3df01f31b2c3bb8688a228f4079d7">os_pool_create</a>(&amp;handle, <a class="code" href="group__x3e___m_e_m___c_o_n_f_i_g___exported___types.html#gga20f6fc28665b1bdf8326a4826ba69b77a53394a9ecf33e56adc53407220bae73d">RAM_TYPE_DATA_ON</a>, BUF_SIZE1, BUF_NUM1) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Memory pool created successfully.</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">// Memory pool failed to create.</span></div><div class="line">        <span class="keywordflow">return</span> -1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Extend the memory pool to have extra 8 buffers each in 0x20 bytes.</span></div><div class="line">    <a class="code" href="group___o_s__87x3d___pool.html#ga48dd65884eab601dcc4da905b2670dac">os_pool_extend</a>(handle, BUF_SIZE2, BUF_NUM2);</div><div class="line"></div><div class="line">    <span class="comment">// Allocate a pool buffer in 0x30 bytes. While, the memory pool will</span></div><div class="line">    <span class="comment">// give a buffer in 0x40 bytes.</span></div><div class="line">    p_buf = <a class="code" href="group___o_s__87x3d___pool.html#ga607c349ef44783385d8bfa10b7da8394">os_buffer_get</a>(handle, 0x30);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga92d39983d27b732d2e19ec908c866c84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga92d39983d27b732d2e19ec908c866c84">&#9670;&nbsp;</a></span>os_buffer_put</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define os_buffer_put</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p_buf</td><td>)</td>
          <td>&#160;&#160;&#160;os_buffer_put_intern(p_buf, __func__, __LINE__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free and return the pool buffer to the specified memory pool. </p>
<p>os_pool.h</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_buf</td><td>The address of the pool buffer allocated by <a class="el" href="group___o_s__87x3d___pool.html#ga607c349ef44783385d8bfa10b7da8394" title="Allocate a pool buffer from the specified memory pool. The allocated pool buffer size may be larger t...">os_buffer_get()</a> API function.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the pool buffer freeing. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Pool was freed successfully. </td></tr>
    <tr><td class="paramname">false</td><td>Pool was failed to free.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#define BUF_SIZE1 0x40</span></div><div class="line"><span class="preprocessor">#define BUF_NUM1  16</span></div><div class="line"><span class="preprocessor">#define BUF_SIZE2 0x20</span></div><div class="line"><span class="preprocessor">#define BUF_NUM2  8</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    uint8_t handle;</div><div class="line">    <span class="keywordtype">void</span> *p_buf;</div><div class="line"></div><div class="line">    <span class="comment">// Create a memory pool capable of containing 16 buffers.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3d___pool.html#ga34e3df01f31b2c3bb8688a228f4079d7">os_pool_create</a>(&amp;handle, <a class="code" href="group__x3e___m_e_m___c_o_n_f_i_g___exported___types.html#gga20f6fc28665b1bdf8326a4826ba69b77a53394a9ecf33e56adc53407220bae73d">RAM_TYPE_DATA_ON</a>, BUF_SIZE1, BUF_NUM1) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Memory pool created successfully.</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">// Memory pool failed to create.</span></div><div class="line">        <span class="keywordflow">return</span> -1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Extend the memory pool to have extra 8 buffers each in 0x20 bytes.</span></div><div class="line">    <a class="code" href="group___o_s__87x3d___pool.html#ga48dd65884eab601dcc4da905b2670dac">os_pool_extend</a>(handle, BUF_SIZE2, BUF_NUM2);</div><div class="line"></div><div class="line">    <span class="comment">// Allocate a pool buffer in 0x30 bytes. While, the memory pool will</span></div><div class="line">    <span class="comment">// give a buffer in 0x40 bytes.</span></div><div class="line">    p_buf = <a class="code" href="group___o_s__87x3d___pool.html#ga607c349ef44783385d8bfa10b7da8394">os_buffer_get</a>(handle, 0x30);</div><div class="line"></div><div class="line">    <span class="comment">// Free the pool buffer by the address.</span></div><div class="line">    <a class="code" href="group___o_s__87x3d___pool.html#ga92d39983d27b732d2e19ec908c866c84">os_buffer_put</a>(p_buf);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga66481b00eb5e3e4b0655c75b5d32b78c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga66481b00eb5e3e4b0655c75b5d32b78c">&#9670;&nbsp;</a></span>os_pool_dump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_pool_dump </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dump the pool buffers of the specified memory pool. </p>
<p>os_pool.h</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>The handle of the memory pool buffer to be dumped. If the memory pool handle is invalid, all created memory pools will be dumped.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None.</dd></dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#define BUF_SIZE1 0x40</span></div><div class="line"><span class="preprocessor">#define BUF_NUM1  16</span></div><div class="line"><span class="preprocessor">#define BUF_SIZE2 0x20</span></div><div class="line"><span class="preprocessor">#define BUF_NUM2  8</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    uint8_t handle;</div><div class="line">    <span class="keywordtype">void</span> *p_buf;</div><div class="line"></div><div class="line">    <span class="comment">// Create a memory pool capable of containing 16 buffers.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3d___pool.html#ga34e3df01f31b2c3bb8688a228f4079d7">os_pool_create</a>(&amp;handle, <a class="code" href="group__x3e___m_e_m___c_o_n_f_i_g___exported___types.html#gga20f6fc28665b1bdf8326a4826ba69b77a53394a9ecf33e56adc53407220bae73d">RAM_TYPE_DATA_ON</a>, BUF_SIZE1, BUF_NUM1) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Memory pool created successfully.</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">// Memory pool failed to create.</span></div><div class="line">        <span class="keywordflow">return</span> -1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Extend the memory pool to have extra 8 buffers each in 0x20 bytes.</span></div><div class="line">    <a class="code" href="group___o_s__87x3d___pool.html#ga48dd65884eab601dcc4da905b2670dac">os_pool_extend</a>(handle, BUF_SIZE2, BUF_NUM2);</div><div class="line"></div><div class="line">    <span class="comment">// Allocate a pool buffer in 0x30 bytes. While, the memory pool will</span></div><div class="line">    <span class="comment">// give a buffer in 0x40 bytes.</span></div><div class="line">    p_buf = <a class="code" href="group___o_s__87x3d___pool.html#ga607c349ef44783385d8bfa10b7da8394">os_buffer_get</a>(handle, 0x30);</div><div class="line"></div><div class="line">    <span class="comment">// Dump the memory pool.</span></div><div class="line">    <a class="code" href="group___o_s__87x3d___pool.html#ga66481b00eb5e3e4b0655c75b5d32b78c">os_pool_dump</a>(handle);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->

<HR SIZE=5>
<font size="3" color="black">Copyright(c) 2020, <a href=" http://www.realtek.com.tw/"><font size="3" color="#6FB7B7"><b>Realtek Semiconductor Corporation</b></font></a>. All rights reserved.</font> 
