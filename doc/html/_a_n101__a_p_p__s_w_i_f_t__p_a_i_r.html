<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BT AUDIO SDK: $title</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bbpro-h55px.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BT AUDIO SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,true,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="contents">
<div class="textblock"><p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
 </p>
<h1><a class="anchor" id="APP_SWIFT_PAIR_Page"></a>
APP SWIFT PAIR Application Note    </h1>
<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
 </p><center><b>V1.1</b></center><p><br />
 </p><center><b>2023/6/28</b></center><div style="page-break-after: always;"></div><h2><a class="anchor" id="Swift_Pair_Rev"></a>
Revision History</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Version  </th><th class="markdownTableHeadCenter">Date  </th><th class="markdownTableHeadCenter">Description   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">V1.0.0.0  </td><td class="markdownTableBodyCenter">2021/09/06  </td><td class="markdownTableBodyCenter">Stable Release   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">V1.1  </td><td class="markdownTableBodyCenter">2023/06/28  </td><td class="markdownTableBodyCenter">Add three mode   </td></tr>
</table>
<div style="page-break-after: always;"></div><h2>Contents</h2>
<ul>
<li><a class="el" href="_a_n101__a_p_p__s_w_i_f_t__p_a_i_r.html#Swift_Pair_Rev">Revision History</a></li>
<li><a class="el" href="_a_n101__a_p_p__s_w_i_f_t__p_a_i_r.html#SWIFT_PAIR_TABLE_LIST">Table List</a></li>
<li><a class="el" href="_a_n101__a_p_p__s_w_i_f_t__p_a_i_r.html#SWIFT_PAIR_FIGURE_LIST">Figure List</a></li>
<li><a class="el" href="_a_n101__a_p_p__s_w_i_f_t__p_a_i_r.html#Swift_Pair_Glossary">Glossary</a></li>
<li><a class="el" href="_a_n101__a_p_p__s_w_i_f_t__p_a_i_r.html#APP_SWIFT_PAIR_Introduction">1 Introduction</a></li>
<li><a class="el" href="_a_n101__a_p_p__s_w_i_f_t__p_a_i_r.html#MCU_CONFIG_TOOL_CONFIGURATION">2 Configuration of Swift Pair in Mcu Config Tool</a></li>
<li><a class="el" href="_a_n101__a_p_p__s_w_i_f_t__p_a_i_r.html#SWIFT_PAIR_API">3 Important Api of Swift Pair</a></li>
<li><a class="el" href="_a_n101__a_p_p__s_w_i_f_t__p_a_i_r.html#SWIFT_PAIR_ADV_DATA_STRUCT">4 Swift Pair Adv Data Struct</a></li>
<li><a class="el" href="_a_n101__a_p_p__s_w_i_f_t__p_a_i_r.html#SWIFT_PAIR_USE_INTRODUCE">5 Swift Pair Use Introduce</a></li>
</ul>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="SWIFT_PAIR_TABLE_LIST"></a>
Table List</h2>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="SWIFT_PAIR_FIGURE_LIST"></a>
Figure List</h2>
<ul>
<li><a href="#figure_2_1">Figure 2-1 Configuration</a></li>
<li><a href="#figure_4_1">Figure 4-1 Swift Pair Mode Le Only</a></li>
<li><a href="#figure_4_2">Figure 4-2 Swift Pair Mode Le and Br/edr</a></li>
<li><a href="#figure_4_3">Figure 4-3 Swift Pair Mode Br/edr Only</a></li>
<li><a href="#figure_5_1">Figure 5-1 Swift Pair Success</a></li>
<li><a href="#figure_5_1">Figure 5-2 Set on Windows OS</a></li>
</ul>
<p> <style>div.image img[src="SwiftPairConfiguration.jpg"]{width:1000px;}
\htmlonly <style>div.image img[src="SwiftPairPopup.jpg"]{width:1000px;}
\htmlonly <style>div.image img[src="SwiftPairQuickPair.jpg"]{width:1000px;}
</style> </p>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="Swift_Pair_Glossary"></a>
Glossary</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Terms  </th><th class="markdownTableHeadCenter">Definitions   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">Swift Pair  </td><td class="markdownTableBodyCenter">Fast pair in Windows platform   </td></tr>
</table>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="APP_SWIFT_PAIR_Introduction"></a>
1 Introduction</h2>
<p>The purpose of this document is to give an overview of the app swift pair module for customer. The document describes how to use swift pair module in app project, if user want to know more details about swift pair, please to see <a href="https://docs.microsoft.com/en-us/windows-hardware/design/component-guidelines/bluetooth-swift-pair">https://docs.microsoft.com/en-us/windows-hardware/design/component-guidelines/bluetooth-swift-pair</a>. The swift pair is helping user to pair computer quickly, The details will be described in the following sections.</p>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="MCU_CONFIG_TOOL_CONFIGURATION"></a>
2 Configuration of Swift Pair in Mcu Config Tool</h2>
<p>This section describes how to set swift pair configuration by mcu config tool. To use swift pair feature, Swift Pair checkbox shall be selected.</p>
<div class="image">
<img src="SwiftPairConfiguration.jpg" alt="SwiftPairConfiguration.jpg"/>
</div>
 <center><div id="figure_2_1"><b>Figure 2-1 Configuration</b></div></center><div style="page-break-after: always;"></div><h2><a class="anchor" id="SWIFT_PAIR_API"></a>
3 Important Api of Swift Pair</h2>
<p>The reference file is shown as follows:</p><ul>
<li>Project source code directory: sdk\src\sample\rws\app_ble_swift_pair.c</li>
</ul>
<p>User could start or stop swift pair by follow api. </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> <a class="code" href="group___a_p_p___b_l_e___s_w_i_f_t___p_a_i_r___exported___functions.html#gaae4c428f501dc5b9ef79a7b7e1f413ca">app_swift_pair_adv_start</a>(uint16_t duration_10ms) <span class="comment">//swift pair start</span></div><div class="line"></div><div class="line"><span class="keywordtype">bool</span> <a class="code" href="group___a_p_p___b_l_e___s_w_i_f_t___p_a_i_r___exported___functions.html#ga6891cde61063dfd070d69402f00ed952">app_swift_pair_adv_stop</a>(int8_t app_cause)  <span class="comment">//swift pair stop</span></div></div><!-- fragment --><p>Now in sdk sample code, swift pair is started when device radio mode is discoverable and connectable. </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> app_bt_policy_enter_state(T_STATE state, <a class="code" href="group___b_t___b_t_m.html#ga1818d1a704113dd1b95741dd60754e77">T_BT_DEVICE_MODE</a> mode)</div><div class="line">{</div><div class="line">    .......</div><div class="line">    <span class="keywordflow">if</span> (radio_mode != mode)</div><div class="line">    {</div><div class="line">        app_bt_policy_new_radio_mode(mode);</div><div class="line">        radio_mode = mode;</div><div class="line"><span class="preprocessor">#if F_APP_BLE_SWIFT_PAIR_SUPPORT</span></div><div class="line">        app_swift_pair_handle_radio_mode_change(radio_mode);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">        app_bt_policy_event_ind(<a class="code" href="group___a_p_p___b_t___p_o_l_i_c_y.html#gga6e70b8a0cc718188bb90563706f46a0ba144b500187f7272fbf59e77e5aa26458">BP_EVENT_RADIO_MODE_CHANGED</a>, <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>User could know real swift pair status by callback event: </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> app_swift_pair_adv_callback(uint8_t cb_type, <span class="keywordtype">void</span> *p_cb_data)  <span class="comment">//handle adv state change, user can know swift pair status by this cback</span></div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (cb_type)</div><div class="line">    {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___l_e___e_x_t_e_n_d_e_d___a_d_v___exported___macros.html#gad2dc0692029ca3df07b95326745fcddd">BLE_EXT_ADV_STATE_CHANGE</a>:</div><div class="line">        {</div><div class="line">            swift_pair_adv_state = cb_data.<a class="code" href="union_t___b_l_e___e_x_t___a_d_v___c_b___d_a_t_a.html#a28834c69236a8dd84a2cb8cd96bd5679">p_ble_state_change</a>-&gt;<a class="code" href="struct_t___b_l_e___e_x_t___a_d_v___s_t_a_t_e___c_h_a_n_g_e.html#a4ba96644db04ef399056f6717d5666fa">state</a>;</div><div class="line">            <span class="keywordflow">if</span> (swift_pair_adv_state == <a class="code" href="group___l_e___e_x_t_e_n_d_e_d___a_d_v___exported___types.html#ggac36a5ae5a7b98cc2dffe340704c8f2e3a3ad5f9978c6861ed2042360cef5e5186">BLE_EXT_ADV_MGR_ADV_ENABLED</a>)</div><div class="line">            {</div><div class="line">                <span class="comment">//swift pair started</span></div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (swift_pair_adv_state == <a class="code" href="group___l_e___e_x_t_e_n_d_e_d___a_d_v___exported___types.html#ggac36a5ae5a7b98cc2dffe340704c8f2e3acf6402209e91954f506dfeaf6f040123">BLE_EXT_ADV_MGR_ADV_DISABLED</a>)</div><div class="line">            {</div><div class="line">                <span class="comment">//swift pair stoped</span></div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___l_e___e_x_t_e_n_d_e_d___a_d_v___exported___macros.html#ga2dd2f17ba3ae875441107f1c21f8d994">BLE_EXT_ADV_SET_CONN_INFO</a>:</div><div class="line">        <span class="comment">// if swift pair adv is connectable, there is a ble link connected by this adv</span></div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>Swift pair has three mode, The defference of three mode is only in adv data struct which bring different connection type, User could select swift pair mode: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> app_swift_pair_select_mode(T_APP_SWIFT_PAIR_MODE mode)</div></div><!-- fragment --><p>F_APP_BLE_SWIFT_PAIR_SUPPORT is code macro which is the key about swift pair code is included in app bin or not, this macro could set in app_flags.h</p>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="SWIFT_PAIR_ADV_DATA_STRUCT"></a>
4 Swift Pair Adv Data Struct</h2>
<p>Swift pair support three connection type by three adv data. Firstly it supports Ble connection only. </p><div class="image">
<img src="SwiftAdvDataLeOnly.jpg" alt="SwiftAdvDataLeOnly.jpg"/>
</div>
 <center><div id="figure_4_1"><b>Figure 4-1 Pairing over Ble Only</b></div></center><p>Secondly it supports Ble and bredr connection simultaneously. </p><div class="image">
<img src="SwiftPairAdvBredrLe.jpg" alt="SwiftPairAdvBredrLe.jpg"/>
</div>
 <center><div id="figure_4_2"><b>Figure 4-2 Pairing over Ble and BR/EDR with Secure Connection</b></div></center><p>Thirdly it supports Bredr connection only. </p><div class="image">
<img src="SwiftPairAdvBredrOnly.jpg" alt="SwiftPairAdvBredrOnly.jpg"/>
</div>
 <center><div id="figure_4_3"><b>Figure 4-3 Pairing over BR/EDR only</b></div></center><div style="page-break-after: always;"></div><h2><a class="anchor" id="SWIFT_PAIR_USE_INTRODUCE"></a>
5 Swift Pair Use Introduce</h2>
<p>If swift pair work normally and computer can support quick pair feature, then user could see popup in windows os: </p><div class="image">
<img src="SwiftPairPopup.jpg" alt="SwiftPairPopup.jpg"/>
</div>
 <center><div id="figure_5_1"><b>Figure 5-1 Swift Pair Success</b></div></center><p> Note: If user click connect button and connect failed, it is maybe that radio mode of peripheral has changed but popup is still existed, Connecting failed in this scenario is normal.</p>
<p>There are not all computer could pair over swift pair feature, User could check this feature in Bluetooth Setting interface: <br />
</p><div class="image">
<img src="SwiftPairQuickPair.jpg" alt="SwiftPairQuickPair.jpg"/>
</div>
 <center><div id="figure_5_2"><b>Figure 5-2 Set on Windows OS</b></div></center> </div></div><!-- contents -->

<HR SIZE=5>
<font size="3" color="black">Copyright(c) 2020, <a href=" http://www.realtek.com.tw/"><font size="3" color="#6FB7B7"><b>Realtek Semiconductor Corporation</b></font></a>. All rights reserved.</font> 
