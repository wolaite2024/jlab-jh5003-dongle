<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BT AUDIO SDK: $title</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bbpro-h55px.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BT AUDIO SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,true,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="Sensor_PX318J_Manual"></a>
APP SENSOR PX318J Module Application Note    </h1>
<h2><a class="anchor" id="Rws_App_Rev"></a>
Revision History</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Version  </th><th class="markdownTableHeadCenter">Date  </th><th class="markdownTableHeadCenter">Description   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">V1.0.0.0  </td><td class="markdownTableBodyCenter">2021/10/21  </td><td class="markdownTableBodyCenter">Stable Release   </td></tr>
</table>
<h2>Contents</h2>
<ul>
<li><a class="el" href="_a_n053__a_p_p__s_e_n_s_o_r__p_x318_j__m_o_d_u_l_e.html#APP_SENSOR_PX318J_Module_Introduction">Introduction</a></li>
<li><a class="el" href="_a_n053__a_p_p__s_e_n_s_o_r__p_x318_j__m_o_d_u_l_e.html#McuConfigTool_Configuration">McuConfigTool Configuration</a></li>
<li><a class="el" href="_a_n053__a_p_p__s_e_n_s_o_r__p_x318_j__m_o_d_u_l_e.html#Source_Code_Overview">Source Code Overview</a></li>
</ul>
<h2><a class="anchor" id="APP_SENSOR_PX318J_Module_Introduction"></a>
Introduction</h2>
<p>The purpose of this document is to give an overview of the app sensor PX318J module for customer. The document describes how to use app sensor PX318J module in app project. The source code consists of <b>APP_SENSOR_PX318J</b> part. The details will be described in the following sections.</p>
<h2><a class="anchor" id="McuConfigTool_Configuration"></a>
McuConfigTool Configuration</h2>
<p>Light sensor PX318J can be enabled in "HW Feature" page.</p>
<div class="image">
<img src="mcuconfig_px318j_enable.png" alt="mcuconfig_px318j_enable.png"/>
</div>
<p>Select i2c and Sensor detect pin.</p>
<div class="image">
<img src="mcuconfig_px318j_pin_setting.png" alt="mcuconfig_px318j_pin_setting.png"/>
</div>
<p>Below is light sensor PX318J parameter's default value.</p>
<div class="image">
<img src="mcuconfig_px318j_default_settings.png" alt="mcuconfig_px318j_default_settings.png"/>
</div>
<h2><a class="anchor" id="Source_Code_Overview"></a>
Source Code Overview</h2>
<p>This section describes app sensor px318j module. The reference file is shown as follows:</p>
<ul>
<li>Project source code directory: sdk\src\sample\rws\app_sensor_px318j.c This module is used to handle app sensor px318j message.</li>
</ul>
<h3>Initialize sensor px318j settings</h3>
<p>source code directory: sdk/src/sample/rws/app_main.c <br />
 Configure i2c and ready pinmux settings.</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="group___b_t___p_a_n___d_e_m_o___m_a_i_n.html#ga916f2adc2080b4fe88034086d107a8dc">board_init</a>(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    ...</div><div class="line">    <span class="comment">//Config I2C0 pinmux. For CP control</span></div><div class="line">    <span class="keywordflow">if</span> (... ||</div><div class="line">        (<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#a17ddc5e00faaf29761e949e9d8c54fa9">sensor_support</a> &amp;&amp; (<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#ae88db177a0e30bc5a1fea3e8ff8f3770">sensor_vendor</a> == <a class="code" href="group___s_e_n_s_o_r___p_r_o_c_e_s_s___exported___macros.html#ga798d0e21171ff462631c4d89ad4085fc">SENSOR_LD_VENDOR_PX</a>))</div><div class="line">        || ...)</div><div class="line">    {</div><div class="line">        <a class="code" href="group___p_i_n_m_u_x___exported___functions.html#ga54f185f00ccea46d0645189f40a4f8d0">Pinmux_Config</a>(<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="group___a_p_p___c_f_g.html#ga0fb1d7986ba00473bdfea08c2ac01170">i2c_0_dat_pinmux</a>, <a class="code" href="group___pin___function___number.html#ga45abc3be27b3a432951957dd89a92d6d">I2C0_DAT</a>);</div><div class="line">        <a class="code" href="group___p_i_n_m_u_x___exported___functions.html#ga54f185f00ccea46d0645189f40a4f8d0">Pinmux_Config</a>(<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="group___a_p_p___c_f_g.html#ga41452002164a5bbf244844d6e08094f3">i2c_0_clk_pinmux</a>, <a class="code" href="group___pin___function___number.html#gac5cc25f09142178641ac1a4840273045">I2C0_CLK</a>);</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#addf66401e48010153ec1f76859f5b278">chip_supply_power_to_light_sensor_digital_VDD</a>)</div><div class="line">        {</div><div class="line">            <a class="code" href="group___p_i_n_m_u_x___exported___functions.html#ga38de86a8ea4d49c04e681494cc1c69cc">Pad_Config</a>(<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="group___a_p_p___c_f_g.html#ga41452002164a5bbf244844d6e08094f3">i2c_0_clk_pinmux</a>,</div><div class="line">                       <a class="code" href="group__x3e___p_a_d___mode.html#gga2cc156cba11040bcf54db2efeb9cb587a63d53e3c9ddf88d4806c1f7aa539564c">PAD_SW_MODE</a>, <a class="code" href="group__x3e___p_a_d___power___mode.html#ggac2e804c73a9d287080d1cf1207e6a177a64ef7041a073bac1e848da51333064e0">PAD_IS_PWRON</a>, <a class="code" href="group__x3e___p_a_d___pull___mode.html#ggaed6ddbb1abccbd7d16dd3dcb8319f475a7428dd8f0f6a28898ca7abfbcc02c02b">PAD_PULL_DOWN</a>, <a class="code" href="group__x3e___p_a_d___output___config.html#ggacfc9e3ea370eb8401828c4b97c110dd0addca868800d517c0513e6a87c3350a00">PAD_OUT_DISABLE</a>, <a class="code" href="group__x3e___p_a_d___output___value.html#gga1bbbfd046e26ccb142c1b42f1d4dccd7a05d2e6f1ea0162d1d61ab077a5e988a5">PAD_OUT_LOW</a>);</div><div class="line">            <a class="code" href="group___p_i_n_m_u_x___exported___functions.html#ga38de86a8ea4d49c04e681494cc1c69cc">Pad_Config</a>(<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="group___a_p_p___c_f_g.html#ga0fb1d7986ba00473bdfea08c2ac01170">i2c_0_dat_pinmux</a>,</div><div class="line">                       <a class="code" href="group__x3e___p_a_d___mode.html#gga2cc156cba11040bcf54db2efeb9cb587a63d53e3c9ddf88d4806c1f7aa539564c">PAD_SW_MODE</a>, <a class="code" href="group__x3e___p_a_d___power___mode.html#ggac2e804c73a9d287080d1cf1207e6a177a64ef7041a073bac1e848da51333064e0">PAD_IS_PWRON</a>, <a class="code" href="group__x3e___p_a_d___pull___mode.html#ggaed6ddbb1abccbd7d16dd3dcb8319f475a7428dd8f0f6a28898ca7abfbcc02c02b">PAD_PULL_DOWN</a>, <a class="code" href="group__x3e___p_a_d___output___config.html#ggacfc9e3ea370eb8401828c4b97c110dd0addca868800d517c0513e6a87c3350a00">PAD_OUT_DISABLE</a>, <a class="code" href="group__x3e___p_a_d___output___value.html#gga1bbbfd046e26ccb142c1b42f1d4dccd7a05d2e6f1ea0162d1d61ab077a5e988a5">PAD_OUT_LOW</a>);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">        {</div><div class="line">            <a class="code" href="group___p_i_n_m_u_x___exported___functions.html#ga38de86a8ea4d49c04e681494cc1c69cc">Pad_Config</a>(<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="group___a_p_p___c_f_g.html#ga0fb1d7986ba00473bdfea08c2ac01170">i2c_0_dat_pinmux</a>,</div><div class="line">                       <a class="code" href="group__x3e___p_a_d___mode.html#gga2cc156cba11040bcf54db2efeb9cb587a8309999f45f91d480cb6fbb7082efbf3">PAD_PINMUX_MODE</a>, <a class="code" href="group__x3e___p_a_d___power___mode.html#ggac2e804c73a9d287080d1cf1207e6a177a64ef7041a073bac1e848da51333064e0">PAD_IS_PWRON</a>, <a class="code" href="group__x3e___p_a_d___pull___mode.html#ggaed6ddbb1abccbd7d16dd3dcb8319f475ae7cf699523e72c6a7d461137324b4830">PAD_PULL_UP</a>, <a class="code" href="group__x3e___p_a_d___output___config.html#ggacfc9e3ea370eb8401828c4b97c110dd0addca868800d517c0513e6a87c3350a00">PAD_OUT_DISABLE</a>, <a class="code" href="group__x3e___p_a_d___output___value.html#gga1bbbfd046e26ccb142c1b42f1d4dccd7a05d2e6f1ea0162d1d61ab077a5e988a5">PAD_OUT_LOW</a>);</div><div class="line">            <a class="code" href="group___p_i_n_m_u_x___exported___functions.html#ga38de86a8ea4d49c04e681494cc1c69cc">Pad_Config</a>(<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="group___a_p_p___c_f_g.html#ga41452002164a5bbf244844d6e08094f3">i2c_0_clk_pinmux</a>,</div><div class="line">                       <a class="code" href="group__x3e___p_a_d___mode.html#gga2cc156cba11040bcf54db2efeb9cb587a8309999f45f91d480cb6fbb7082efbf3">PAD_PINMUX_MODE</a>, <a class="code" href="group__x3e___p_a_d___power___mode.html#ggac2e804c73a9d287080d1cf1207e6a177a64ef7041a073bac1e848da51333064e0">PAD_IS_PWRON</a>, <a class="code" href="group__x3e___p_a_d___pull___mode.html#ggaed6ddbb1abccbd7d16dd3dcb8319f475ae7cf699523e72c6a7d461137324b4830">PAD_PULL_UP</a>, <a class="code" href="group__x3e___p_a_d___output___config.html#ggacfc9e3ea370eb8401828c4b97c110dd0addca868800d517c0513e6a87c3350a00">PAD_OUT_DISABLE</a>, <a class="code" href="group__x3e___p_a_d___output___value.html#gga1bbbfd046e26ccb142c1b42f1d4dccd7a05d2e6f1ea0162d1d61ab077a5e988a5">PAD_OUT_LOW</a>);</div><div class="line">            <a class="code" href="group___p_i_n_m_u_x___exported___functions.html#ga6fba11d1c47ed72ecc8aff0345b2610e">Pad_PullConfigValue</a>(<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="group___a_p_p___c_f_g.html#ga0fb1d7986ba00473bdfea08c2ac01170">i2c_0_dat_pinmux</a>, <a class="code" href="group__x3e___p_a_d___pull___value.html#ggabd2e9d134da5f73923bb4b7f0575040ea05cb4182b36608b20a14d9c4860a2f72">PAD_STRONG_PULL</a>);</div><div class="line">            <a class="code" href="group___p_i_n_m_u_x___exported___functions.html#ga6fba11d1c47ed72ecc8aff0345b2610e">Pad_PullConfigValue</a>(<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="group___a_p_p___c_f_g.html#ga41452002164a5bbf244844d6e08094f3">i2c_0_clk_pinmux</a>, <a class="code" href="group__x3e___p_a_d___pull___value.html#ggabd2e9d134da5f73923bb4b7f0575040ea05cb4182b36608b20a14d9c4860a2f72">PAD_STRONG_PULL</a>);</div><div class="line">        }</div><div class="line">    }</div><div class="line">    ...</div><div class="line">    <span class="comment">//config sensor pinmux</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#a17ddc5e00faaf29761e949e9d8c54fa9">sensor_support</a>)</div><div class="line">    {</div><div class="line">        ...</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#ae88db177a0e30bc5a1fea3e8ff8f3770">sensor_vendor</a> == <a class="code" href="group___s_e_n_s_o_r___p_r_o_c_e_s_s___exported___macros.html#ga798d0e21171ff462631c4d89ad4085fc">SENSOR_LD_VENDOR_PX</a>)</div><div class="line">        {</div><div class="line">            <a class="code" href="group___p_i_n_m_u_x___exported___functions.html#ga54f185f00ccea46d0645189f40a4f8d0">Pinmux_Config</a>(<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#adafbce84177e485681bb914fd9709ff1">sensor_detect_pinmux</a>, <a class="code" href="group___pin___function___number.html#ga9d5468fc89ece8692bbc8e132e2e2471">DWGPIO</a>);</div><div class="line">            <a class="code" href="group___p_i_n_m_u_x___exported___functions.html#ga38de86a8ea4d49c04e681494cc1c69cc">Pad_Config</a>(<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#adafbce84177e485681bb914fd9709ff1">sensor_detect_pinmux</a>,</div><div class="line">                       <a class="code" href="group__x3e___p_a_d___mode.html#gga2cc156cba11040bcf54db2efeb9cb587a8309999f45f91d480cb6fbb7082efbf3">PAD_PINMUX_MODE</a>, <a class="code" href="group__x3e___p_a_d___power___mode.html#ggac2e804c73a9d287080d1cf1207e6a177a64ef7041a073bac1e848da51333064e0">PAD_IS_PWRON</a>, <a class="code" href="group__x3e___p_a_d___pull___mode.html#ggaed6ddbb1abccbd7d16dd3dcb8319f475ae7cf699523e72c6a7d461137324b4830">PAD_PULL_UP</a>, <a class="code" href="group__x3e___p_a_d___output___config.html#ggacfc9e3ea370eb8401828c4b97c110dd0addca868800d517c0513e6a87c3350a00">PAD_OUT_DISABLE</a>, <a class="code" href="group__x3e___p_a_d___output___value.html#gga1bbbfd046e26ccb142c1b42f1d4dccd7a2c46edbcf7e322cae25b4a64fc568bb8">PAD_OUT_HIGH</a>);</div><div class="line">        }</div><div class="line">    }</div><div class="line">    ...</div><div class="line">}</div></div><!-- fragment --><p> Initialize sensor px318j peripheral.</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="group___p_e_r_i_p_h___a_p_p___t_a_s_k.html#ga431d3b5cbaad02e4dba35c48dc7bd161">driver_init</a>(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    ...</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#a17ddc5e00faaf29761e949e9d8c54fa9">sensor_support</a>)</div><div class="line">    {</div><div class="line">        ...</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#ae88db177a0e30bc5a1fea3e8ff8f3770">sensor_vendor</a> == <a class="code" href="group___s_e_n_s_o_r___p_r_o_c_e_s_s___exported___macros.html#ga798d0e21171ff462631c4d89ad4085fc">SENSOR_LD_VENDOR_PX</a>)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#addf66401e48010153ec1f76859f5b278">chip_supply_power_to_light_sensor_digital_VDD</a>)</div><div class="line">            {</div><div class="line">                <span class="comment">/* Init PX318J after output power supply pin pull high */</span></div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                <a class="code" href="group___a_p_p___s_e_n_s_r_o_r___i2_c.html#ga46f7a89baf227f439cbaad1cc259f1af">app_sensor_i2c_init</a>(PX318J_ID, <a class="code" href="group___a_p_p___s_e_n_s_r_o_r___i2_c.html#ggabdd569d8e880b79aa712ea00f1a3cbdfa33014c4fe23144aa722ea7e3e1f6d50d">PX318J_I2C_CLK_SPD</a>, <span class="keyword">false</span>);</div><div class="line">                app_sensor_px318j_init();</div><div class="line">                app_sensor_int_gpio_init(<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#adafbce84177e485681bb914fd9709ff1">sensor_detect_pinmux</a>,</div><div class="line">                                         app_sensor_px318j_int_gpio_intr_cb);</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line">    ...</div><div class="line">}</div></div><!-- fragment --><h3>Handle px318j message</h3>
<p>source code directory: sdk/src/sample/rws/app_sensor_px318j.c <br />
</p>
<p>Get px318j NEAR / FAR status and send io msg.</p>
<div class="fragment"><div class="line"><a class="code" href="group___s_e_c_t_i_o_n___exported___macros.html#gaf901ecfe15c401262a5dfd752a0b0287">ISR_TEXT_SECTION</a> <span class="keywordtype">void</span> app_sensor_px318j_int_gpio_intr_cb(uint32_t param)</div><div class="line">{</div><div class="line">    ...</div><div class="line">    <a class="code" href="group___a_p_p___s_e_n_s_r_o_r___i2_c.html#ga7cc9bfc44b062169f15bffd1a3d14542">app_sensor_i2c_read_8</a>(PX318J_ID, PX318J_INTTERUPT_REG, &amp;int_flag);</div><div class="line">    <a class="code" href="group___a_p_p___s_e_n_s_r_o_r___i2_c.html#ga7cc9bfc44b062169f15bffd1a3d14542">app_sensor_i2c_read_8</a>(PX318J_ID, PX318J_STATE_FLAG_REG, &amp;buf);</div><div class="line"></div><div class="line">    ...</div><div class="line">    <span class="keywordflow">if</span> (near_far_flag == FAR)</div><div class="line">    {</div><div class="line">        <span class="comment">//Only handle click press (high -&gt; low), not handle release</span></div><div class="line">        gpio_msg.<a class="code" href="struct_t___i_o___m_s_g.html#acb5cfd209ba75c853d03f701e7f91679">type</a> = <a class="code" href="group___a_p_p___m_s_g___exported___types.html#gga468a59751cf5bb96e120b43fea01e074af11ba4096588dc277d9bd604f1007024">IO_MSG_TYPE_GPIO</a>;</div><div class="line">        gpio_msg.<a class="code" href="struct_t___i_o___m_s_g.html#ac5d9ab8403fb9ca24facc32b821dd53b">subtype</a> = <a class="code" href="group___a_p_p___m_s_g___exported___types.html#ggac53061b3924b56c44eacd7e43a711f10a3a499521c6d9eb11324ee2ebb639d6d4">IO_MSG_GPIO_SENSOR_LD</a>;</div><div class="line">        gpio_msg.<a class="code" href="struct_t___i_o___m_s_g.html#ac3cb856d7e1befacacda7d89dbaabd13">u</a>.<a class="code" href="struct_t___i_o___m_s_g.html#aba18f3d521fde3af39c58b809a9c7ef0">param</a> = <a class="code" href="group___s_e_n_s_o_r___p_r_o_c_e_s_s___exported___macros.html#ga7194ea9a291171a803a300b6fda30864">SENSOR_LD_OUT_EAR</a>;</div><div class="line">     }</div><div class="line">     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (near_far_flag == NEAR)</div><div class="line">     {</div><div class="line">        gpio_msg.<a class="code" href="struct_t___i_o___m_s_g.html#acb5cfd209ba75c853d03f701e7f91679">type</a> = <a class="code" href="group___a_p_p___m_s_g___exported___types.html#gga468a59751cf5bb96e120b43fea01e074af11ba4096588dc277d9bd604f1007024">IO_MSG_TYPE_GPIO</a>;</div><div class="line">        gpio_msg.<a class="code" href="struct_t___i_o___m_s_g.html#ac5d9ab8403fb9ca24facc32b821dd53b">subtype</a> = <a class="code" href="group___a_p_p___m_s_g___exported___types.html#ggac53061b3924b56c44eacd7e43a711f10a3a499521c6d9eb11324ee2ebb639d6d4">IO_MSG_GPIO_SENSOR_LD</a>;</div><div class="line">        gpio_msg.<a class="code" href="struct_t___i_o___m_s_g.html#ac3cb856d7e1befacacda7d89dbaabd13">u</a>.<a class="code" href="struct_t___i_o___m_s_g.html#aba18f3d521fde3af39c58b809a9c7ef0">param</a> = <a class="code" href="group___s_e_n_s_o_r___p_r_o_c_e_s_s___exported___macros.html#ga78236708eb2be523c415d855a07fe707">SENSOR_LD_IN_EAR</a>;</div><div class="line">     }</div><div class="line"></div><div class="line">     <span class="keywordflow">if</span> (near_far_flag != NEAR_FAR_NONE)</div><div class="line">     {</div><div class="line">        <a class="code" href="group___a_p_p___i_o___m_s_g.html#ga88a966ae202533d382e23ae22b27b819">app_io_msg_send</a>(&amp;gpio_msg);</div><div class="line">     }</div><div class="line">}</div></div><!-- fragment --><p>source code directory: sdk/src/sample/rws/app_io_msg.c <br />
 Handle io msg which is sent from px318j interrupt handler.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="group___a_p_p___i_o___m_s_g.html#gab3416cc2898ca3f036749335997d4841">app_io_handle_msg</a>(<a class="code" href="struct_t___i_o___m_s_g.html">T_IO_MSG</a> io_driver_msg_recv)</div><div class="line">{</div><div class="line">    ...</div><div class="line">    <span class="keywordflow">switch</span> (msgtype)</div><div class="line">    {</div><div class="line">        ...</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___a_p_p___m_s_g___exported___types.html#ggac53061b3924b56c44eacd7e43a711f10a3a499521c6d9eb11324ee2ebb639d6d4">IO_MSG_GPIO_SENSOR_LD</a>:</div><div class="line">                app_sensor_ld_handle_msg(&amp;io_driver_msg_recv);</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">    ...</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->

<HR SIZE=5>
<font size="3" color="black">Copyright(c) 2020, <a href=" http://www.realtek.com.tw/"><font size="3" color="#6FB7B7"><b>Realtek Semiconductor Corporation</b></font></a>. All rights reserved.</font> 
