<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BT AUDIO SDK: $title</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bbpro-h55px.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BT AUDIO SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,true,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="contents">
<div class="textblock"><p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
 </p>
<h1><a class="anchor" id="AVRCP_USER_MANU"></a>
AVRCP Application Note </h1>
<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
 </p><center><b>V1.2</b></center><p><br />
 </p><center><b>2023/06/20</b></center><div style="page-break-after: always;"></div> <h2><a class="anchor" id="AVRCP_Rev"></a>
Revision History</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Version  </th><th class="markdownTableHeadCenter">Date  </th><th class="markdownTableHeadCenter">Description   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">V1.0.0.0  </td><td class="markdownTableBodyCenter">2021/10/21  </td><td class="markdownTableBodyCenter">Stable Release   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">V1.1  </td><td class="markdownTableBodyCenter">2023/05/24  </td><td class="markdownTableBodyCenter">Change version number to 2 digits   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">V1.2  </td><td class="markdownTableBodyCenter">2023/06/20  </td><td class="markdownTableBodyCenter">Structure adjustment   </td></tr>
</table>
<div style="page-break-after: always;"></div> <h2><a class="anchor" id="AVRCP_Content"></a>
Contents</h2>
<ul>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_Rev">Revision History</a></li>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_Table_List">Table List</a></li>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_Figure_List">Figure List</a></li>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_Glossary">Glossary</a></li>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_Intro">1 Introduction</a><ul>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_Role">1.1 AVRCP Roles</a></li>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_SDP_RECORD">1.2 AVRCP SDP Record</a></li>
</ul>
</li>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_Control">2 AVRCP Control</a><ul>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_Control_Init">2.1 AVRCP Init</a></li>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_Control_Connect">2.2 AVRCP Control Connect</a></li>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_Control_Key">2.3 AVRCP Control Key</a></li>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_Control_Volume">2.4 AVRCP Control Volume</a></li>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_Control_Miscellaneous">2.5 AVRCP Control Miscellaneous</a></li>
</ul>
</li>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_Browsing">3 AVRCP Browsing</a><ul>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_Browsing_Connect">3.1 AVRCP Browsing Connect</a></li>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_Browsing_App_Setting">3.2 AVRCP Browsing Application Setting</a></li>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_Browsing_Search">3.3 AVRCP Browsing Search</a></li>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_Browsing_Miscellaneous">3.4 AVRCP Browsing Miscellaneous</a></li>
</ul>
</li>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_CoverArt">4 Cover Art</a><ul>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_CoverArt_Flow">4.1 Cover Art Retrieve Procedure</a></li>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_CoverArt_Connect">4.2 AVRCP Cover Art Connect</a></li>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_CoverArt_Retrieve">4.3 AVRCP Cover Art Retrieve</a></li>
<li><a class="el" href="_a_v_r_c_p.html#AVRCP_CoverArt_Disconnect">4.4 AVRCP Cover Art Disconnect</a></li>
</ul>
</li>
</ul>
<div style="page-break-after: always;"></div> <h2><a class="anchor" id="AVRCP_Table_List"></a>
Table List</h2>
<ul>
<li><a href="#table_1_1">Table 1-1 Bits for Supported Features</a></li>
</ul>
<div style="page-break-after: always;"></div> <h2><a class="anchor" id="AVRCP_Figure_List"></a>
Figure List</h2>
<ul>
<li><a href="#figure_2_1">Figure 2-1 AVRCP Features Set</a></li>
<li><a href="#figure_2_2">Figure 2-2 AVRCP Play Status Changed</a></li>
<li><a href="#figure_2_3">Figure 2-3 AVRCP Volume Adjustment from SRC</a></li>
<li><a href="#figure_2_4">Figure 2-4 AVRCP Volume Adjustment from SNK</a></li>
<li><a href="#figure_3_1">Figure 3-1 Search Procedure</a></li>
<li><a href="#figure_4_1">Figure 4-1 Cover Art Usage</a></li>
<li><a href="#figure_4_2">Figure 4-2 Profile Hierarchy</a></li>
<li><a href="#figure_4_3">Figure 4-3 Cover Art Retrieve Procedure</a></li>
</ul>
<div style="page-break-after: always;"></div> <h2><a class="anchor" id="AVRCP_Glossary"></a>
Glossary</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Terms  </th><th class="markdownTableHeadCenter">Definitions   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">AVRCP  </td><td class="markdownTableBodyCenter">Audio/Video Remote Control Profile   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">CT  </td><td class="markdownTableBodyCenter">A device that initiates a transaction by sending a command frame to a target.   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">TG  </td><td class="markdownTableBodyCenter">A device that receives a command frame and accordingly generates a response frame.   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">BIP  </td><td class="markdownTableBodyCenter">Basic Imaging Profile   </td></tr>
</table>
<div style="page-break-after: always;"></div> <h2><a class="anchor" id="AVRCP_Intro"></a>
1 Introduction</h2>
<p>This manual describes the <b>AVRCP API definition</b>. AVRCP defines the features and procedures required in order to ensure interoperability between Bluetooth devices with audio/video control functions in the Audio/Video distribution scenarios.</p>
<h3><a class="anchor" id="AVRCP_Role"></a>
1.1 AVRCP Roles</h3>
<p>The following roles are defined for devices that implement this profile:</p><ul>
<li><b>Controller (CT)</b> - A device that initiates a transaction by sending a command frame to a target. Examples for CT are a personal computer, a PDA, a mobile phone, a remote controller or an AV device (such as an in car system, headphone, player/recorder, timer, tuner, monitor etc.).</li>
<li><b>Target (TG)</b> - a device that receives a command frame and accordingly generates a response frame. Examples for TG are an audio player/recorder, a video player/recorder, a TV, a tuner, an amplifier or a headphone.</li>
</ul>
<h3><a class="anchor" id="AVRCP_SDP_RECORD"></a>
1.2 AVRCP SDP Record</h3>
<p>AVRCP local record <b>avrcp_ct_sdp_record</b> and <b>avrcp_tg_sdp_record</b> should be registered by <a class="el" href="group___b_t___s_d_p.html#ga929bad3b33b7416db99e39e776641fef" title="Add an SDP record to BT stack. ">bt_sdp_record_add()</a>. </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> uint8_t avrcp_ct_sdp_record[] =</div><div class="line">{</div><div class="line">    <span class="comment">//Total length</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga3162e2d0cb09ada26915070f4082f82a">SDP_DATA_ELEM_SEQ_HDR</a>,</div><div class="line">    0x3B,<span class="comment">//0x49,//0x62,</span></div><div class="line"></div><div class="line">    <span class="comment">//Attribute SDP_ATTR_SRV_CLASS_ID_LIST</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga942a94138894beb2b2bc75daebc6e2d0">SDP_UNSIGNED_TWO_BYTE</a>,</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___s_d_p___a_t_t_r_i_b_u_t_e_s.html#gae6e31379df951f323d24e4f8b85d42d3">SDP_ATTR_SRV_CLASS_ID_LIST</a> &gt;&gt; 8),</div><div class="line">    (uint8_t)<a class="code" href="group___b_t___s_d_p___a_t_t_r_i_b_u_t_e_s.html#gae6e31379df951f323d24e4f8b85d42d3">SDP_ATTR_SRV_CLASS_ID_LIST</a>,</div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga3162e2d0cb09ada26915070f4082f82a">SDP_DATA_ELEM_SEQ_HDR</a>,</div><div class="line">    0x06, <span class="comment">//Attribute length: 6 bytes</span></div><div class="line">    <span class="comment">//Service Class #0: A/V Remote Control</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga9d465beea934f5f89796f9c6901da35c">SDP_UUID16_HDR</a>,</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___u_u_i_d.html#ga9ecf7a906c9ad42ab5d44a594d8bf51c">UUID_AV_REMOTE_CONTROL</a> &gt;&gt; 8),</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___u_u_i_d.html#ga9ecf7a906c9ad42ab5d44a594d8bf51c">UUID_AV_REMOTE_CONTROL</a>),</div><div class="line">    <span class="comment">//Service Class #1: A/V Remote Control Controller</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga9d465beea934f5f89796f9c6901da35c">SDP_UUID16_HDR</a>,</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___u_u_i_d.html#gae0f02b7abd8bc5bf5ef01f57d7fa1dee">UUID_AV_REMOTE_CONTROL_CONTROLLER</a> &gt;&gt; 8),</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___u_u_i_d.html#gae0f02b7abd8bc5bf5ef01f57d7fa1dee">UUID_AV_REMOTE_CONTROL_CONTROLLER</a>),</div><div class="line"></div><div class="line">    <span class="comment">//Attribute SDP_ATTR_PROTO_DESC_LIST</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga942a94138894beb2b2bc75daebc6e2d0">SDP_UNSIGNED_TWO_BYTE</a>,</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___s_d_p___a_t_t_r_i_b_u_t_e_s.html#ga3e3afe98f67b0f02ee51ca67e2d257b6">SDP_ATTR_PROTO_DESC_LIST</a> &gt;&gt; 8),</div><div class="line">    (uint8_t)<a class="code" href="group___b_t___s_d_p___a_t_t_r_i_b_u_t_e_s.html#ga3e3afe98f67b0f02ee51ca67e2d257b6">SDP_ATTR_PROTO_DESC_LIST</a>,</div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga3162e2d0cb09ada26915070f4082f82a">SDP_DATA_ELEM_SEQ_HDR</a>,</div><div class="line">    0x10, <span class="comment">//Attribute length: 12 bytes</span></div><div class="line">    <span class="comment">//Protocol #0: L2CAP</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga3162e2d0cb09ada26915070f4082f82a">SDP_DATA_ELEM_SEQ_HDR</a>,</div><div class="line">    0x06, <span class="comment">//Element length: 3 bytes</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga9d465beea934f5f89796f9c6901da35c">SDP_UUID16_HDR</a>,</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___u_u_i_d.html#ga847ad44f6d4c69761ac39371da15020d">UUID_L2CAP</a> &gt;&gt; 8),</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___u_u_i_d.html#ga847ad44f6d4c69761ac39371da15020d">UUID_L2CAP</a>),</div><div class="line">    <span class="comment">//Parameter #0 for Protocol #0: PSM = AVCTP</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga942a94138894beb2b2bc75daebc6e2d0">SDP_UNSIGNED_TWO_BYTE</a>,</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___p_s_m.html#gadbd86640a357d1151a77dfa8ff2c97a4">PSM_AVCTP</a> &gt;&gt; 8),</div><div class="line">    (uint8_t)<a class="code" href="group___b_t___p_s_m.html#gadbd86640a357d1151a77dfa8ff2c97a4">PSM_AVCTP</a>,</div><div class="line">    <span class="comment">//Protocol #1: AVCTP</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga3162e2d0cb09ada26915070f4082f82a">SDP_DATA_ELEM_SEQ_HDR</a>,</div><div class="line">    0x06, <span class="comment">//Element length: 5 bytes</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga9d465beea934f5f89796f9c6901da35c">SDP_UUID16_HDR</a>,</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___u_u_i_d.html#ga9557aa4885b613533cd497d6ae10be30">UUID_AVCTP</a> &gt;&gt; 8),</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___u_u_i_d.html#ga9557aa4885b613533cd497d6ae10be30">UUID_AVCTP</a>),</div><div class="line">    <span class="comment">//Parameter #0 for Protocol #1: 0x0104 (v1.4)</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga942a94138894beb2b2bc75daebc6e2d0">SDP_UNSIGNED_TWO_BYTE</a>,</div><div class="line">    (uint8_t)(0x0104 &gt;&gt; 8),</div><div class="line">    (uint8_t)(0x0104),</div><div class="line"></div><div class="line">    <span class="comment">//Attribute SDP_ATTR_PROFILE_DESC_LIST</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga942a94138894beb2b2bc75daebc6e2d0">SDP_UNSIGNED_TWO_BYTE</a>,</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___s_d_p___a_t_t_r_i_b_u_t_e_s.html#ga4aa7aa3090459d3056faa878fcfde257">SDP_ATTR_PROFILE_DESC_LIST</a> &gt;&gt; 8),</div><div class="line">    (uint8_t)<a class="code" href="group___b_t___s_d_p___a_t_t_r_i_b_u_t_e_s.html#ga4aa7aa3090459d3056faa878fcfde257">SDP_ATTR_PROFILE_DESC_LIST</a>,</div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga3162e2d0cb09ada26915070f4082f82a">SDP_DATA_ELEM_SEQ_HDR</a>,</div><div class="line">    0x08, <span class="comment">//Attribute length: 8 bytes</span></div><div class="line">    <span class="comment">//Profile #0: A/V Remote Control</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga3162e2d0cb09ada26915070f4082f82a">SDP_DATA_ELEM_SEQ_HDR</a>,</div><div class="line">    0x06, <span class="comment">//Element length: 6 bytes</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga9d465beea934f5f89796f9c6901da35c">SDP_UUID16_HDR</a>,</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___u_u_i_d.html#ga9ecf7a906c9ad42ab5d44a594d8bf51c">UUID_AV_REMOTE_CONTROL</a> &gt;&gt; 8),</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___u_u_i_d.html#ga9ecf7a906c9ad42ab5d44a594d8bf51c">UUID_AV_REMOTE_CONTROL</a>),</div><div class="line">    <span class="comment">//Parameter #0 for Profile #0: 0x0106 (v1.6)</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga942a94138894beb2b2bc75daebc6e2d0">SDP_UNSIGNED_TWO_BYTE</a>,</div><div class="line">    (uint8_t)(0x0106 &gt;&gt; 8),</div><div class="line">    (uint8_t)(0x0106),</div><div class="line"></div><div class="line">    <span class="comment">//Attribute SDP_ATTR_SUPPORTED_FEATURES</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga942a94138894beb2b2bc75daebc6e2d0">SDP_UNSIGNED_TWO_BYTE</a>,</div><div class="line">    (uint8_t)((<a class="code" href="group___b_t___s_d_p___p_r_o_f_i_l_e___a_t_t_r_i_b_u_t_e_s.html#ga1d91531d2bd55bfc1bd089e36ad45816">SDP_ATTR_SUPPORTED_FEATURES</a>) &gt;&gt; 8),</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___s_d_p___p_r_o_f_i_l_e___a_t_t_r_i_b_u_t_e_s.html#ga1d91531d2bd55bfc1bd089e36ad45816">SDP_ATTR_SUPPORTED_FEATURES</a>),</div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga942a94138894beb2b2bc75daebc6e2d0">SDP_UNSIGNED_TWO_BYTE</a>,</div><div class="line">    (uint8_t)(0x0001 &gt;&gt; 8), <span class="comment">//Category 1 Player / Recorder  //Supported Features</span></div><div class="line">    (uint8_t)(0x0001),</div><div class="line"></div><div class="line">    <span class="comment">//Attribute SDP_ATTR_BROWSE_GROUP_LIST</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga942a94138894beb2b2bc75daebc6e2d0">SDP_UNSIGNED_TWO_BYTE</a>,</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___s_d_p___a_t_t_r_i_b_u_t_e_s.html#ga4b6cf5cf717a8c0f70bfe4df57f0fbfa">SDP_ATTR_BROWSE_GROUP_LIST</a> &gt;&gt; 8),</div><div class="line">    (uint8_t)<a class="code" href="group___b_t___s_d_p___a_t_t_r_i_b_u_t_e_s.html#ga4b6cf5cf717a8c0f70bfe4df57f0fbfa">SDP_ATTR_BROWSE_GROUP_LIST</a>,</div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga3162e2d0cb09ada26915070f4082f82a">SDP_DATA_ELEM_SEQ_HDR</a>,</div><div class="line">    0x03,</div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga9d465beea934f5f89796f9c6901da35c">SDP_UUID16_HDR</a>,</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___u_u_i_d.html#ga089c7a7d51a97c5a4e47136ba1dcbadf">UUID_PUBLIC_BROWSE_GROUP</a> &gt;&gt; 8),</div><div class="line">    (uint8_t)<a class="code" href="group___b_t___u_u_i_d.html#ga089c7a7d51a97c5a4e47136ba1dcbadf">UUID_PUBLIC_BROWSE_GROUP</a></div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> uint8_t avrcp_tg_sdp_record[] =</div><div class="line">{</div><div class="line">    <span class="comment">//Total length</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga3162e2d0cb09ada26915070f4082f82a">SDP_DATA_ELEM_SEQ_HDR</a>,</div><div class="line">    0x38,<span class="comment">//0x46,//0x5F,</span></div><div class="line"></div><div class="line">    <span class="comment">//Attribute SDP_ATTR_SRV_CLASS_ID_LIST</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga942a94138894beb2b2bc75daebc6e2d0">SDP_UNSIGNED_TWO_BYTE</a>,</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___s_d_p___a_t_t_r_i_b_u_t_e_s.html#gae6e31379df951f323d24e4f8b85d42d3">SDP_ATTR_SRV_CLASS_ID_LIST</a> &gt;&gt; 8),</div><div class="line">    (uint8_t)<a class="code" href="group___b_t___s_d_p___a_t_t_r_i_b_u_t_e_s.html#gae6e31379df951f323d24e4f8b85d42d3">SDP_ATTR_SRV_CLASS_ID_LIST</a>,</div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga3162e2d0cb09ada26915070f4082f82a">SDP_DATA_ELEM_SEQ_HDR</a>,</div><div class="line">    0x03, <span class="comment">//Attribute length: 6 bytes</span></div><div class="line">    <span class="comment">//Service Class #0: A/V Remote Control Target</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga9d465beea934f5f89796f9c6901da35c">SDP_UUID16_HDR</a>,</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___u_u_i_d.html#ga273325b5addf7d488c576df21a9545bd">UUID_AV_REMOTE_CONTROL_TARGET</a> &gt;&gt; 8),</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___u_u_i_d.html#ga273325b5addf7d488c576df21a9545bd">UUID_AV_REMOTE_CONTROL_TARGET</a>),</div><div class="line"></div><div class="line">    <span class="comment">//Attribute SDP_ATTR_PROTO_DESC_LIST</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga942a94138894beb2b2bc75daebc6e2d0">SDP_UNSIGNED_TWO_BYTE</a>,</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___s_d_p___a_t_t_r_i_b_u_t_e_s.html#ga3e3afe98f67b0f02ee51ca67e2d257b6">SDP_ATTR_PROTO_DESC_LIST</a> &gt;&gt; 8),</div><div class="line">    (uint8_t)<a class="code" href="group___b_t___s_d_p___a_t_t_r_i_b_u_t_e_s.html#ga3e3afe98f67b0f02ee51ca67e2d257b6">SDP_ATTR_PROTO_DESC_LIST</a>,</div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga3162e2d0cb09ada26915070f4082f82a">SDP_DATA_ELEM_SEQ_HDR</a>,</div><div class="line">    0x10, <span class="comment">//Attribute length: 12 bytes</span></div><div class="line">    <span class="comment">//Protocol #0: L2CAP</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga3162e2d0cb09ada26915070f4082f82a">SDP_DATA_ELEM_SEQ_HDR</a>,</div><div class="line">    0x06, <span class="comment">//Element length: 3 bytes</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga9d465beea934f5f89796f9c6901da35c">SDP_UUID16_HDR</a>,</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___u_u_i_d.html#ga847ad44f6d4c69761ac39371da15020d">UUID_L2CAP</a> &gt;&gt; 8),</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___u_u_i_d.html#ga847ad44f6d4c69761ac39371da15020d">UUID_L2CAP</a>),</div><div class="line">    <span class="comment">//Parameter #0 for Protocol #0: PSM = AVCTP</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga942a94138894beb2b2bc75daebc6e2d0">SDP_UNSIGNED_TWO_BYTE</a>,</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___p_s_m.html#gadbd86640a357d1151a77dfa8ff2c97a4">PSM_AVCTP</a> &gt;&gt; 8),</div><div class="line">    (uint8_t)<a class="code" href="group___b_t___p_s_m.html#gadbd86640a357d1151a77dfa8ff2c97a4">PSM_AVCTP</a>,</div><div class="line">    <span class="comment">//Protocol #1: AVCTP</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga3162e2d0cb09ada26915070f4082f82a">SDP_DATA_ELEM_SEQ_HDR</a>,</div><div class="line">    0x06, <span class="comment">//Element length: 5 bytes</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga9d465beea934f5f89796f9c6901da35c">SDP_UUID16_HDR</a>,</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___u_u_i_d.html#ga9557aa4885b613533cd497d6ae10be30">UUID_AVCTP</a> &gt;&gt; 8),</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___u_u_i_d.html#ga9557aa4885b613533cd497d6ae10be30">UUID_AVCTP</a>),</div><div class="line">    <span class="comment">//Parameter #0 for Protocol #1: 0x0104 (v1.4)</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga942a94138894beb2b2bc75daebc6e2d0">SDP_UNSIGNED_TWO_BYTE</a>,</div><div class="line">    (uint8_t)(0x0104 &gt;&gt; 8),</div><div class="line">    (uint8_t)(0x0104),</div><div class="line"></div><div class="line">    <span class="comment">//Attribute SDP_ATTR_PROFILE_DESC_LIST</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga942a94138894beb2b2bc75daebc6e2d0">SDP_UNSIGNED_TWO_BYTE</a>,</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___s_d_p___a_t_t_r_i_b_u_t_e_s.html#ga4aa7aa3090459d3056faa878fcfde257">SDP_ATTR_PROFILE_DESC_LIST</a> &gt;&gt; 8),</div><div class="line">    (uint8_t)<a class="code" href="group___b_t___s_d_p___a_t_t_r_i_b_u_t_e_s.html#ga4aa7aa3090459d3056faa878fcfde257">SDP_ATTR_PROFILE_DESC_LIST</a>,</div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga3162e2d0cb09ada26915070f4082f82a">SDP_DATA_ELEM_SEQ_HDR</a>,</div><div class="line">    0x08, <span class="comment">//Attribute length: 8 bytes</span></div><div class="line">    <span class="comment">//Profile #0: A/V Remote Control</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga3162e2d0cb09ada26915070f4082f82a">SDP_DATA_ELEM_SEQ_HDR</a>,</div><div class="line">    0x06, <span class="comment">//Element length: 6 bytes</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga9d465beea934f5f89796f9c6901da35c">SDP_UUID16_HDR</a>,</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___u_u_i_d.html#ga9ecf7a906c9ad42ab5d44a594d8bf51c">UUID_AV_REMOTE_CONTROL</a> &gt;&gt; 8),</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___u_u_i_d.html#ga9ecf7a906c9ad42ab5d44a594d8bf51c">UUID_AV_REMOTE_CONTROL</a>),</div><div class="line">    <span class="comment">//Parameter #0 for Profile #0: 0x0106 (v1.6)</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga942a94138894beb2b2bc75daebc6e2d0">SDP_UNSIGNED_TWO_BYTE</a>,</div><div class="line">    (uint8_t)(0x0106 &gt;&gt; 8),</div><div class="line">    (uint8_t)(0x0106),</div><div class="line"></div><div class="line">    <span class="comment">//Attribute SDP_ATTR_SUPPORTED_FEATURES</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga942a94138894beb2b2bc75daebc6e2d0">SDP_UNSIGNED_TWO_BYTE</a>,</div><div class="line">    (uint8_t)((<a class="code" href="group___b_t___s_d_p___p_r_o_f_i_l_e___a_t_t_r_i_b_u_t_e_s.html#ga1d91531d2bd55bfc1bd089e36ad45816">SDP_ATTR_SUPPORTED_FEATURES</a>) &gt;&gt; 8),</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___s_d_p___p_r_o_f_i_l_e___a_t_t_r_i_b_u_t_e_s.html#ga1d91531d2bd55bfc1bd089e36ad45816">SDP_ATTR_SUPPORTED_FEATURES</a>),</div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga942a94138894beb2b2bc75daebc6e2d0">SDP_UNSIGNED_TWO_BYTE</a>,</div><div class="line">    (uint8_t)(0x0002 &gt;&gt; 8), <span class="comment">//Category 2 Amplifier</span></div><div class="line">    (uint8_t)(0x0002),</div><div class="line"></div><div class="line">    <span class="comment">//Attribute SDP_ATTR_BROWSE_GROUP_LIST</span></div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga942a94138894beb2b2bc75daebc6e2d0">SDP_UNSIGNED_TWO_BYTE</a>,</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___s_d_p___a_t_t_r_i_b_u_t_e_s.html#ga4b6cf5cf717a8c0f70bfe4df57f0fbfa">SDP_ATTR_BROWSE_GROUP_LIST</a> &gt;&gt; 8),</div><div class="line">    (uint8_t)<a class="code" href="group___b_t___s_d_p___a_t_t_r_i_b_u_t_e_s.html#ga4b6cf5cf717a8c0f70bfe4df57f0fbfa">SDP_ATTR_BROWSE_GROUP_LIST</a>,</div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga3162e2d0cb09ada26915070f4082f82a">SDP_DATA_ELEM_SEQ_HDR</a>,</div><div class="line">    0x03,</div><div class="line">    <a class="code" href="group___b_t___s_d_p___h_e_a_d_e_r.html#ga9d465beea934f5f89796f9c6901da35c">SDP_UUID16_HDR</a>,</div><div class="line">    (uint8_t)(<a class="code" href="group___b_t___u_u_i_d.html#ga089c7a7d51a97c5a4e47136ba1dcbadf">UUID_PUBLIC_BROWSE_GROUP</a> &gt;&gt; 8),</div><div class="line">    (uint8_t)<a class="code" href="group___b_t___u_u_i_d.html#ga089c7a7d51a97c5a4e47136ba1dcbadf">UUID_PUBLIC_BROWSE_GROUP</a></div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">        //Attribute SDP_ATTR_LANG_BASE_ATTR_ID_LIST...it is used for SDP_ATTR_SRV_NAME</span></div><div class="line"><span class="comment">        SDP_UNSIGNED_TWO_BYTE,</span></div><div class="line"><span class="comment">        (uint8_t)(SDP_ATTR_LANG_BASE_ATTR_ID_LIST &gt;&gt; 8),</span></div><div class="line"><span class="comment">        (uint8_t)SDP_ATTR_LANG_BASE_ATTR_ID_LIST,</span></div><div class="line"><span class="comment">        SDP_DATA_ELEM_SEQ_HDR,</span></div><div class="line"><span class="comment">        0x09,</span></div><div class="line"><span class="comment">        SDP_UNSIGNED_TWO_BYTE,</span></div><div class="line"><span class="comment">        (uint8_t)(SDP_LANG_ENGLISH &gt;&gt; 8),</span></div><div class="line"><span class="comment">        (uint8_t)SDP_LANG_ENGLISH,</span></div><div class="line"><span class="comment">        SDP_UNSIGNED_TWO_BYTE,</span></div><div class="line"><span class="comment">        (uint8_t)(SDP_CHARACTER_UTF8 &gt;&gt; 8),</span></div><div class="line"><span class="comment">        (uint8_t)SDP_CHARACTER_UTF8,</span></div><div class="line"><span class="comment">        SDP_UNSIGNED_TWO_BYTE,</span></div><div class="line"><span class="comment">        (uint8_t)(SDP_BASE_LANG_OFFSET &gt;&gt; 8),</span></div><div class="line"><span class="comment">        (uint8_t)SDP_BASE_LANG_OFFSET,</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">        //Attribute SDP_ATTR_PROVIDER_NAME</span></div><div class="line"><span class="comment">        SDP_UNSIGNED_TWO_BYTE,</span></div><div class="line"><span class="comment">        (uint8_t)((SDP_ATTR_PROVIDER_NAME + SDP_BASE_LANG_OFFSET) &gt;&gt; 8),</span></div><div class="line"><span class="comment">        (uint8_t)(SDP_ATTR_PROVIDER_NAME + SDP_BASE_LANG_OFFSET),</span></div><div class="line"><span class="comment">        SDP_STRING_HDR,</span></div><div class="line"><span class="comment">        0x07, //Attribute length: 7 bytes</span></div><div class="line"><span class="comment">        0x52, 0x65, 0x61, 0x6C, 0x54, 0x65, 0x6B, //RealTek</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">        //Attribute SDP_ATTR_SRV_NAME</span></div><div class="line"><span class="comment">        SDP_UNSIGNED_TWO_BYTE,</span></div><div class="line"><span class="comment">        (uint8_t)((SDP_ATTR_SRV_NAME + SDP_BASE_LANG_OFFSET) &gt;&gt; 8),</span></div><div class="line"><span class="comment">        (uint8_t)(SDP_ATTR_SRV_NAME + SDP_BASE_LANG_OFFSET),</span></div><div class="line"><span class="comment">        SDP_STRING_HDR,</span></div><div class="line"><span class="comment">        0x08, //Attribute length: 8 bytes</span></div><div class="line"><span class="comment">        0x41, 0x56, 0x52, 0x43, 0x50, 0x20, 0x54, 0x47, //AVRCP TG</span></div><div class="line"><span class="comment">    */</span></div><div class="line">};</div></div><!-- fragment --><center><div id="table_1_1"><b>Table 1-1 Bits for Supported Features </b></div></center> <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Bit  </th><th class="markdownTableHeadLeft">Description   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">0  </td><td class="markdownTableBodyLeft">Category 1 Player / Recorder   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">1  </td><td class="markdownTableBodyLeft">Category 2 Monitor/Amplifier   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">2  </td><td class="markdownTableBodyLeft">Category 3 Tuner   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">3  </td><td class="markdownTableBodyLeft">Category 4 Menu   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">4-5  </td><td class="markdownTableBodyLeft">RFA   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">6  </td><td class="markdownTableBodyLeft">Supports browsing   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">7  </td><td class="markdownTableBodyLeft">Supports Cover Art GetImageProperties feature   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">8  </td><td class="markdownTableBodyLeft">Supports Cover Art GetImage feature   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">9  </td><td class="markdownTableBodyLeft">Supports Cover Art GetLinkedThumbnail feature   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">10-15  </td><td class="markdownTableBodyLeft">RFA   </td></tr>
</table>
<p>The bits for supported features are set to 1. Others are set to 0. <br />
</p>
<div style="page-break-after: always;"></div> <h2><a class="anchor" id="AVRCP_Control"></a>
2 AVRCP Control</h2>
<h3><a class="anchor" id="AVRCP_Control_Init"></a>
2.1 AVRCP Init</h3>
<p>AVRCP initialization procedure involves profile initialization and supported features setting.</p>
<p>bool <a class="el" href="group___b_t___a_v_r_c_p.html#gafbc638048e749a72e0ffd9f06ba204f8" title="Initialize AVRCP profile. ">bt_avrcp_init()</a> <br />
 Initialize AVRCP profile.</p>
<p>bool bt_avrcp_supported_features_set() <br />
 Set AVRCP supported features for both CT and TG. The features set by this API shall be in accordance with these in AVRCP SDP record. </p><div class="image">
<img src="avrcp_feature.png" alt="avrcp_feature.png"/>
</div>
 <center><div id="figure_2_1"><b>Figure 2-1 AVRCP Features Set </b></div></center><p> <b>Note:</b> If <b>Absolute Volume</b> is supported, Category 2 in Controller shall be checked for A2DP source device. And for A2DP sink device, Category 2 in Target shall be checked.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="group___a_p_p___a_v_r_c_p___exported___functions.html#gafde48bcbe23696c5dadd7740477f6301">app_avrcp_init</a>(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="group___a_p_p___c_f_g.html#ga22ec8032c8e4b8b7843c186572dbc1c6">supported_profile_mask</a> &amp; <a class="code" href="group___a_p_p___l_i_n_k.html#ga1216017b50a3d0ab20cfe5b97a808c13">AVRCP_PROFILE_MASK</a>)</div><div class="line">    {</div><div class="line">        uint8_t ct_features;</div><div class="line">        uint8_t tg_features;</div><div class="line"></div><div class="line">        ct_features = (<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#a176774ea37894036b48702b408329148">avrcp_features_ct</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#ad3e88e47f064b1d99260cab82227ea52">features_value</a> &amp; 0x0F);</div><div class="line">        tg_features = (<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#adcfd971999c8cebf48064fdb9f2521c8">avrcp_features_tg</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#ad3e88e47f064b1d99260cab82227ea52">features_value</a> &amp; 0x0F);</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (ct_features != 0)</div><div class="line">        {</div><div class="line">            <a class="code" href="group___b_t___s_d_p.html#ga929bad3b33b7416db99e39e776641fef">bt_sdp_record_add</a>((<span class="keywordtype">void</span> *)avrcp_ct_sdp_record);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (tg_features != 0)</div><div class="line">        {</div><div class="line">            <a class="code" href="group___b_t___s_d_p.html#ga929bad3b33b7416db99e39e776641fef">bt_sdp_record_add</a>((<span class="keywordtype">void</span> *)avrcp_tg_sdp_record);</div><div class="line">        }</div><div class="line"></div><div class="line">        <a class="code" href="group___b_t___a_v_r_c_p.html#gafbc638048e749a72e0ffd9f06ba204f8">bt_avrcp_init</a>(<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="group___a_p_p___c_f_g.html#ga1ae3de59ff861fb6ded9677b13e40e90">avrcp_link_number</a>);</div><div class="line">        bt_avrcp_supported_features_set(ct_features, tg_features);</div><div class="line">        <a class="code" href="group___b_t___b_t_m.html#gad5518472fde08b8e93d5fc9c40d72f85">bt_mgr_cback_register</a>(app_avrcp_bt_cback);</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h3><a class="anchor" id="AVRCP_Control_Connect"></a>
2.2 AVRCP Control Connect</h3>
<p>bool <a class="el" href="group___b_t___a_v_r_c_p.html#ga5a3a72e1392de74756c4616ef4955a6d" title="Send an AVRCP connection request. ">bt_avrcp_connect_req()</a> <br />
 Initiate an AVRCP connection to a remote device. <br />
 <b>Note:</b>If both devices initiate a connection at the same time, both channels shall be closed and each device shall wait a random time (not more than 1s and not less than 100ms) and then try to initiate the connection again.</p>
<p>bool <a class="el" href="group___b_t___a_v_r_c_p.html#gad4771b275fbba607b22627e7daa8e833" title="Send an AVRCP disconnection request. ">bt_avrcp_disconnect_req()</a> <br />
 Request an AVRCP disconnection.</p>
<p>bool <a class="el" href="group___b_t___a_v_r_c_p.html#ga85bf098a0832ebc563c49b686706092b" title="Send an AVRCP connection confirmation. ">bt_avrcp_connect_cfm()</a> <br />
 Accept or reject the incoming connection from the remote device. </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> app_avrcp_bt_cback(<a class="code" href="group___b_t___b_t_m.html#ga60f938d2fe9ea1ac81e1bf400fbb5b03">T_BT_EVENT</a> event_type, <span class="keywordtype">void</span> *event_buf, uint16_t buf_len)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (event_type)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83a6125574e71d7ef92f864f7c080718d6e">BT_EVENT_AVRCP_CONN_IND</a>:</div><div class="line">        {</div><div class="line">            p_link = <a class="code" href="group___a_p_p___l_i_n_k.html#ga02c6038934a5cd3f4a0cf6ddabc090a0">app_find_br_link</a>(param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#aaef572a6a9232763f9a5bd4178a0ecc2">avrcp_conn_ind</a>.<a class="code" href="structt__bt__event__param__avrcp__conn__ind.html#a624fd24b46be2b40c8731334c9de5d06">bd_addr</a>);</div><div class="line">            <span class="keywordflow">if</span> (p_link != <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line">            {</div><div class="line">                <a class="code" href="group___b_t___a_v_r_c_p.html#ga85bf098a0832ebc563c49b686706092b">bt_avrcp_connect_cfm</a>(p_link-&gt;<a class="code" href="struct_t___a_p_p___b_r___l_i_n_k.html#a624fd24b46be2b40c8731334c9de5d06">bd_addr</a>, <span class="keyword">true</span>);</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83aea5b1862ee7a4337c80643298856c223">BT_EVENT_AVRCP_CONN_CMPL</a>:</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83a5e62bf7aff7ce02e61702c9cd6db3774">BT_EVENT_AVRCP_CONN_FAIL</a>:</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h3><a class="anchor" id="AVRCP_Control_Key"></a>
2.3 AVRCP Control Key</h3>
<p>bool <a class="el" href="group___b_t___a_v_r_c_p.html#gaec1cd5aedeea03a16f6bd9dc8be3174d" title="Send a command that simulates keystrokes to start playing an item on remote device. ">bt_avrcp_play()</a> <br />
 Start playing an item on remote device.</p>
<p>bool <a class="el" href="group___b_t___a_v_r_c_p.html#ga4d945994677031f70199fc6f5fd9b50a" title="Send a command that simulates keystrokes to pause an item on remote device. ">bt_avrcp_pause()</a> <br />
 Pause an item on remote device. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> app_avrcp_bt_cback(<a class="code" href="group___b_t___b_t_m.html#ga60f938d2fe9ea1ac81e1bf400fbb5b03">T_BT_EVENT</a> event_type, <span class="keywordtype">void</span> *event_buf, uint16_t buf_len)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (event_type)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83a3577705671541d2d68fec345cbe7b796">BT_EVENT_AVRCP_PLAY_STATUS_RSP</a>:</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83a91d262d864fbd5a43d69b7cba61b0797">BT_EVENT_AVRCP_PLAY_STATUS_CHANGED</a>:</div><div class="line">            {</div><div class="line">                <span class="keywordflow">if</span> (<a class="code" href="group___a_p_p___b_t___p_a_n___d_e_m_o___l_i_n_k.html#gac563cf0f8ddf7768f3da4ab95cdd884e">app_db</a>.avrcp_play_status == param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a84e9ca4344bbeef4947e0b507bc6ba03">avrcp_play_status_changed</a>.<a class="code" href="structt__bt__event__param__avrcp__play__status__changed.html#a180287f5752c4687ef249dbe95e3f373">play_status</a>)</div><div class="line">                {</div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line">                }</div><div class="line"></div><div class="line">                <a class="code" href="group___a_p_p___b_t___p_a_n___d_e_m_o___l_i_n_k.html#gac563cf0f8ddf7768f3da4ab95cdd884e">app_db</a>.avrcp_play_status = param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a84e9ca4344bbeef4947e0b507bc6ba03">avrcp_play_status_changed</a>.<a class="code" href="structt__bt__event__param__avrcp__play__status__changed.html#a180287f5752c4687ef249dbe95e3f373">play_status</a>;</div><div class="line"></div><div class="line">                <span class="comment">//job to do</span></div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p><b>Note:</b> <br />
</p><ul>
<li><a class="el" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83a3577705671541d2d68fec345cbe7b796">BT_EVENT_AVRCP_PLAY_STATUS_RSP</a> is reported <b>after avrcp play/pause cmd</b> is accepted by phone. <br />
</li>
<li><a class="el" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83a91d262d864fbd5a43d69b7cba61b0797">BT_EVENT_AVRCP_PLAY_STATUS_CHANGED</a> is reported only when receiving status changed event from phone. <br />
</li>
<li>The play_status in <a class="el" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83a91d262d864fbd5a43d69b7cba61b0797">BT_EVENT_AVRCP_PLAY_STATUS_CHANGED</a> is the real play status of phone, but play_status in <a class="el" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83a3577705671541d2d68fec345cbe7b796">BT_EVENT_AVRCP_PLAY_STATUS_RSP</a> is related to the cmd sent to phone. For example, if avrcp pause is sent, the play_status in <a class="el" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83a3577705671541d2d68fec345cbe7b796">BT_EVENT_AVRCP_PLAY_STATUS_RSP</a> is paused. <div class="image">
<img src="avrcp_play_status.png" alt="avrcp_play_status.png"/>
</div>
 <center><div id="figure_2_2"><b>Figure 2-2 AVRCP Play Status Changed </b></div></center></li>
</ul>
<p>bool <a class="el" href="group___b_t___a_v_r_c_p.html#ga6c553138b6684d09253bd661b136d54a" title="Send a command that simulates keystrokes to stop an item on remote device. ">bt_avrcp_stop()</a> <br />
 Stop playing an item on remote device.</p>
<p>bool <a class="el" href="group___b_t___a_v_r_c_p.html#ga2592c507e79f39c8f8843d20ac6441e2" title="Send a command that simulates keystrokes to change the media which is playing to next one on remote d...">bt_avrcp_forward()</a> <br />
 Change the media which is playing to next one on remote device.</p>
<p>bool <a class="el" href="group___b_t___a_v_r_c_p.html#ga76df10bd7a669ccd5d095f5b5a8a6dc6" title="Send a command that simulates keystrokes to change the media which is playing to last one on remote d...">bt_avrcp_backward()</a> <br />
 Change the media which is playing to last one on remote device.</p>
<p>bool <a class="el" href="group___b_t___a_v_r_c_p.html#ga225120fed85126711a53c3a3358c8f72" title="Send a command that simulates keystrokes to start rewind the media which is playing on remote device...">bt_avrcp_rewind_start()</a> <br />
 Start rewind the media which is playing on remote device.</p>
<p>bool <a class="el" href="group___b_t___a_v_r_c_p.html#gae18c991439169cdeb3f234b92edfdd42" title="Send a command that simulates keystrokes to stop rewind the media which is playing on remote device...">bt_avrcp_rewind_stop()</a> <br />
 Stop rewind the media which is playing on remote device.</p>
<p>bool <a class="el" href="group___b_t___a_v_r_c_p.html#gae4cda32c7d3113ee4fb874462167874e" title="Send a command that simulates keystrokes to start fast forward the media which is playing on remote d...">bt_avrcp_fast_forward_start()</a> <br />
 Start fast forward the media which is playing on remote device.</p>
<p>bool <a class="el" href="group___b_t___a_v_r_c_p.html#ga070260f81d50d2f8ac997008e032d4f8" title="Send a command that simulates keystrokes to stop fast forward the media which is playing on remote de...">bt_avrcp_fast_forward_stop()</a> <br />
 Start fast forward the media which is playing on remote device.</p>
<h3><a class="anchor" id="AVRCP_Control_Volume"></a>
2.4 AVRCP Control Volume</h3>
<p>bool <a class="el" href="group___b_t___a_v_r_c_p.html#ga270bb6168adb845134c15043441688b6" title="Send an AVRCP volume change response after received register notification volume change command...">bt_avrcp_volume_change_register_rsp()</a> <br />
 Send an AVRCP volume change response after received register notification volume change command.</p>
<p>bool <a class="el" href="group___b_t___a_v_r_c_p.html#ga4819f0e7f8e232914da0f1368a4c177b" title="Send an AVRCP volume change request to remote TG device. ">bt_avrcp_volume_change_req()</a> <br />
 Notify remote device that the volume has been changed locally.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> app_avrcp_bt_cback(<a class="code" href="group___b_t___b_t_m.html#ga60f938d2fe9ea1ac81e1bf400fbb5b03">T_BT_EVENT</a> event_type, <span class="keywordtype">void</span> *event_buf, uint16_t buf_len)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (event_type)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83a448bcdd5b7a18bd07132fbd08ad7d336">BT_EVENT_AVRCP_REG_VOLUME_CHANGED</a>:</div><div class="line">            {</div><div class="line">                p_link = <a class="code" href="group___a_p_p___l_i_n_k.html#ga02c6038934a5cd3f4a0cf6ddabc090a0">app_find_br_link</a>(param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#af424b030dc2328167f34094965044e39">avrcp_reg_volume_changed</a>.<a class="code" href="structt__bt__event__param__avrcp__reg__volume__changed.html#a624fd24b46be2b40c8731334c9de5d06">bd_addr</a>);</div><div class="line">                <span class="keywordflow">if</span> (p_link != <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line">                {</div><div class="line">                    <a class="code" href="group___b_t___a_v_r_c_p.html#ga270bb6168adb845134c15043441688b6">bt_avrcp_volume_change_register_rsp</a>(p_link-&gt;<a class="code" href="struct_t___a_p_p___b_r___l_i_n_k.html#a624fd24b46be2b40c8731334c9de5d06">bd_addr</a>, vol);</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="group___a_p_p___m_m_i.html#ga052f779c9e19fc32946d63b132fcae09">app_mmi_handle_action</a>(uint8_t action)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (action)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___a_p_p___m_m_i.html#gga9d149ac6a749587538729a0111e48e1bae56062b30503adb2295ae991da5521a3">MMI_DEV_SPK_VOL_UP</a>:</div><div class="line">            {</div><div class="line">                ...</div><div class="line">                <a class="code" href="group___b_t___a_v_r_c_p.html#ga4819f0e7f8e232914da0f1368a4c177b">bt_avrcp_volume_change_req</a>(<a class="code" href="group___a_p_p___b_t___p_a_n___d_e_m_o___l_i_n_k.html#gac563cf0f8ddf7768f3da4ab95cdd884e">app_db</a>.<a class="code" href="struct_t___a_p_p___b_t___p_a_n___d_e_m_o___a_p_p___d_b.html#a626d0674adf98cdfd57ee45c011c1971">br_link</a>[active_idx].<a class="code" href="struct_t___a_p_p___b_t___p_a_n___d_e_m_o___l_i_n_k.html#a624fd24b46be2b40c8731334c9de5d06">bd_addr</a>, level);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>Volume adjustment flow is introduced below when absolute volume is supported by both sides. </p><div class="image">
<img src="avrcp_volume_adjust_src.png" alt="avrcp_volume_adjust_src.png"/>
</div>
 <center><div id="figure_2_3"><b>Figure 2-3 AVRCP Volume Adjustment from SRC </b></div></center> <div class="image">
<img src="avrcp_volume_adjust_snk.png" alt="avrcp_volume_adjust_snk.png"/>
</div>
 <center><div id="figure_2_4"><b>Figure 2-4 AVRCP Volume Adjustment from SNK </b></div></center><h3><a class="anchor" id="AVRCP_Control_Miscellaneous"></a>
2.5 AVRCP Control Miscellaneous</h3>
<p>bool <a class="el" href="group___b_t___a_v_r_c_p.html#ga570c2bf7e8a4af001f7d181ace8b1d33" title="Send an AVRCP get element attribute request. ">bt_avrcp_get_element_attr_req()</a> <br />
 Get the attributes of the element of the currently playing track from the Addressed Player, if <a class="el" href="group___b_t___a_v_r_c_p.html#ga3bc90959ed828265ce34281678c5581a" title="Retrieve the metadata attributes for a particular media element item or folder item. ">bt_avrcp_browsing_item_attrs_get()</a> is not supported. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> app_avrcp_bt_cback(<a class="code" href="group___b_t___b_t_m.html#ga60f938d2fe9ea1ac81e1bf400fbb5b03">T_BT_EVENT</a> event_type, <span class="keywordtype">void</span> *event_buf, uint16_t buf_len)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (event_type)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83aed0318282da9c226d11d9081e0b1ca11">BT_EVENT_AVRCP_TRACK_CHANGED</a>:</div><div class="line">            {</div><div class="line">                uint8_t attr_list[7] = {1, 2, 3, 4, 5, 6, 7};</div><div class="line">                uint8_t num_of_attr = 7;</div><div class="line"></div><div class="line">                p_link = <a class="code" href="group___a_p_p___l_i_n_k.html#ga02c6038934a5cd3f4a0cf6ddabc090a0">app_find_br_link</a>(param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a02a5bf3d675aac8c962fa748241cc4d1">avrcp_track_changed</a>.<a class="code" href="structt__bt__event__param__avrcp__track__changed.html#a624fd24b46be2b40c8731334c9de5d06">bd_addr</a>);</div><div class="line">                <span class="keywordflow">if</span> (p_link != <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line">                {</div><div class="line">                    <a class="code" href="group___b_t___a_v_r_c_p.html#ga570c2bf7e8a4af001f7d181ace8b1d33">bt_avrcp_get_element_attr_req</a>(p_link-&gt;<a class="code" href="struct_t___a_p_p___b_r___l_i_n_k.html#a624fd24b46be2b40c8731334c9de5d06">bd_addr</a>, num_of_attr, attr_list);</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83aed14b23f93d9d200ad5ce0414dba3e17">BT_EVENT_AVRCP_ELEM_ATTR</a>:</div><div class="line">            {</div><div class="line">                <span class="keywordtype">int</span> i = 0;</div><div class="line"></div><div class="line">                <span class="keywordflow">for</span>(i = 0; i &lt; param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a0f483bd672957f3944b215854334911c">avrcp_elem_attr</a>.<a class="code" href="structt__bt__event__param__avrcp__elem__attr.html#ad4ff39f0e899a1c9f05a3395f8a9fa44">num_of_attr</a>; i++)</div><div class="line">                {</div><div class="line">                    <span class="comment">//deal with param-&gt;avrcp_elem_attr.attr[i]</span></div><div class="line">                    <span class="keywordflow">switch</span>(param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a0f483bd672957f3944b215854334911c">avrcp_elem_attr</a>.<a class="code" href="structt__bt__event__param__avrcp__elem__attr.html#aec010fe8a329e2997955af1a3c5f70f6">attr</a>[i].<a class="code" href="structt__bt__avrcp__element__attr.html#a4298d407bfdbaf8fd6bf486fc7652e20">attribute_id</a>)</div><div class="line">                    {</div><div class="line">                        <span class="keywordflow">case</span> <a class="code" href="group___b_t___a_v_r_c_p.html#gga343ddedf1e88cb2a8d1f33efe6962f93a35277217966d63026698f794ebecbc39">BT_AVRCP_ELEM_ATTR_TITLE</a>:</div><div class="line">                            {</div><div class="line">                                ...</div><div class="line">                            }</div><div class="line">                            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                        <span class="keywordflow">case</span> <a class="code" href="group___b_t___a_v_r_c_p.html#gga343ddedf1e88cb2a8d1f33efe6962f93a21fa1c1f66a5dd932e2d6d692aad16fd">BT_AVRCP_ELEM_ATTR_ARTIST</a>:</div><div class="line">                            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                        ...</div><div class="line">                    }</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>bool <a class="el" href="group___b_t___a_v_r_c_p.html#gabf7ecce3abe8efa3198992395146753f" title="Send an AVRCP get play status request. ">bt_avrcp_get_play_status_req()</a> <br />
 Get the status of the currently playing media, including song length and current position. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> app_avrcp_bt_cback(<a class="code" href="group___b_t___b_t_m.html#ga60f938d2fe9ea1ac81e1bf400fbb5b03">T_BT_EVENT</a> event_type, <span class="keywordtype">void</span> *event_buf, uint16_t buf_len)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (event_type)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83a79f900c4fb67ec1f45ba30ec10018833">BT_EVENT_AVRCP_GET_PLAY_STATUS_RSP</a>:</div><div class="line">            {</div><div class="line">                uint8_t play_status = param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#ab1457f1f8a2d53cd115f3aac8b8b6034">avrcp_get_play_status_rsp</a>.<a class="code" href="structt__bt__event__param__avrcp__get__play__status__rsp.html#a180287f5752c4687ef249dbe95e3f373">play_status</a>;</div><div class="line">                uint32_t song_length = param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#ab1457f1f8a2d53cd115f3aac8b8b6034">avrcp_get_play_status_rsp</a>.<a class="code" href="structt__bt__event__param__avrcp__get__play__status__rsp.html#a29764e964d0c03f831f5a3096526656c">length_ms</a>;</div><div class="line">                uint32_t song_pos = param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#ab1457f1f8a2d53cd115f3aac8b8b6034">avrcp_get_play_status_rsp</a>.<a class="code" href="structt__bt__event__param__avrcp__get__play__status__rsp.html#ac3077cd1c54e4d2dbe85faeb1e5c8eac">position_ms</a>;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><div style="page-break-after: always;"></div> <h2><a class="anchor" id="AVRCP_Browsing"></a>
3 AVRCP Browsing</h2>
<p>This section describes the <b>AVRCP browsing API definition</b>. These APIs enable the CT to navigate the media on the target device, and perform operations on a specific media item. Browsing commands are used to retrieve information about the available browsable items.</p>
<h3><a class="anchor" id="AVRCP_Browsing_Connect"></a>
3.1 AVRCP Browsing Connect</h3>
<p><a class="el" href="group___b_t___a_v_r_c_p.html#gad581826fff646f9f753509107e8184b5" title="Send an AVRCP browsing connection request. ">bt_avrcp_browsing_connect_req()</a> <br />
 Create an AVRCP browsing connection.</p>
<p><a class="el" href="group___b_t___a_v_r_c_p.html#ga2cc483b61b4a4fc6cb99735873b01996" title="Send an AVRCP browsing disconnection request. ">bt_avrcp_browsing_disconnect_req()</a> <br />
 Disconnect an AVRCP browsing connection.</p>
<p><a class="el" href="group___b_t___a_v_r_c_p.html#gaa8134e7aaa9a452bc5907c60aeeb735c" title="Send an AVRCP browsing connection confirmation. ">bt_avrcp_browsing_connect_cfm()</a> <br />
 Respond to the AVRCP connection request from remote device. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> app_test_bt_cback(<a class="code" href="group___b_t___b_t_m.html#ga60f938d2fe9ea1ac81e1bf400fbb5b03">T_BT_EVENT</a> event_type, <span class="keywordtype">void</span> *event_buf, uint16_t buf_len)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (event_type)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83abf94faf1ebf8d97132efd474c84ec4a5">BT_EVENT_AVRCP_BROWSING_CONN_IND</a>:</div><div class="line">            {</div><div class="line">                p_link = <a class="code" href="group___a_p_p___l_i_n_k.html#ga02c6038934a5cd3f4a0cf6ddabc090a0">app_find_br_link</a>(param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a6cf61af35296397b16ffa21c9f35364f">avrcp_browsing_conn_ind</a>.<a class="code" href="structt__bt__event__param__avrcp__browsing__conn__ind.html#a624fd24b46be2b40c8731334c9de5d06">bd_addr</a>);</div><div class="line">                <span class="keywordflow">if</span> (p_link != <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line">                {</div><div class="line">                    <a class="code" href="group___b_t___a_v_r_c_p.html#gaa8134e7aaa9a452bc5907c60aeeb735c">bt_avrcp_browsing_connect_cfm</a>(p_link-&gt;<a class="code" href="struct_t___a_p_p___b_r___l_i_n_k.html#a624fd24b46be2b40c8731334c9de5d06">bd_addr</a>, <span class="keyword">true</span>);</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83aa5a505850a4307ebb2f1321d8c7aa6ef">BT_EVENT_AVRCP_BROWSING_CONN_CMPL</a>:</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h3><a class="anchor" id="AVRCP_Browsing_App_Setting"></a>
3.2 AVRCP Browsing Application Setting</h3>
<p><a class="el" href="group___b_t___a_v_r_c_p.html#ga9541c16a9d1f10db16593279f3eead92" title="Request TG to provide target supported player application setting attributes. ">bt_avrcp_app_setting_attrs_list()</a> <br />
 Request the target device to provide target supported player application setting attributes. The player application setting attributes are defined in avrcp.h.</p>
<p><a class="el" href="group___b_t___a_v_r_c_p.html#gad56667ae1c69fb610f40464dacde5256" title="Request TG to list the set of possible values for the requested player application setting attribute...">bt_avrcp_app_setting_values_list()</a> <br />
 Request the target device to list the set of possible values for the requested player application setting attribute. The list of reserved player application setting attributes and their values are defined in avrcp.h.</p>
<p><a class="el" href="group___b_t___a_v_r_c_p.html#ga24fa8da02f6b9044e9d57aff0675c59e" title="Request TG to provide the current set values for the provided player application setting attributes l...">bt_avrcp_app_setting_value_get()</a> <br />
 Request the target device to provide the current set values on the target for the provided player application setting attributes list. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> app_test_bt_cback(<a class="code" href="group___b_t___b_t_m.html#ga60f938d2fe9ea1ac81e1bf400fbb5b03">T_BT_EVENT</a> event_type, <span class="keywordtype">void</span> *event_buf, uint16_t buf_len)</div><div class="line">{</div><div class="line">    uint8_t i = 0;</div><div class="line"></div><div class="line">    <span class="keywordflow">switch</span> (event_type)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83a41436ec0701fb6d82ad3c53e1945a56f">BT_EVENT_AVRCP_APP_SETTING_ATTRS_LIST_RSP</a>:</div><div class="line">            {</div><div class="line">                <span class="keywordflow">if</span> (param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#ad53545726a97761fe1377aacc80af97f">avrcp_app_setting_attrs_list_rsp</a>.<a class="code" href="structt__bt__event__param__avrcp__app__setting__attrs__list__rsp.html#a0b57aa10271a66f3dc936bba1d2f3830">state</a> == 0)</div><div class="line">                {</div><div class="line">                    <span class="keywordflow">for</span>(i = 0; i &lt; param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#ad53545726a97761fe1377aacc80af97f">avrcp_app_setting_attrs_list_rsp</a>.<a class="code" href="structt__bt__event__param__avrcp__app__setting__attrs__list__rsp.html#ad4ff39f0e899a1c9f05a3395f8a9fa44">num_of_attr</a>; i++)</div><div class="line">                    {</div><div class="line">                        <a class="code" href="group__x3d___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;BT_EVENT_AVRCP_APP_SETTING_ATTRS_LIST_RSP: index %d, id %d&quot;</span>,</div><div class="line">                                        i, param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#ad53545726a97761fe1377aacc80af97f">avrcp_app_setting_attrs_list_rsp</a>.<a class="code" href="structt__bt__event__param__avrcp__app__setting__attrs__list__rsp.html#a93779808c5973aa146ae6a9226b3e1ca">p_attr_id</a>[i]);</div><div class="line">                    }</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83ac113d6489c562db9d897f1186ebc7a79">BT_EVENT_AVRCP_APP_SETTING_VALUES_LIST_RSP</a>:</div><div class="line">            {</div><div class="line">                <span class="keywordflow">if</span> (param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#ac5306bcfd3f3f13d012e8bcd74746afd">avrcp_app_setting_values_list_rsp</a>.<a class="code" href="structt__bt__event__param__avrcp__app__setting__values__list__rsp.html#a0b57aa10271a66f3dc936bba1d2f3830">state</a> == 0)</div><div class="line">                {</div><div class="line">                    <span class="keywordflow">for</span>(i = 0; i &lt; param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#ac5306bcfd3f3f13d012e8bcd74746afd">avrcp_app_setting_values_list_rsp</a>.<a class="code" href="structt__bt__event__param__avrcp__app__setting__values__list__rsp.html#affb32e9dbb0d81be59c9e0687a23886a">num_of_value</a>; i++)</div><div class="line">                    {</div><div class="line">                        <a class="code" href="group__x3d___t_r_a_c_e.html#ga98e2dee240d2fde3119d3380b4d98762">APP_PRINT_INFO3</a>(<span class="stringliteral">&quot;BT_EVENT_AVRCP_APP_SETTING_VALUES_LIST_RSP: index %d, value %d&quot;</span>,</div><div class="line">                                        i, param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#ac5306bcfd3f3f13d012e8bcd74746afd">avrcp_app_setting_values_list_rsp</a>.<a class="code" href="structt__bt__event__param__avrcp__app__setting__values__list__rsp.html#a7e38674b09ada3bb654e2c2146044d30">p_value</a>[i]);</div><div class="line">                    }</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83aa8d5caf1fc97e1380f66100f0a355665">BT_EVENT_AVRCP_APP_SETTING_GET_RSP</a>:</div><div class="line">            {</div><div class="line">                <span class="keywordflow">if</span> (param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a394e654b2d633b2dfd09044269fd7665">avrcp_app_setting_get_rsp</a>.<a class="code" href="structt__bt__event__param__avrcp__app__setting__get__rsp.html#a0b57aa10271a66f3dc936bba1d2f3830">state</a> == 0)</div><div class="line">                {</div><div class="line">                    <span class="keywordflow">for</span>(i = 0; i &lt; param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a394e654b2d633b2dfd09044269fd7665">avrcp_app_setting_get_rsp</a>.<a class="code" href="structt__bt__event__param__avrcp__app__setting__get__rsp.html#ad4ff39f0e899a1c9f05a3395f8a9fa44">num_of_attr</a>; i++)</div><div class="line">                    {</div><div class="line">                        <a class="code" href="group__x3d___t_r_a_c_e.html#ga98e2dee240d2fde3119d3380b4d98762">APP_PRINT_INFO3</a>(<span class="stringliteral">&quot;BT_EVENT_AVRCP_APP_SETTING_GET_RSP: index %d, attr %d, value %d&quot;</span>,</div><div class="line">                                        i, param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a394e654b2d633b2dfd09044269fd7665">avrcp_app_setting_get_rsp</a>.<a class="code" href="structt__bt__event__param__avrcp__app__setting__get__rsp.html#a68f24fef6025f198c631bb96e5307fe8">p_app_setting</a>[i].<a class="code" href="structt__bt__avrcp__app__setting.html#a28478ea2856f6286899bc90b2c6a1ec4">attr</a>, </div><div class="line">                                        param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a394e654b2d633b2dfd09044269fd7665">avrcp_app_setting_get_rsp</a>.<a class="code" href="structt__bt__event__param__avrcp__app__setting__get__rsp.html#a68f24fef6025f198c631bb96e5307fe8">p_app_setting</a>[i].<a class="code" href="structt__bt__avrcp__app__setting.html#a638e4503e0ae6ce655b7ad2e17e8f0ad">value</a>);</div><div class="line">                    }</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p><a class="el" href="group___b_t___a_v_r_c_p.html#ga09f8b520df9d43322c89e74989313213" title="Set the player application setting list of player application setting values on TG. ">bt_avrcp_app_setting_value_set()</a> <br />
 Request to set the player application setting list of player application setting values on the target device. </p><div class="fragment"><div class="line">{</div><div class="line">    uint8_t attr_list[4];</div><div class="line"></div><div class="line">    attr_list[0] = APP_SETTING_ATTR_EQUALIZER;</div><div class="line">    attr_list[1] = EQUALIZER_STATUS_OFF;</div><div class="line">    attr_list[2] = APP_SETTING_ATTR_REPEAT_MODE;</div><div class="line">    attr_list[3] = REPEAT_MODE_STATUS_SINGLE;</div><div class="line"></div><div class="line">    <a class="code" href="group___b_t___a_v_r_c_p.html#ga09f8b520df9d43322c89e74989313213">bt_avrcp_app_setting_value_set</a>(bd_addr, 2, attr_list);</div><div class="line">}</div></div><!-- fragment --><h3><a class="anchor" id="AVRCP_Browsing_Search"></a>
3.3 AVRCP Browsing Search</h3>
<p>The search procedure is shown in Figure 3-1. </p><div class="image">
<img src="search_flow.png" alt="search_flow.png"/>
</div>
 <center><div id="figure_3_1"><b>Figure 3-1 Search Procedure </b></div></center><p><a class="el" href="group___b_t___a_v_r_c_p.html#ga4ac72b34a770dce35987a251ce3cc78f" title="Send a command to retrieve a listing of the contents of a folder. ">bt_avrcp_browsing_folder_items_get()</a> <br />
 This command is used to retrieve a listing of the contents of a folder.</p>
<p><a class="el" href="group___b_t___a_v_r_c_p.html#ga3bc90959ed828265ce34281678c5581a" title="Retrieve the metadata attributes for a particular media element item or folder item. ">bt_avrcp_browsing_item_attrs_get()</a> <br />
 This command is used to retrieve the metadata attributes for a particular media element item or folder item.</p>
<p><a class="el" href="group___b_t___a_v_r_c_p.html#ga87cfbf8da4f75feeb7fbba60d1ec1836" title="Send an AVRCP search request. ">bt_avrcp_browsing_search()</a> <br />
 This provides basic search functionality. Regular expressions shall not be supported. Searches are performed from the current folder in the Browsed Players virtual filesystem. The search applies to the current folder and all folders below that. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> app_test_bt_cback(<a class="code" href="group___b_t___b_t_m.html#ga60f938d2fe9ea1ac81e1bf400fbb5b03">T_BT_EVENT</a> event_type, <span class="keywordtype">void</span> *event_buf, uint16_t buf_len)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (event_type)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83a143a3a74de7c03187b7538a386b56b4e">BT_EVENT_AVRCP_SEARCH_RSP</a>:</div><div class="line">            {</div><div class="line">                uint8_t num_of_items;</div><div class="line"></div><div class="line">                num_of_items = param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a7e39e7564bf23a28ae3213039f744d42">avrcp_search_rsp</a>.<a class="code" href="structt__bt__event__param__avrcp__search__rsp.html#ac37bde2f6b9c8bd5609712d3e64c2d3f">num_of_items</a>;</div><div class="line">                <a class="code" href="group___b_t___a_v_r_c_p.html#ga4ac72b34a770dce35987a251ce3cc78f">bt_avrcp_browsing_folder_items_get</a>(param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a7e39e7564bf23a28ae3213039f744d42">avrcp_search_rsp</a>.<a class="code" href="structt__bt__event__param__avrcp__search__rsp.html#a624fd24b46be2b40c8731334c9de5d06">bd_addr</a>, 2, 0, num_of_items-1, 0, <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83a98dbce48f2793b1e6038091b600b3541">BT_EVENT_AVRCP_FOLDER_ITEMS_GET_RSP</a>:</div><div class="line">            {</div><div class="line">                uint8_t item_type;</div><div class="line"></div><div class="line">                <span class="keywordflow">if</span> (param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a6b2ea741bc692e3c02939b7a39c5befc">avrcp_folder_items_get_rsp</a>.<a class="code" href="structt__bt__event__param__avrcp__folder__items__get__rsp.html#a60fd16956abaea0ff380b166e046604c">num_of_items</a> &gt; 0)</div><div class="line">                {</div><div class="line">                    item_type = param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a6b2ea741bc692e3c02939b7a39c5befc">avrcp_folder_items_get_rsp</a>.<a class="code" href="structt__bt__event__param__avrcp__folder__items__get__rsp.html#a74fd0f7ff30631c41fc03183aa50803d">item_type</a>;</div><div class="line">                    <span class="keywordflow">if</span> (item_type == 0x1)</div><div class="line">                    {</div><div class="line">                        <span class="comment">//media player item, refer to T_BT_AVRCP_MEDIA_PLAYER_ITEM</span></div><div class="line">                        <span class="comment">//param-&gt;avrcp_folder_items_get_rsp.u.p_media_player_items</span></div><div class="line">                    }</div><div class="line">                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (item_type == 0x2)</div><div class="line">                    {</div><div class="line">                        <span class="comment">//folder item, refer to T_BT_AVRCP_FOLDER_ITEM</span></div><div class="line">                        <span class="comment">//param-&gt;avrcp_folder_items_get_rsp.u.p_folder_items</span></div><div class="line">                    }</div><div class="line">                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (item_type == 0x3)</div><div class="line">                    {</div><div class="line">                        <span class="comment">//media element item, refer to T_BT_AVRCP_MEDIA_ELEMENT_ITEM</span></div><div class="line">                        <span class="comment">//param-&gt;avrcp_folder_items_get_rsp.u.p_media_element_items</span></div><div class="line">                    }</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83a9696d6f1c2aec618eec7972bdb95c2dd">BT_EVENT_AVRCP_ITEM_ATTR_GET_RSP</a>:</div><div class="line">            {</div><div class="line">                <a class="code" href="structt__bt__avrcp__item__attr.html">T_BT_AVRCP_ITEM_ATTR</a> *attr;</div><div class="line">                uint8_t i;</div><div class="line"></div><div class="line">                <span class="keywordflow">for</span> (i = 0; i &lt; param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a085b0bff0d596e9c176af708154146c9">avrcp_item_attr_get_rsp</a>.<a class="code" href="structt__bt__event__param__avrcp__item__attr__get__rsp.html#ad4ff39f0e899a1c9f05a3395f8a9fa44">num_of_attr</a>; i++)</div><div class="line">                {</div><div class="line">                    attr = <span class="keyword">event</span>-&gt;p_attr + i;</div><div class="line">                    <span class="keywordflow">switch</span>(attr-&gt;<a class="code" href="structt__bt__avrcp__item__attr.html#a4298d407bfdbaf8fd6bf486fc7652e20">attribute_id</a>)</div><div class="line">                    {</div><div class="line">                        <span class="keywordflow">case</span> <a class="code" href="group___b_t___a_v_r_c_p.html#gga343ddedf1e88cb2a8d1f33efe6962f93a35277217966d63026698f794ebecbc39">BT_AVRCP_ELEM_ATTR_TITLE</a>:</div><div class="line">                            {</div><div class="line">                                ...</div><div class="line">                            }</div><div class="line">                            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                        ...</div><div class="line">                    }</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h3><a class="anchor" id="AVRCP_Browsing_Miscellaneous"></a>
3.4 AVRCP Browsing Miscellaneous</h3>
<p><a class="el" href="group___b_t___a_v_r_c_p.html#gae70dcfd0e07fa37f8e72890210289bb1" title="Inform the TG of which media player the CT wishes to control. ">bt_avrcp_addressed_player_set()</a> <br />
 Inform the TG of which media player the CT wishes to control.</p>
<p><a class="el" href="group___b_t___a_v_r_c_p.html#gac21044d2596452c7f9bc79d6869aea1d" title="Send a command to control to which player browsing commands should be routed. ">bt_avrcp_browsing_browsed_player_set()</a> <br />
 This command is used to control to which player browsing commands should be routed. <br />
 <b>Note:</b>Some players may not support browsing of the media player tree or search results unless the Browsed Player is set to the Addressed Player. This is indicated in the player feature bitmask. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> app_avrcp_bt_cback(<a class="code" href="group___b_t___b_t_m.html#ga60f938d2fe9ea1ac81e1bf400fbb5b03">T_BT_EVENT</a> event_type, <span class="keywordtype">void</span> *event_buf, uint16_t buf_len)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (event_type)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#gae9ad99c0a2114da669d371b45c16b335">T_BT_EVENT_PARAM_AVRCP_ADDRESSED_PLAYER_SET_RSP</a>:</div><div class="line">            {</div><div class="line">                ...</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ga334544d5d28dc6d9523a1ca4c6a74cda">T_BT_EVENT_PARAM_AVRCP_BROWSED_PLAYER_SET_RSP</a>:</div><div class="line">            {</div><div class="line">                ...</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p><a class="el" href="group___b_t___a_v_r_c_p.html#ga4a32eb8d502d418649e925a894021522" title="Send a command to start playing an item indicated by the UID. ">bt_avrcp_item_play()</a> <br />
 Start playing an item indicated by the UID. It is routed to the Addressed Player.</p>
<p><a class="el" href="group___b_t___a_v_r_c_p.html#gade23a788817300f3080b734858d76adc" title="Move to next or previous groups on TG. ">bt_avrcp_group_navigate()</a> <br />
 Move to the first song in the next/previous group.</p>
<p><a class="el" href="group___b_t___a_v_r_c_p.html#ga3efb1e98f98499421e9e560f2d6a5f48" title="Send a command to navigate one level up or down in the virtual filesystem. ">bt_avrcp_browsing_path_change()</a> <br />
 This command is used to navigate the virtual filesystem, and allows the CT to navigate one level up or down in the virtual filesystem.</p>
<p><a class="el" href="group___b_t___a_v_r_c_p.html#gaad2e3d0d6ee6bef42c643e9ea468b23a" title="Request for continuing response packets for the sent PDU command that has not completed. ">bt_avrcp_continuing_rsp_req()</a> <br />
 Request for continuing response packets for the sent PDU command that has not completed.</p>
<p><a class="el" href="group___b_t___a_v_r_c_p.html#ga582f4d27d9e6547944b6882103cd4cd0" title="Send a command to abort continuing response. ">bt_avrcp_continuing_rsp_abort()</a> <br />
 Abort continuing response.</p>
<div style="page-break-after: always;"></div> <h2><a class="anchor" id="AVRCP_CoverArt"></a>
4 Cover Art</h2>
<p>The CT uses the Cover Art feature to retrieve the cover art associated with the browsed or played media items, as shown in Figure 4-1: </p><div class="image">
<img src="cover_art.png" alt="cover_art.png"/>
</div>
 <center><div id="figure_4_1"><b>Figure 4-1 Cover Art Usage </b></div></center><p>This section describes the <b>Cover Art API definition</b> and how to retrieve images associated with the media on the TG. These APIs are used over an OBEX connection, as shown in Figure 4-2: </p><div class="image">
<img src="profile_avrcp.png" alt="profile_avrcp.png"/>
</div>
 <center><div id="figure_4_2"><b>Figure 4-2 Profile Hierarchy </b></div></center><h3><a class="anchor" id="AVRCP_CoverArt_Flow"></a>
4.1 Cover Art Retrieve Procedure</h3>
<p>The procedure is shown in Figure 4-3. </p><div class="image">
<img src="cover_art_retrieve_flow.jpg" alt="cover_art_retrieve_flow.jpg"/>
</div>
 <center><div id="figure_4_3"><b>Figure 4-3 Cover Art Retrieve Procedure </b></div></center><h3><a class="anchor" id="AVRCP_CoverArt_Connect"></a>
4.2 AVRCP Cover Art Connect</h3>
<p><a class="el" href="group___b_t___a_v_r_c_p.html#gaf01727f593a0d7047b652f6687259e4d" title="Send an AVRCP cover art connection request. ">bt_avrcp_cover_art_connect_req()</a> function is used to create a cover art connection. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> app_avrcp_bt_cback(<a class="code" href="group___b_t___b_t_m.html#ga60f938d2fe9ea1ac81e1bf400fbb5b03">T_BT_EVENT</a> event_type, <span class="keywordtype">void</span> *event_buf, uint16_t buf_len)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (event_type)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83a4d6b781d7df2a68759c22de424935578">BT_EVENT_SDP_ATTR_INFO</a>:</div><div class="line">            {</div><div class="line">                <a class="code" href="structt__bt__sdp__attr__info.html">T_BT_SDP_ATTR_INFO</a> *sdp_info = &amp;param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a2a26fa4bdf160fc664a921ca0fe0cfd6">sdp_attr_info</a>.<a class="code" href="structt__bt__event__param__sdp__attr__info.html#aede2e502d17f13440b299bd8b5e92f62">info</a>;</div><div class="line"></div><div class="line">                <span class="keywordflow">if</span> (sdp_info-&gt;<a class="code" href="structt__bt__sdp__attr__info.html#a9fe9edcdd42620e0f0d86d9d6a74367d">srv_class_uuid_data</a>.<a class="code" href="uniont__bt__sdp__uuid__data.html#af4fea99995e2110b688ca292edb5f462">uuid_16</a> == <a class="code" href="group___b_t___u_u_i_d.html#ga273325b5addf7d488c576df21a9545bd">UUID_AV_REMOTE_CONTROL_TARGET</a>)</div><div class="line">                {</div><div class="line">                    <a class="code" href="group___b_t___a_v_r_c_p.html#gaf01727f593a0d7047b652f6687259e4d">bt_avrcp_cover_art_connect_req</a>(bd_addr, sdp_info-&gt;<a class="code" href="structt__bt__sdp__attr__info.html#a592a804a18acf35ae1a0441df2264d54">l2c_psm</a>);</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p><b>Note:</b> There is no restriction when this API shall be called. However, as BIP image handles are valid only during the lifetime of a Cover Art connection, an OBEX level connection shall exist before the BIP image handle can be successfully retrieved and the handles retrieved can only be used during that Cover Art connection.</p>
<h3><a class="anchor" id="AVRCP_CoverArt_Retrieve"></a>
4.3 AVRCP Cover Art Retrieve</h3>
<p><a class="el" href="group___b_t___a_v_r_c_p.html#ga917df772a2da9ed06f1669161f7683ce" title="Get cover art image. ">bt_avrcp_cover_art_get()</a> function is used to retrieve the cover art. </p><div class="fragment"><div class="line">uint8_t image_handle[16];</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> app_avrcp_bt_cback(<a class="code" href="group___b_t___b_t_m.html#ga60f938d2fe9ea1ac81e1bf400fbb5b03">T_BT_EVENT</a> event_type, <span class="keywordtype">void</span> *event_buf, uint16_t buf_len)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (event_type)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83aed0318282da9c226d11d9081e0b1ca11">BT_EVENT_AVRCP_TRACK_CHANGED</a>:</div><div class="line">            {</div><div class="line">                <a class="code" href="group___b_t___a_v_r_c_p.html#ga570c2bf7e8a4af001f7d181ace8b1d33">bt_avrcp_get_element_attr_req</a>(param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a02a5bf3d675aac8c962fa748241cc4d1">avrcp_track_changed</a>.<a class="code" href="structt__bt__event__param__avrcp__track__changed.html#a624fd24b46be2b40c8731334c9de5d06">bd_addr</a>, 0, <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83aed14b23f93d9d200ad5ce0414dba3e17">BT_EVENT_AVRCP_ELEM_ATTR</a>:</div><div class="line">            {</div><div class="line">                uint8_t num_of_attr = param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a0f483bd672957f3944b215854334911c">avrcp_elem_attr</a>.<a class="code" href="structt__bt__event__param__avrcp__elem__attr.html#ad4ff39f0e899a1c9f05a3395f8a9fa44">num_of_attr</a>;</div><div class="line">                uint8_t i;</div><div class="line"></div><div class="line">                <span class="keywordflow">for</span> (i = 0; i &lt; num_of_attr; i++)</div><div class="line">                {</div><div class="line">                    <span class="keywordflow">if</span>(param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a0f483bd672957f3944b215854334911c">avrcp_elem_attr</a>.<a class="code" href="structt__bt__event__param__avrcp__elem__attr.html#aec010fe8a329e2997955af1a3c5f70f6">attr</a>[i].<a class="code" href="structt__bt__avrcp__element__attr.html#a4298d407bfdbaf8fd6bf486fc7652e20">attribute_id</a> == <a class="code" href="group___b_t___a_v_r_c_p.html#gga343ddedf1e88cb2a8d1f33efe6962f93a028a8ab5dae5351dd41970b90a5c1f38">BT_AVRCP_ELEM_ATTR_DEFAULT_COVER_ART</a>)</div><div class="line">                    {</div><div class="line">                        utf8_to_unicode(param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a0f483bd672957f3944b215854334911c">avrcp_elem_attr</a>.<a class="code" href="structt__bt__event__param__avrcp__elem__attr.html#aec010fe8a329e2997955af1a3c5f70f6">attr</a>[i].<a class="code" href="structt__bt__avrcp__element__attr.html#afeaeee72b488745390daf8d4716e63ea">p_buf</a>, 7, image_handle);</div><div class="line">                        image_handle[14] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line">                        image_handle[15] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"></div><div class="line">                        <a class="code" href="group___b_t___a_v_r_c_p.html#ga917df772a2da9ed06f1669161f7683ce">bt_avrcp_cover_art_get</a>(param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a0f483bd672957f3944b215854334911c">avrcp_elem_attr</a>.<a class="code" href="structt__bt__event__param__avrcp__elem__attr.html#a624fd24b46be2b40c8731334c9de5d06">bd_addr</a>, image_handle);</div><div class="line">                        <span class="keywordflow">break</span>;</div><div class="line">                    }</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___b_t___b_t_m.html#ggad24078c623525f9ed318443fdc4e4c83aa1409327fe816788b65d07958cefec53">BT_EVENT_AVRCP_COVER_ART_DATA_IND</a>:</div><div class="line">            {</div><div class="line">                <span class="keywordflow">if</span> (!param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a558d702f4782b70beebd1102ed6a1ad4">avrcp_cover_art_data_ind</a>.<a class="code" href="structt__bt__event__param__avrcp__cover__art__data__ind.html#af22a8e3b49524861f704f410106d60a6">data_end</a>)</div><div class="line">                {</div><div class="line">                    <a class="code" href="group___b_t___a_v_r_c_p.html#ga917df772a2da9ed06f1669161f7683ce">bt_avrcp_cover_art_get</a>(param-&gt;<a class="code" href="union_t___b_t___e_v_e_n_t___p_a_r_a_m.html#a558d702f4782b70beebd1102ed6a1ad4">avrcp_cover_art_data_ind</a>.<a class="code" href="structt__bt__event__param__avrcp__cover__art__data__ind.html#a624fd24b46be2b40c8731334c9de5d06">bd_addr</a>, image_handle);</div><div class="line">                }</div><div class="line"></div><div class="line">                <span class="comment">//deal with data</span></div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>Image Handle can be retrieved by <a class="el" href="group___b_t___a_v_r_c_p.html#ga570c2bf7e8a4af001f7d181ace8b1d33" title="Send an AVRCP get element attribute request. ">bt_avrcp_get_element_attr_req()</a> or <a class="el" href="group___b_t___a_v_r_c_p.html#ga3bc90959ed828265ce34281678c5581a" title="Retrieve the metadata attributes for a particular media element item or folder item. ">bt_avrcp_browsing_item_attrs_get()</a>. <b>Note:</b> Image Handle retrieved is 7 UTF-8 character, and should be converted to NULL terminated UTF-16 string.</p>
<h3><a class="anchor" id="AVRCP_CoverArt_Disconnect"></a>
4.4 AVRCP Cover Art Disconnect</h3>
<p><a class="el" href="group___b_t___a_v_r_c_p.html#gae72f948cc8682b0fe7f88dba6bb2a416" title="Send an AVRCP cover art disconnect request. ">bt_avrcp_cover_art_disconnect_req()</a> function is used to disconnect a cover art connection. When the OBEX level connection is closed, the BIP image handles retrieved during that OBEX connection will no longer be valid. </p>
</div></div><!-- contents -->

<HR SIZE=5>
<font size="3" color="black">Copyright(c) 2020, <a href=" http://www.realtek.com.tw/"><font size="3" color="#6FB7B7"><b>Realtek Semiconductor Corporation</b></font></a>. All rights reserved.</font> 
