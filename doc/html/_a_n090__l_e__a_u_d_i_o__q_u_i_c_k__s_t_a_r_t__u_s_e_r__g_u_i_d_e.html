<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BT AUDIO SDK: $title</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bbpro-h55px.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BT AUDIO SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,true,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="contents">
<div class="textblock"><p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
 </p>
<h1><a class="anchor" id="LE_Audio_Qucik_Start_User_Guide_Page"></a>
LE Audio Quick Start User Guide  </h1>
<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
 </p><center><b>V1.0</b></center><p><br />
 </p><center><b>2023/07/28</b></center><div style="page-break-after: always;"></div> <h2><a class="anchor" id="LE_Audio_Qucik_Start_Rev"></a>
Revision History</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Version  </th><th class="markdownTableHeadCenter">Date  </th><th class="markdownTableHeadCenter">Description   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">V0.9  </td><td class="markdownTableBodyCenter">2022/11/08  </td><td class="markdownTableBodyCenter">Beta Release   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">V1.0  </td><td class="markdownTableBodyCenter">2023/07/28  </td><td class="markdownTableBodyCenter">Normal Release   </td></tr>
</table>
<div style="page-break-after: always;"></div> <h2><a class="anchor" id="LE_Audio_Qucik_Start_Content"></a>
Contents</h2>
<ul>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Rev">Revision History</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Table_List">Table List</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Figure_List">Figure List</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Glossary">Glossary</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Introduction">1 Introduction</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Remind">2 Remind</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_BluetoothTopology">3 Streaming of Bluetooth Topology</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Public_Release">4 Public Release of RTL87X3E-MCU-SDK</a><ul>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Source">4.1 Set up RTL8763EAU as UMS and BMS</a><ul>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Source_Config">4.1.1 Binaries listed and Configuration</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Source_Switch">4.1.2 Switching Bluetooth Classic and LE Audio</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Source_BIS_Number">4.1.3 Set up the number of BIS</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Log_8763EAU">4.1.4 Log of 8763EAU</a></li>
</ul>
</li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Assistant">4.2 Set up RTL8763EAU as Assistant</a><ul>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Assistant_Config">4.2.1 Binaries listed and Configuration</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Assistant_SparkLEAudio_Tool">4.2.2 SparkLEAudioTool</a></li>
</ul>
</li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_UMR_BMR_RWS">4.3 Set up RTL8773ESL as UMR and BMR of RWS</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_UMR_BMR_Single">4.4 Set up RTL8773ESL as UMR and BMR of HEADSET</a></li>
</ul>
</li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_MCUConfiguration">5 LE Audio MCU Configuration</a><ul>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#BTFeatureCheck">5.1 BT Feature Check</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LEALinkBackandPairing">5.2 LEA Link Back and Pairing</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#BroadcastConfigure">5.3 Broadcast Configure</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#Audiolocation">5.4 Audio location Policy</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#MMIOtherSetting">5.5 MMI / Other Setting</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#AudioSetting">5.6 Audio Setting</a></li>
</ul>
</li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Enable_UMR">6 How To Enable LE Audio UMR and CT</a><ul>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Config_Enable_UMR_Auto">6.1 Configuration of CIS Auto-Start</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Config_Enable_UMR_MMI">6.2 Configuration of CIS MMI trigger</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Config_Enable_UMR_Verification">6.3 Verification of UMR</a></li>
</ul>
</li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Enable_BMR">7 How To Enable LE Audio BMR</a><ul>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#BroadcastSink">7.1 Broadcast sink</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#ScanDelegator">7.2 Scan Delegator</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#BMR_Verification_Broadcast_sink">7.3 Verification of Broadcast sink</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#BMR_Verification_Scan_Delegator">7.4 Verification of Scan Delegator</a></li>
</ul>
</li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_COD">8 Class of Device</a></li>
<li><a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Programing_LEAudio_project">9 How to prgarame LE audio project</a></li>
</ul>
<div style="page-break-after: always;"></div> <h2><a class="anchor" id="LE_Audio_Qucik_Start_Table_List"></a>
Table List</h2>
<ul>
<li><a href="#table_5_1">Table 5-1 Upstreaming Algorithm and Upstreaming Mode, CG select same simple rate</a></li>
<li><a href="#table_5_2">Table 5-2 Upstreaming Algorithm and Upstreaming Mode, CG select different simple rate</a></li>
</ul>
<div style="page-break-after: always;"></div> <h2><a class="anchor" id="LE_Audio_Qucik_Start_Figure_List"></a>
Figure List</h2>
<ul>
<li><a href="#figure_3_1">Figure 3-1 Topology of Bluetooth Classic TWS-headset</a></li>
<li><a href="#figure_3_2">Figure 3-2 CIS Audio Topology of TWS headset and Speaker</a></li>
<li><a href="#figure_3_3">Figure 3-3 CIS Voice Topology of TWS headset and Speaker</a></li>
<li><a href="#figure_3_4">Figure 3-4 BIS Topology base on TWS headset and Speaker</a></li>
<li><a href="#figure_4_1">Figure 4-1 SDK Folder</a></li>
<li><a href="#figure_4_2">Figure 4-2 Binaries of 8763EAU</a></li>
<li><a href="#figure_4_3">Figure 4-3 UMS or NMS Dongle APP</a></li>
<li><a href="#figure_4_4">Figure 4-4 Configuration of 8763EAU</a></li>
<li><a href="#figure_4_5">Figure 4-5 Configuration of Classic and UMS, UMR</a></li>
<li><a href="#figure_4_6">Figure 4-6 Configured the Number of BIS</a></li>
<li><a href="#figure_4_7">Figure 4-7 Assistant Demo Topology</a></li>
<li><a href="#figure_4_8">Figure 4-8 IPhone of Source of the 8763EAU</a></li>
<li><a href="#figure_4_9">Figure 4-9 Broadcast Assistant</a></li>
<li><a href="#figure_4_10">Figure 4-10 Search Headset</a></li>
<li><a href="#figure_4_11">Figure 4-11 Coordinate Set Receivers</a></li>
<li><a href="#figure_4_12">Figure 4-12 Search BMS</a></li>
<li><a href="#figure_4_13">Figure 4-13 List of Broadcast Sources</a></li>
<li><a href="#figure_4_14">Figure 4-14 Select the BMS You Want to Play</a></li>
<li><a href="#figure_4_15">Figure 4-15 Play the BMS You Desire</a></li>
<li><a href="#figure_4_16">Figure 4-16 Set Up RTL8773ESL as UMR and BMR of RWS</a></li>
<li><a href="#figure_4_17">Figure 4-17 Set Up RTL8763EFL as UMR and BMR of RWS</a></li>
<li><a href="#figure_4_18">Figure 4-18 Set Up RTL8773ESL as UMR and BMR of HEADSET</a></li>
<li><a href="#figure_4_19">Figure 4-19 Set Up RTL8763EFL as UMR and BMR of HEADSET</a></li>
<li><a href="#figure_5_1">Figure 5-1 BT Feature Check</a></li>
<li><a href="#figure_5_2">Figure 5-2 BT Feature Selection Example</a></li>
<li><a href="#figure_5_3">Figure 5-3 LEA Link Back and Pairing</a></li>
<li><a href="#figure_5_4">Figure 5-4 Active Prioity of Connected Device</a></li>
<li><a href="#figure_5_5">Figure 5-5 Broadcast Configuration</a></li>
<li><a href="#figure_5_6">Figure 5-6 Boradcast Sink Policy</a></li>
<li><a href="#figure_5_7">Figure 5-7 Active Priority if Connected, after BIS Stop</a></li>
<li><a href="#figure_5_8">Figure 5-8 MMI / Other Setting</a></li>
<li><a href="#figure_5_9">Figure 5-9 Audio Setting</a></li>
<li><a href="#figure_5_10">Figure 5-10 Upstreaming Mode</a></li>
<li><a href="#figure_5_11">Figure 5-11 Audio Capability Support</a></li>
<li><a href="#figure_6_1">Figure 6-1 CIS Auto-Start</a></li>
<li><a href="#figure_6_2">Figure 6-2 Pairing Mode Timeout</a></li>
<li><a href="#figure_6_3">Figure 6-3 Setting MMI Trigger CIS</a></li>
<li><a href="#figure_6_4">Figure 6-4 key Trigger CIS</a></li>
<li><a href="#figure_7_1">Figure 7-1 MMI Trigger BIS</a></li>
<li><a href="#figure_7_2">Figure 7-2 Random Policy of Broadcast Sink</a></li>
<li><a href="#figure_7_3">Figure 7-3 Specific Policy of Broadcast Sink</a></li>
<li><a href="#figure_7_4">Figure 7-4 Random and Last Policy of Broadcast Sink</a></li>
<li><a href="#figure_7_5">Figure 7-5 Scan Delegator</a></li>
<li><a href="#figure_7_6">Figure 7-6 Key Trigger BIS Start or Stop</a></li>
<li><a href="#figure_8_1">Figure 8-1 Enable LE Audio of COD</a></li>
<li><a href="#figure_9_1">Figure 9-1 SDK Development Folder</a></li>
<li><a href="#figure_9_2">Figure 9-2 Keil Target for LE audio</a></li>
<li><a href="#figure_9_3">Figure 9-3 Included Lib and Source Code</a></li>
</ul>
<div style="page-break-after: always;"></div><p> <br />
</p>
<h2><a class="anchor" id="LE_Audio_Qucik_Start_Glossary"></a>
Glossary</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Terms  </th><th class="markdownTableHeadCenter">Definitions   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">eRWS  </td><td class="markdownTableBodyCenter">Realtek proprietary enhanced real wireless stereo scheme   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">Multilink  </td><td class="markdownTableBodyCenter">Allow headset concurrent connect with at most two Bluetooth Classic source devices   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">B2S  </td><td class="markdownTableBodyCenter">Bud to Bluetooth Classic Source link   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">B2B  </td><td class="markdownTableBodyCenter">Bud to Bud with Bluetooth Classic link   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">B2SL  </td><td class="markdownTableBodyCenter">Bud to Bluetooth LE audio Source link   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">Pri  </td><td class="markdownTableBodyCenter">Primary bud which would be seen from the Bluetooth Classic source   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">Sec  </td><td class="markdownTableBodyCenter">Secondary bud which would be sniffing from the Bluetooth Classic source   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">CIS  </td><td class="markdownTableBodyCenter">LE Connected Isochronous Streams   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">BIS  </td><td class="markdownTableBodyCenter">Broadcast Isochronous Streams   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">LEA  </td><td class="markdownTableBodyCenter">LE Audio   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">UMR  </td><td class="markdownTableBodyCenter">Unicast Media Receiver   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">BMR  </td><td class="markdownTableBodyCenter">Broadcast Media Receiver   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">UMS  </td><td class="markdownTableBodyCenter">Unicast Media Sender   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">BMS  </td><td class="markdownTableBodyCenter">Broadcast Media Sender   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">CG  </td><td class="markdownTableBodyCenter">Call Gateway   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">CT  </td><td class="markdownTableBodyCenter">Call Terminal   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">CSIS  </td><td class="markdownTableBodyCenter">Coordinated Set Identification Service   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">SIRK  </td><td class="markdownTableBodyCenter">Set Identity Resolving Key   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">RSI  </td><td class="markdownTableBodyCenter">Resolvable Set Identifier   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">ASCS  </td><td class="markdownTableBodyCenter">Audio Stream Control Service   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">PACS  </td><td class="markdownTableBodyCenter">Published Audio Capabilities Service   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">BASS  </td><td class="markdownTableBodyCenter">Broadcast Audio Scan Service   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">RTP  </td><td class="markdownTableBodyCenter">Real Talk Profile   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">RCV  </td><td class="markdownTableBodyCenter">Real Clear Voice   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">NN  </td><td class="markdownTableBodyCenter">Neural Network   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">NR  </td><td class="markdownTableBodyCenter">Noise Reduction   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">CDKD  </td><td class="markdownTableBodyCenter">Cross-Transport Key Derivation   </td></tr>
</table>
<div style="page-break-after: always;"></div> <h2><a class="anchor" id="LE_Audio_Qucik_Start_Introduction"></a>
1 Introduction</h2>
<p>The purpose of this document is to introduce LE audio topology concept and to privide simple setup instructions for LE audio products.This document gives a tutorial of LE audio configuration by MCU Tool. What's more, it describes the usage scenario of LE audio, it would help to familiar with LE audio. Lastly, it describes how to prgarame LE audio keil project.</p>
<div style="page-break-after: always;"></div> <h2><a class="anchor" id="LE_Audio_Qucik_Start_Remind"></a>
2 Remind</h2>
<p>You must have a host device, such like dongle, that support Audio on Bluetooth LE. Please prepare 8763EAU EVB, that support Audio on Bluetooth LE. Additionally, smartphones like the Pixel 7 (Android 13,14) and Galaxy S23 enable Bluetooth LE-audio. In the sections below, these features of public-software-foundation would be discussed, and these features is to be extend by Bluetooth LE audio. It would cover both the Bluetooth classic eRWS, Single and Bluetooth LE-audio.</p>
<div style="page-break-after: always;"></div> <h2><a class="anchor" id="LE_Audio_Qucik_Start_BluetoothTopology"></a>
3 Streaming of Bluetooth Topology</h2>
<p>There is comparison of Bluetooth Classic and LE-audio TWS-headset topology. <br />
Topology of Classic TWS-headset is provided in directory as illustrated below: </p><div class="image">
<img src="Bluetooth_Classic_TWS_headset.png" alt="Bluetooth_Classic_TWS_headset.png"/>
</div>
 <center><div id="figure_3_1"><b>Figure 3-1 Topology of Bluetooth Classic TWS-headset </b></div></center><p> Audio on Bluetooth LE, Topology of LE TWS-headset and Speaker is provided in directory as illustrated below: <br />
UMS and UMR: </p><div class="image">
<img src="Topology_CIS.png" alt="Topology_CIS.png"/>
</div>
 <center><div id="figure_3_2"><b>Figure 3-2 CIS Audio Topology of TWS headset and Speaker </b></div></center><div style="page-break-after: always;"></div><p> <br />
CG and CT: </p><div class="image">
<img src="Topology_CIS_VOICE.png" alt="Topology_CIS_VOICE.png"/>
</div>
 <center><div id="figure_3_3"><b>Figure 3-3 CIS Voice Topology of TWS headset and Speaker </b></div></center><p> <br />
BMS and BMR: </p><div class="image">
<img src="Topology_BIS.png" alt="Topology_BIS.png"/>
</div>
 <center><div id="figure_3_4"><b>Figure 3-4 BIS Topology of TWS headset and Speaker </b></div></center><div style="page-break-after: always;"></div> <h2><a class="anchor" id="LE_Audio_Qucik_Start_Public_Release"></a>
4 Public Release of RTL87X3E-MCU-SDK</h2>
<p>The RTL87X3E-MCU-SDK release includes source code and binaries for the source and sink roles. Here are some descriptions that go along with LE audio product demo scenarios.This document privides simple setup instructions for the RTL8763EAU source or assistant role. The SDK folder looks like this: </p><div class="image">
<img src="SDK_Folder.png" alt="SDK_Folder.png"/>
</div>
 <center><div id="figure_4_1"><b>Figure 4-1 SDK Folder </b></div></center><h3><a class="anchor" id="LE_Audio_Qucik_Start_Source"></a>
4.1 Set up RTL8763EAU as UMS and BMS</h3>
<h4><a class="anchor" id="LE_Audio_Qucik_Start_Source_Config"></a>
4.1.1 Binaries listed and Configuration</h4>
<p>Please use the binaries listed below, excluding the dongle APP. <br />
"\bin\rtl87x3e\8763EAU\BANK0" </p><div class="image">
<img src="SDK_Folder_8763EAU.png" alt="SDK_Folder_8763EAU.png"/>
</div>
 <center><div id="figure_4_2"><b>Figure 4-2 Binaries of 8763EAU </b></div></center><div style="page-break-after: always;"></div><p> The Dongle APP is shown below. "\bin\rtl87x3e\app_demo_bin\8763EAU\general\BANK0" </p><div class="image">
<img src="SDK_Folder_8763EAU_general_dongle.png" alt="SDK_Folder_8763EAU_general_dongle.png"/>
</div>
 <center><div id="figure_4_3"><b>Figure 4-3 UMS or NMS Dongle APP </b></div></center><p> The configuration folder is shown below. "\bin\rtl87x3e\8763EAU\rcfg\For EVB" </p><div class="image">
<img src="8763EAU_Configuration.png" alt="8763EAU_Configuration.png"/>
</div>
 <center><div id="figure_4_4"><b>Figure 4-4 Configuration of 8763EAU </b></div></center><p> Bluetooth Classic and UMS, UMR should be configured as shown below. <br />
</p><div class="image">
<img src="8763EAU_Classic_UMS_UMR_configuration.png" alt="8763EAU_Classic_UMS_UMR_configuration.png"/>
</div>
 <center><div id="figure_4_5"><b>Figure 4-5 Configuration of Classic and UMS, UMR </b></div></center> <h4><a class="anchor" id="LE_Audio_Qucik_Start_Source_Switch"></a>
4.1.2 Switching Bluetooth Classic and LE Audio</h4>
<p>Shorted press MFB KEY, Classic to BMS, BMS to UMS cycle changeover. When the dongle is in Classic mode, long pressing KEY1 enters pairing mode. When the dongle is in Classic mode, shorted pressing KEY1 enters link back or disconnect mode. When the dongle is in BMS mode, shorted pressing KEY1 causes the AUX_ADV_IND packet to be broadcast. When the dongle is in UMS mode, long pressing KEY1 enters pairing mode. When the dongle is in UMS mode, shorted pressing KEY1 enters link back or disconnect mode. </p>
<h4><a class="anchor" id="LE_Audio_Qucik_Start_Source_BIS_Number"></a>
4.1.3 Set up the number of BIS</h4>
<p>Please configure the dongle to 3 BIS.The first is left and right audio channel location of the BIS. The secondary is left audio channel location of the BIS.The third is right audio channel location of the BIS. The dongle configured the number od BIS as displayed below. </p><div class="image">
<img src="number_BIS.png" alt="number_BIS.png"/>
</div>
 <center><div id="figure_4_6"><b>Figure 4-6 Configured the Number of BIS </b></div></center> <h4><a class="anchor" id="LE_Audio_Qucik_Start_Log_8763EAU"></a>
4.1.4 Log of 8763EAU</h4>
<p>The user can check the LOG of BT-mode for the 8763EAU. <br />
A)Enter Legacy Mode <br />
LOG: bt_mode_transfer_to_legacy <br />
A-1)Pairing Mode <br />
LOG: general_bt_connect: dev 00:00:00:00:00:00 <br />
LOG: gaming_bt_connect: dev 00:00:00:00:00:00 <br />
A-2)Link Back Mode <br />
LOG: general_bt_connect: dev bt-address <br />
LOG: gaming_bt_connect: dev bt-address <br />
A-3)Disconnection Mode <br />
LOG: src_handle_dev_cleanup <br />
LOG: src_dev_cleanup <br />
B)Enter BMS Mode <br />
LOG: bt_mode_transfer_to_bis <br />
B-1)Broadcast Start <br />
LOG: bs_start_broadcast <br />
B-2)Broadcast Stop <br />
LOG: broadcast_source_disable <br />
LOG: bs_release_broadcast <br />
C)Enter UMS Mode <br />
LOG: bt_mode_transfer_to_cis <br />
C-1)Pairing Mode <br />
LOG: le_audio_mmi: action F2, cis 1 <br />
LOG: app_le_audio_start_auto_pair <br />
C-2)link back Mode <br />
LOG: app_le_audio_enable_unicast_audio: enable 1 <br />
C-3)Disconnection Mode <br />
LOG: app_le_audio_enable_unicast_audio: enable 0</p>
<h3><a class="anchor" id="LE_Audio_Qucik_Start_Assistant"></a>
4.2 Set up RTL8763EAU as Assistant</h3>
<p>Please refer to the demo topology as displayed below. </p><div class="image">
<img src="Assistant_demo.png" alt="Assistant_demo.png"/>
</div>
 <center><div id="figure_4_7"><b>Figure 4-7 Assistant Demo Topology</b></div></center><h4><a class="anchor" id="LE_Audio_Qucik_Start_Assistant_Config"></a>
4.2.1 Binaries listed and Configuration</h4>
<p><br />
 1.RTL8763EAU as Assistant. <br />
 Please use the binaries listed below: <br />
<br />
 "\bin\rtl87x3e\8763EAU\BANK0" <br />
 The configuration folder is shown below. <br />
 "\bin\rtl87x3e\8763EAU\rcfg\For EVB" <br />
 <br />
 2.RTL8763EAU as BMS. <br />
 Please refer to the listed binaries <a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Source">4.1 Set up RTL8763EAU as UMS and BMS</a>,<br />
and choose BMS mode of 8763EAU <a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Source_Switch">4.1.2 Switching Bluetooth Classic and LE Audio</a> <br />
 <br />
 Shorted press MFB KEY, Classic to BMS.When the dongle is in BMS mode, shorted pressing KEY1 causes the AUX_ADV_IND packet to be broadcast. The configuration is as shown below when the source of the 8763EAU is an iPhone. </p><div class="image">
<img src="Iphone_source.png" alt="Iphone_source.png"/>
</div>
 <center><div id="figure_4_8"><b>Figure 4-8 IPhone of Source of the 8763EAU Configuration</b></div></center><h4><a class="anchor" id="LE_Audio_Qucik_Start_Assistant_SparkLEAudio_Tool"></a>
4.2.2 SparkLEAudioTool</h4>
<p>Please use SparkLEAudioTool as an assistant to control the Dongle in your PC. <br />
Step 1 start SparkLEAudioTool from the "\tool\SparkLEAudioTool". <br />
Step 2 enter Broadcast Assistant of SparkLEAudioTool as displayed below. </p><div class="image">
<img src="Broadcast_Assistant.png" alt="Broadcast_Assistant.png"/>
</div>
 <center><div id="figure_4_9"><b>Figure 4-9 Broadcast Assistant </b></div></center><div style="page-break-after: always;"></div><p> <br />
Step 3 search headset/earbuds under "Receiver" and add it as displayed below. </p><div class="image">
<img src="search_headset.png" alt="search_headset.png"/>
</div>
 <center><div id="figure_4_10"><b>Figure 4-10 Search Headset </b></div></center><p><br />
Coordinate Set Receivers as displayed below. </p><div class="image">
<img src="Coordinate_Set_Receivers.png" alt="Coordinate_Set_Receivers.png"/>
</div>
 <center><div id="figure_4_11"><b>Figure 4-11 Coordinate Set Receivers </b></div></center><div style="page-break-after: always;"></div><p> <br />
Step 4 search BMS under "Transmitter" and add it as displayed below. </p><div class="image">
<img src="search_BMS.png" alt="search_BMS.png"/>
</div>
 <center><div id="figure_4_12"><b>Figure 4-12 Search BMS </b></div></center><p><br />
Display the list of Broadcast Sources as it is shown below. </p><div class="image">
<img src="Broadcast_Sources_list.png" alt="Broadcast_Sources_list.png"/>
</div>
 <center><div id="figure_4_13"><b>Figure 4-13 List of Broadcast Sources </b></div></center><p><br />
Coordinate Set Receivers as displayed below. <br />
Step 5 select the BMS you want to play from "Bonded Receiver" and play it as displayed below. </p><div class="image">
<img src="select_BMS.png" alt="select_BMS.png"/>
</div>
 <center><div id="figure_4_14"><b>Figure 4-14 Select the BMS You Want to Play </b></div></center><p><br />
The Headset/Earbuds play the BMS as displayed below. </p><div class="image">
<img src="play_BMS.png" alt="play_BMS.png"/>
</div>
 <center><div id="figure_4_15"><b>Figure 4-15 Play the BMS You Desire </b></div></center><h2><a class="anchor" id="LE_Audio_Qucik_Start_UMR_BMR_RWS"></a>
4.3 Set up RTL8773ESL as UMR and BMR of RWS</h2>
<p>Please use the binaries and configuration listed below. <br />
<br />
"\bin\rtl87x3e\8773ESL\RWS" <br />
"\bin\rtl87x3e\8773ESL\RWS\rcfg\For EVB" </p><div class="image">
<img src="SDK_Folder_8773ESL.png" alt="SDK_Folder_8773ESL.png"/>
</div>
 <center><div id="figure_4_16"><b>Figure 4-16 Set Up RTL8773ESL as UMR and BMR of RWS </b></div></center><p> <br />
"\bin\rtl87x3e\8763EFL\RWS" <br />
"\bin\rtl87x3e\8763EFL\RWS\rcfg\For EVB" </p><div class="image">
<img src="SDK_Folder_8763EFL.png" alt="SDK_Folder_8763EFL.png"/>
</div>
 <center><div id="figure_4_17"><b>Figure 4-17 Set Up RTL8763EFL as UMR and BMR of RWS </b></div></center><p> Please refer to <a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_MCUConfiguration">5 LE Audio MCU Configuration</a> <br />
 and <a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Enable_UMR">6 How To Enable LE Audio UMR and CT</a> <br />
 the earbud is configured for Bluetooth Classic or UMR, BMR. <br />
 </p>
<h2><a class="anchor" id="LE_Audio_Qucik_Start_UMR_BMR_Single"></a>
4.4 Set up RTL8773ESL as UMR and BMR of HEADSET</h2>
<p>Please use the binaries and configuration listed below. <br />
<br />
"\bin\rtl87x3e\8773ESL\HEADSET" <br />
"\bin\rtl87x3e\8773ESL\HEADSET\rcfg\For EVB" </p><div class="image">
<img src="SDK_Folder_8773ESL_HEADSET.png" alt="SDK_Folder_8773ESL_HEADSET.png"/>
</div>
 <center><div id="figure_4_18"><b>Figure 4-18 Set Up RTL8773ESL as UMR and BMR of HEADSET </b></div></center><p> <br />
"\bin\rtl87x3e\8763EFL\HEADSET" <br />
"\bin\rtl87x3e\8763EFL\HEADSET\rcfg\For EVB" </p><div class="image">
<img src="SDK_Folder_8763EFL_HEADSET.png" alt="SDK_Folder_8763EFL_HEADSET.png"/>
</div>
 <center><div id="figure_4_19"><b>Figure 4-19 Set Up RTL8763EFL as UMR and BMR of HEADSET </b></div></center><p> Please refer to <a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_MCUConfiguration">5 LE Audio MCU Configuration</a> <br />
 and <a class="el" href="_a_n090__l_e__a_u_d_i_o__q_u_i_c_k__s_t_a_r_t__u_s_e_r__g_u_i_d_e.html#LE_Audio_Qucik_Start_Enable_UMR">6 How To Enable LE Audio UMR and CT</a> <br />
; the earbud is configured for Bluetooth Classic or UMR, BMR.</p>
<div style="page-break-after: always;"></div> <h2><a class="anchor" id="LE_Audio_Qucik_Start_MCUConfiguration"></a>
5 LE Audio MCU Configuration</h2>
<p>This document gives a tutorial of LE audio configuration of UMR/CT/BMR by MCU Tool in Realtek Bluetooth Audio Chip (RTL8773ESL/RTL8763EFL Series). </p>
<h2><a class="anchor" id="BTFeatureCheck"></a>
5.1 BT Feature Check</h2>
<p>This part provide stream source, like CIS, BIS or Classic BT. <br />
A) CIS: Check this option to support LE Connected Isochronous Stream <br />
B) BIS: Check this item to support LE Broadcast Isochronous Stream <br />
D) Legacy: Check this option to support classic Bluetooth <br />
At least one of these options must be selected as illustrated below. <br />
Feature Check: </p><div class="image">
<img src="Feature_Check_1.png" alt="Feature_Check_1.png"/>
</div>
 <center><div id="figure_5_1"><b>Figure 5-1 BT Feature Check </b></div></center><p> For example, if user not select Legacy as below, <br />
Disable legacy Pairing mode in TWS earbuds and Headset product. There still support earbud and earbud connected <br />
with legacy to combine TWS earbuds.But not allow earbud or headset legacy connect with phone. </p><div class="image">
<img src="Feature_Check_EX.png" alt="Feature_Check_EX.png"/>
</div>
 <center><div id="figure_5_2"><b>Figure 5-2 BT Feature Selection Example </b></div></center><h2><a class="anchor" id="LEALinkBackandPairing"></a>
5.2 LEA Link Back and Pairing</h2>
<p>There are some options or policies for creating LEA and EDR link, and then active device setting as illustrated below.</p>
<p><br />
LEA Link Back and Pairing: </p><div class="image">
<img src="LEA_Link_Back_and_Pairing.png" alt="LEA_Link_Back_and_Pairing.png"/>
</div>
 <center><div id="figure_5_3"><b>Figure 5-3 LEA Link Back and Pairing </b></div></center><p> <br />
A) Profile : MCP (Media Control Profile) /CCP (Call Control Profile)/ CSIS ( Coordinated Set Identification Service ) <br />
B) LEA Pairing Timer : LEA enters pairing mode, the overdue time is set, the range is 10~600 seconds. LEA pairing mode is starting ble advertising. <br />
C) LEA Link Back Timer : LEA link back mode, setting the overdue time, the range is 5~600 seconds LEA Link Back mode is starting ble advertising too. <br />
D) Active Prioity of connected device: When several devices are connected, the priority of button behavior will be determined according to the priority. There are the following options: <br />
 Active Prioity of connected device: </p><div class="image">
<img src="Active_connected_device.png" alt="Active_connected_device.png"/>
</div>
 <center><div id="figure_5_4"><b>Figure 5-4 Active Prioity of Connected Device </b></div></center><p> For Example, if user select <b>Last one</b> as illustrated above. When EDR link created and then LEA link created, <br />
 the active device is LEA device. The key of headset is controlling LEA device, such as play/ pause, volume up/ down. <br />
E) Power-off When LEA Timeout: When the LEA pairing mode expires and the current of system is idle, power off directly <br />
F) When LEA link loss line back timeout : LEA link loss and then retrying time setting <br />
G) Disconnect Enter LEA Pairing Mode: The Master require disconnection, and then device will enter LEA Pairing Mode.</p>
<h2><a class="anchor" id="BroadcastConfigure"></a>
5.3 Broadcast Configure</h2>
<p><br />
 There are some options or policies for creating LEA link or Broadcast Sink, and then active device setting as illustrated below. </p><div class="image">
<img src="Broadcast_Configure.png" alt="Broadcast_Configure.png"/>
</div>
 <center><div id="figure_5_5"><b>Figure 5-5 Broadcast Configuration </b></div></center><p> <br />
A) Broadcast Role : Scan Delegator is controlled by Scan assistant to initiate ADV ; Broadcast Sink actively searches for PA to enable scan. <br />
User just could select one of Broadcast Role in current SDK release with 3.11.2.X version. <br />
Feature SDK release with 3.13.1.X will provide Scan Delegator and Broadcast Sink concurrently. <br />
B) BIS Number and Default bond This Number: Broadcast Receiver expects to synchronize channel. <b>BIS Number</b> is available if <b>Default bond This Number</b> is be selected. <br />
C) Boradcast Sink Policy : <br />
Random is the surrounding random PA <br />
Specific is to find a specific PA <br />
Random and Last is the surrounding random PA by last one slaved in flash.There are the following options: </p><div class="image">
<img src="Boradcast_Sink_Policy.png" alt="Boradcast_Sink_Policy.png"/>
</div>
 <center><div id="figure_5_6"><b>Figure 5-6 Boradcast Sink Policy </b></div></center><p> <br />
D) SCAN Time : <br />
i. the role is Scan Delegator , it indicates the overdue time for initiating ADV in current SDK release with 3.11.2.X version. <br />
ii. When the role is Boradcast Sink, it means that scan is enabled to actively search for the PA overdue time. <br />
Please attention to Scan Delegator indicates the overdue time for initiating ADV will define in LEA Pairing in feature SDK release with 3.11.3.X. <br />
E) Active Priority if connected , after BIS stop : There are following options, </p><div class="image">
<img src="BIS_STOP_OP.png" alt="BIS_STOP_OP.png"/>
</div>
 <center><div id="figure_5_7"><b>Figure 5-7 Active Priority if Connected, after BIS Stop </b></div></center><p> <br />
Button priority after BIS is stopped, setting LEA device is active. <br />
F) BIS loss, resync timer: When pa loss, the headphone side actively resync time setting <br />
G) Power off when BIS timeout : When the BIS expires after triggering, and the current is idle, power off directly</p>
<h2><a class="anchor" id="Audiolocation"></a>
5.4 Audio location Policy</h2>
<p><br />
If <b>Default bond This Number</b> is not be selected. Audio location will according to PA information to define. <br />
For example, Right side of TWS earbuds will choice right location of pa information to create BIS. If right location is not exist, <br />
the ear bud will find left location of pa information. If Right and left location is not exist in PA, the earbud will find Left-Right location of pa information to create BIS. <br />
Headset or Speaker will find Left-Right location of pa information to create BIS first.</p>
<h2><a class="anchor" id="MMIOtherSetting"></a>
5.5 MMI / Other Setting</h2>
<p><br />
There is setting to trigger LEA link or BIS as illustrated below. </p><div class="image">
<img src="MMI_OTHER_SETTING.png" alt="MMI_OTHER_SETTING.png"/>
</div>
 <center><div id="figure_5_8"><b>Figure 5-8 MMI / Other Setting </b></div></center><p> <br />
A) Enbl ADV MMI: Allow LEA ADV to be triggered by MMI <br />
B) Unicast sink Policy : <br />
i. LEA auto , when pairing with legacy, enter LEA pairing together <br />
ii.LEA MMI is actively triggered by mmi</p>
<h2><a class="anchor" id="AudioSetting"></a>
5.6 Audio Setting</h2>
<p><br />
There is setting about audio or voice algorithm. These options of audio capability parameter as illustrated below. </p><div class="image">
<img src="Audio_setting.png" alt="Audio_setting.png"/>
</div>
 <center><div id="figure_5_9"><b>Figure 5-9 Audio Setting </b></div></center><p> <br />
A) Upstreaming Algorithm: <br />
Voice Algorithm: NN of RCV 5.0 defined by DSP side. Just only Primary MIC is available. <br />
Audio Algorithm: NR of RCV 5.0 and Real Talk Profile(RTP) defined by DSP side. MIC are both available in earbud side. <br />
B) Upstreaming Mode: </p><div class="image">
<img src="Upstreaming_Mode.png" alt="Upstreaming_Mode.png"/>
</div>
 <center><div id="figure_5_10"><b>Figure 5-10 Upstreaming Mode </b></div></center><p> <br />
Two Buds Upstreaming: Two earbuds create cis upstreaming, and MIC encoding data of the secondry earbud is vaild. <br />
Primary Upstreaming: When two earbuds create cis upstreaming, MIC of the secondry earbud is disable and sends a zero-len package upstreaming. Please keep in mind that the headset provides audio functionality, but CT Select the audio capability parameter to be used as illustrated below. </p><center><div id="table_5_1"><b>Table 5-1 Upstreaming Algorithm and Upstreaming Mode, CG select same simple rate </b></div></center> <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">CG  </th><th class="markdownTableHeadNone">Algorithm  </th><th class="markdownTableHeadNone">Upstreaming Mode  </th><th class="markdownTableHeadNone">MIC of secondry earbud status   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><div style="width:240px">16K/16K;24K/24K;32K/32K(Up/Down)</div>  </td><td class="markdownTableBodyNone"><div style="width:100px">Audio</div>  </td><td class="markdownTableBodyNone"><div style="width:200px">Primary Upstreaming</div>  </td><td class="markdownTableBodyNone"><div style="width:500px">MIC of the secondry earbud is disable.</div>   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Audio  </td><td class="markdownTableBodyNone">Two Buds Upstreaming  </td><td class="markdownTableBodyNone">MIC encoding data of the secondry earbud is vaild.   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Voice  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">MIC of the secondry earbud is disable.   </td></tr>
</table>
<center><div id="table_5_2"><b>Table 5-2 Upstreaming Algorithm and Upstreaming Mode, CG select different simple rate </b></div></center> <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">CG  </th><th class="markdownTableHeadNone">Algorithm  </th><th class="markdownTableHeadNone">Upstreaming Mode  </th><th class="markdownTableHeadNone">MIC of secondry earbud status   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><div style="width:240px">16K/48K;24K/48K;32K/48K(Up/Down)</div>  </td><td class="markdownTableBodyNone"><div style="width:100px">Audio</div>  </td><td class="markdownTableBodyNone"><div style="width:200px">Primary Upstreaming</div>  </td><td class="markdownTableBodyNone"><div style="width:500px">MIC of the secondry earbud is disable.</div>   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Audio  </td><td class="markdownTableBodyNone">Two Buds Upstreaming  </td><td class="markdownTableBodyNone">MIC encoding data of the secondry earbud is vaild.   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Voice(NA)  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">NA   </td></tr>
</table>
<p><br />
C) Unicast Presentation Delay : <br />
CIS start to decode offset time(100us): <br />
If the value is not 0, DSP start to decode according to reference clock and the <b>Presentation Delay </b>. <br />
If the value is 0, the Presentation Delay is 40ms. <br />
D) Broadcast Presentation Delay : <br />
If the value is not 0, DSP start to decode according to reference clock and the <b>Presentation Delay </b>. <br />
If the value is 0, the Presentation Delay is 40ms. <br />
E) Enter Gaming mode after power on: earbud require low latency parameter to master. <br />
F) RTK Gaming: choice RTK gaming default parameter. <br />
G) Call end resume media: If media is playing, and then call incoming or dial out. After call is end, earbud or headset will resume media. <br />
H) audio capability support: <br />
According SIG Spec, we suggest setting as illustrated below. The master will select audio capability for Conversation and Media as illustrated bellow. </p><div class="image">
<img src="SAMPLE_RATE.png" alt="SAMPLE_RATE.png"/>
</div>
 <center><div id="figure_5_11"><b>Figure 5-11 Audio Capability Support </b></div></center><div style="page-break-after: always;"></div> <h2><a class="anchor" id="LE_Audio_Qucik_Start_Enable_UMR"></a>
6 How To Enable LE Audio UMR and CT</h2>
<p>There are two options to trigger LEA Pairing to be the UMR. </p>
<h2><a class="anchor" id="LE_Audio_Qucik_Start_Config_Enable_UMR_Auto"></a>
6.1 Configuration of CIS Auto-Start</h2>
<p><br />
Please setting cis as bellow: </p><div class="image">
<img src="cis_auto_start.png" alt="cis_auto_start.png"/>
</div>
 <center><div id="figure_6_1"><b>Figure 6-1 CIS Auto-Start </b></div></center><p> After buds engage, two buds start BLE advertisement, and wait for host create link. <br />
There is a timer refer to pairing mode timeout, as bellow: </p><div class="image">
<img src="pairing_mode_timeout.png" alt="pairing_mode_timeout.png"/>
</div>
 <center><div id="figure_6_2"><b>Figure 6-2 Pairing Mode Timeout </b></div></center> <h2><a class="anchor" id="LE_Audio_Qucik_Start_Config_Enable_UMR_MMI"></a>
6.2 Configuration of CIS MMI trigger</h2>
<p><br />
Please select mmi to trigger BLE advertisement start, and configure as bellow: </p><div class="image">
<img src="mmi_trigger_cis.png" alt="mmi_trigger_cis.png"/>
</div>
 <center><div id="figure_6_3"><b>Figure 6-3 Setting MMI Trigger CIS </b></div></center><p> <br />
key trigger, as bellow: </p><div class="image">
<img src="key_trigger_cis.png" alt="key_trigger_cis.png"/>
</div>
 <center><div id="figure_6_4"><b>Figure 6-4 key Trigger CIS </b></div></center> <h2><a class="anchor" id="LE_Audio_Qucik_Start_Config_Enable_UMR_Verification"></a>
6.3 Verification of UMR</h2>
<p><br />
Step 1: When ADV of LEA is advertising, you can view the log as displayed below. <br />
LOG: app_lea_adv_callback: change from 0 to 1 <br />
Step 2: Wgen BLE link ctrates for UMR, you can view the log as displayed below. <br />
LOG: app_lea_umr_link_sm: conn_handle 0xXX, event 0x20</p>
<div style="page-break-after: always;"></div> <h2><a class="anchor" id="LE_Audio_Qucik_Start_Enable_BMR"></a>
7 How To Enable LE Audio BMR</h2>
<p>There are two kinds of scenario, Scan-Delegator and Broadcast-sink. User must trigger Scan-Delegator or Broadcast-sink by MMI, and then the bud will be the one in the monent.</p>
<h2><a class="anchor" id="BroadcastSink"></a>
7.1 Broadcast sink</h2>
<p>Broadcast sink is only trigger by mmi, <br />
and Broadcast-sink is configured as bellow: </p><div class="image">
<img src="mmi_trigger_bis.png" alt="mmi_trigger_bis.png"/>
</div>
 <center><div id="figure_7_1"><b>Figure 7-1 MMI Trigger BIS </b></div></center><p> There three policy of Broadcast sink, Random and Specific,Random and Last. Random policy, that mean the device will start BIS stream when it scan advertisement from a host, support LE audio. <br />
Random policy is configured as bellow: </p><div class="image">
<img src="Random.png" alt="Random.png"/>
</div>
 <center><div id="figure_7_2"><b>Figure 7-2 Random Policy of Broadcast Sink </b></div></center><p> Specific policy, that mean the device will start BIS stream when it scan the advertisement from a Specific host, support LE audio. Device will get the Specific host information from phone or other ways in future. <br />
Specific policy is configured as bellow: </p><div class="image">
<img src="Specific.png" alt="Specific.png"/>
</div>
 <center><div id="figure_7_3"><b>Figure 7-3 Specific Policy of Broadcast Sink </b></div></center><p> <br />
Random and Last policy is configured as bellow: <br />
That mean the device will start BIS stream when it scan advertisement from a host in first, support LE audio. <br />
When bis creates, save the target in FTL. </p><div class="image">
<img src="Random_and_Last.png" alt="Random_and_Last.png"/>
</div>
 <center><div id="figure_7_4"><b>Figure 7-4 Random and Last Policy of Broadcast Sink </b></div></center><p> If <b>Default bond This Number</b> is be selected, earbud will just bond the bis number.</p>
<h2><a class="anchor" id="ScanDelegator"></a>
7.2 Scan Delegator</h2>
<p><br />
BIS is only trigger by mmi or auto start(in feature SDK release with 3.13.1.X.), and Scan-Delegator is configured as bellow: </p><div class="image">
<img src="Scan_delegator.png" alt="Scan_delegator.png"/>
</div>
 <center><div id="figure_7_5"><b>Figure 7-5 Scan Delegator </b></div></center><p> When Assistant and UMR are connected, assistant could control UMR to start BIS sink. Also, UMR could stop BIS and notify the assistant, and then start BIS Sink with UMS.</p>
<div style="page-break-after: always;"></div><p> Key trigger BIS Sink start or stop, <br />
setting as bellow: </p><div class="image">
<img src="key_trigger_bis.png" alt="key_trigger_bis.png"/>
</div>
 <center><div id="figure_7_6"><b>Figure 7-6 Key Trigger BIS Start or Stop </b></div></center> <h2><a class="anchor" id="BMR_Verification_Broadcast_sink"></a>
7.3 Verification of Broadcast sink</h2>
<p><br />
Step 1: When trigger BIS Starting, you can view the log as displayed below. <br />
LOG: app_lea_mgr_tri_mmi_handle_action: action: 0xE0 <br />
Step 2: When Bis created successfully, you can view the log as displayed below. <br />
LOG: app_lea_bmr_handle_iso_data: iso_sdu_len 0xx </p>
<h2><a class="anchor" id="BMR_Verification_Scan_Delegator"></a>
7.4 Verification of Scan Delegator</h2>
<p><br />
Step 1: When trigger BIS Starting, you can view the log as displayed below. <br />
LOG: app_lea_adv_callback: change from 0 to 1 <br />
Step 2: Assitant(SparkLEAudioTool in PC) start to search headset/earbuds under "Receiver",and add it as displayed below.(Please refer to 4.2.2 SparkLEAudioTool Setp 3) <br />
Assitant create connection with headset.Wgen BLE link ctrates for BASS of BMR, you can view the log as displayed below. <br />
LOG: app_lea_umr_link_sm: conn_handle 0xXX, event 0x20 <br />
LOG: LE_AUDIO_MSG_BASS_CP_IND: conn_handle 0xXX <br />
Step 3:Assitant start to select the BMS you want to play from "Bonded Receiver" and play it as displayed below.(Please refer to 4.2.2 SparkLEAudioTool Setp 5) <br />
LOG: app_lea_bmr_handle_iso_data: iso_sdu_len 0xx</p>
<div style="page-break-after: always;"></div> <h2><a class="anchor" id="LE_Audio_Qucik_Start_COD"></a>
8 Class of Device</h2>
<p>Inquiry includes COD, which identifies the device class in BR/EDR.Enable LE Audio of COD,that mean the device support dual mode of LE Audio. Enabling LE Audio in COD indicates that the device supports dual mode of LE Audio.BT address of the device must be public identity address, and support CDKD for BLE and BR/EDR pairing. </p><div class="image">
<img src="COD.png" alt="COD.png"/>
</div>
 <center><div id="figure_8_1"><b>Figure 8-1 Enable LE Audio of COD </b></div></center><p> Smartphones like the Pixel 7 (Android 13,14) and Galaxy S23 support Bluetooth LE-audio, changing the pairing process of Smartphones based on COD and identity address. If the device just support LE Audio only, BT address of the device is static radom identity address for BLE pairing with Smartphones or 8763EAU.</p>
<div style="page-break-after: always;"></div> <h2><a class="anchor" id="LE_Audio_Qucik_Start_Programing_LEAudio_project"></a>
9 How to prgarame LE audio project</h2>
<p>The section describes how to programe your LE audio project. The SDK development folder as follows. BB2_CCUT_RELEASE\RTL87X3E-MCU-SDK-v3.xx.x.xx </p><div class="image">
<img src="Develop_Folder.png" alt="Develop_Folder.png"/>
</div>
 <center><div id="figure_9_1"><b>Figure 9-1 SDK Development Folder </b></div></center><p> For RTL8763EFL and RTL8773ESL, the user should choose the targets <br />
rws_4M_lea_dual_bank0/rws_4M_lea_dual_bank1 <br />
rws_4M_lea_dual_bank0_ANC/rws_4M_lea_dual_bank1_ANC, respectively. <br />
Please open app_flags.h, and then enable LE Audio Module and F_APP_BOND_MGR_SUPPORT, define F_APP_LEA_SUPPORT and F_APP_BOND_MGR_SUPPORT as displayed below. </p><div class="image">
<img src="keil_target.png" alt="keil_target.png"/>
</div>
 <center><div id="figure_9_2"><b>Figure 9-2 Keil Target for LE audio </b></div></center><p> Please make sure these libs and source code,leaudio.lib and lea, mtc,leaudio file folder are included, <br />
as bellow: </p><div class="image">
<img src="lib_code.png" alt="lib_code.png"/>
</div>
 <center><div id="figure_9_3"><b>Figure 9-3 Included Lib and Source Code </b></div></center><p>If the user want to disable le audio module in this project, define F_APP_LEA_SUPPORT is 0 and not include mtc in Target build. </p>
</div></div><!-- contents -->

<HR SIZE=5>
<font size="3" color="black">Copyright(c) 2020, <a href=" http://www.realtek.com.tw/"><font size="3" color="#6FB7B7"><b>Realtek Semiconductor Corporation</b></font></a>. All rights reserved.</font> 
