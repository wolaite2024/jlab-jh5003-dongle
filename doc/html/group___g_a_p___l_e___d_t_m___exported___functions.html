<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BT AUDIO SDK: GAP LE Direct Test Mode Exported Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bbpro-h55px.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BT AUDIO SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,true,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">GAP LE Direct Test Mode Exported Functions<div class="ingroups"><a class="el" href="group___a_p_i___reference.html">API Reference</a> &raquo; <a class="el" href="group___b_l_u_e_t_o_o_t_h.html">Bluetooth</a> &raquo; <a class="el" href="group___g_a_p.html">GAP</a> &raquo; <a class="el" href="group___g_a_p___l_e.html">GAP LE Module</a> &raquo; <a class="el" href="group___g_a_p___l_e___d_t_m.html">GAP LE Direct Test Mode</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>GAP LE Direct Test Mode Exported Functions.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3229a5dc426998810fb3ab9f54a5ad5e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___g_a_p___common___exported___types.html#ga99268bc0507cd918edbd1c9d12c802ab">T_GAP_CAUSE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_p___l_e___d_t_m___exported___functions.html#ga3229a5dc426998810fb3ab9f54a5ad5e">le_dtm_receiver_test</a> (uint8_t rx_chann)</td></tr>
<tr class="memdesc:ga3229a5dc426998810fb3ab9f54a5ad5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a test where the DUT receives test reference packets at a fixed interval. The tester generates the test reference packets.  <a href="#ga3229a5dc426998810fb3ab9f54a5ad5e">More...</a><br /></td></tr>
<tr class="separator:ga3229a5dc426998810fb3ab9f54a5ad5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab422c6b8255c7245fa23ffc40d9bfa65"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___g_a_p___common___exported___types.html#ga99268bc0507cd918edbd1c9d12c802ab">T_GAP_CAUSE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_p___l_e___d_t_m___exported___functions.html#gab422c6b8255c7245fa23ffc40d9bfa65">le_dtm_transmitter_test</a> (uint8_t tx_chann, uint8_t data_len, uint8_t pkt_pl)</td></tr>
<tr class="memdesc:gab422c6b8255c7245fa23ffc40d9bfa65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a test where the DUT generates test reference packets at a fixed interval. The Controller shall transmit at maximum power.  <a href="#gab422c6b8255c7245fa23ffc40d9bfa65">More...</a><br /></td></tr>
<tr class="separator:gab422c6b8255c7245fa23ffc40d9bfa65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga349fc08f071eb32a556b1771dffb395e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___g_a_p___common___exported___types.html#ga99268bc0507cd918edbd1c9d12c802ab">T_GAP_CAUSE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_p___l_e___d_t_m___exported___functions.html#ga349fc08f071eb32a556b1771dffb395e">le_dtm_test_end</a> (void)</td></tr>
<tr class="memdesc:ga349fc08f071eb32a556b1771dffb395e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop any test which is in progress.  <a href="#ga349fc08f071eb32a556b1771dffb395e">More...</a><br /></td></tr>
<tr class="separator:ga349fc08f071eb32a556b1771dffb395e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab4b3a4cf5bb97e160318c97c9b475cac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___g_a_p___common___exported___types.html#ga99268bc0507cd918edbd1c9d12c802ab">T_GAP_CAUSE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_p___l_e___d_t_m___exported___functions.html#gab4b3a4cf5bb97e160318c97c9b475cac">le_dtm_enhanced_receiver_test</a> (uint8_t rx_chann, uint8_t phy, uint8_t mod_idx)</td></tr>
<tr class="memdesc:gab4b3a4cf5bb97e160318c97c9b475cac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a test where the DUT receives test reference packets at a fixed interval.  <a href="#gab4b3a4cf5bb97e160318c97c9b475cac">More...</a><br /></td></tr>
<tr class="separator:gab4b3a4cf5bb97e160318c97c9b475cac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3c6177a5d756ad54bed2e39f9a20d424"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___g_a_p___common___exported___types.html#ga99268bc0507cd918edbd1c9d12c802ab">T_GAP_CAUSE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_p___l_e___d_t_m___exported___functions.html#ga3c6177a5d756ad54bed2e39f9a20d424">le_dtm_enhanced_transmitter_test</a> (uint8_t tx_chann, uint8_t data_len, uint8_t pkt_pl, uint8_t phy)</td></tr>
<tr class="memdesc:ga3c6177a5d756ad54bed2e39f9a20d424"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a test where the DUT generates test reference packets at a fixed interval.  <a href="#ga3c6177a5d756ad54bed2e39f9a20d424">More...</a><br /></td></tr>
<tr class="separator:ga3c6177a5d756ad54bed2e39f9a20d424"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4d057df40db1564805341de17f3a4431"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___g_a_p___common___exported___types.html#ga99268bc0507cd918edbd1c9d12c802ab">T_GAP_CAUSE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_p___l_e___d_t_m___exported___functions.html#ga4d057df40db1564805341de17f3a4431">le_dtm_receiver_test_v3</a> (uint8_t rx_channel, <a class="el" href="group___g_a_p___l_e___t_y_p_e_s___exported___types.html#ga76ee08d96b6fe454d78c7098da491aa3">T_GAP_PHYS_TYPE</a> phy, <a class="el" href="group___g_a_p___l_e___d_t_m___exported___types.html#gad868bf6e40939365c8c0e878763310a3">T_GAP_DTM_MODULATION_INDEX_TYPE</a> modulation_index, uint8_t expected_cte_length, <a class="el" href="group___g_a_p___l_e___t_y_p_e_s___exported___types.html#ga816a3f87dccd65e3176c8e8906b43868">T_GAP_CTE_TYPE</a> expected_cte_type, <a class="el" href="group___g_a_p___l_e___t_y_p_e_s___exported___types.html#ga7e0979a85e8399b612d7c8f685b29915">T_GAP_SLOT_DUATIONS_TYPE</a> slot_durations, uint8_t switching_pattern_length, uint8_t *p_antenna_ids)</td></tr>
<tr class="memdesc:ga4d057df40db1564805341de17f3a4431"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a test where the DUT receives test reference packets at a fixed interval.  <a href="#ga4d057df40db1564805341de17f3a4431">More...</a><br /></td></tr>
<tr class="separator:ga4d057df40db1564805341de17f3a4431"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76cc29bedb4d5902285a4fa78ae06b1b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___g_a_p___common___exported___types.html#ga99268bc0507cd918edbd1c9d12c802ab">T_GAP_CAUSE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_p___l_e___d_t_m___exported___functions.html#ga76cc29bedb4d5902285a4fa78ae06b1b">le_dtm_transmitter_test_v3</a> (uint8_t tx_channel, uint8_t test_data_length, <a class="el" href="group___g_a_p___l_e___d_t_m___exported___types.html#ga3adbe5e38ee6582928ff0d2b1bb9e5ee">T_GAP_DTM_PACKET_PAYLOAD_TYPE</a> packet_payload, <a class="el" href="group___g_a_p___l_e___d_t_m___exported___types.html#ga274e950831788a507b020342ad05909a">T_GAP_DTM_PHYS_TYPE</a> phy, uint8_t cte_length, <a class="el" href="group___g_a_p___l_e___t_y_p_e_s___exported___types.html#ga816a3f87dccd65e3176c8e8906b43868">T_GAP_CTE_TYPE</a> cte_type, uint8_t switching_pattern_length, uint8_t *p_antenna_ids)</td></tr>
<tr class="memdesc:ga76cc29bedb4d5902285a4fa78ae06b1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a test where the DUT receives test reference packets at a fixed interval.  <a href="#ga76cc29bedb4d5902285a4fa78ae06b1b">More...</a><br /></td></tr>
<tr class="separator:ga76cc29bedb4d5902285a4fa78ae06b1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>GAP LE Direct Test Mode Exported Functions. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga3229a5dc426998810fb3ab9f54a5ad5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3229a5dc426998810fb3ab9f54a5ad5e">&#9670;&nbsp;</a></span>le_dtm_receiver_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___g_a_p___common___exported___types.html#ga99268bc0507cd918edbd1c9d12c802ab">T_GAP_CAUSE</a> le_dtm_receiver_test </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>rx_chann</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a test where the DUT receives test reference packets at a fixed interval. The tester generates the test reference packets. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rx_chann</td><td>- channel to receive packets.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">GAP_CAUSE_SUCCESS</td><td>Operation success. </td></tr>
    <tr><td class="paramname">GAP_CAUSE_SEND_REQ_FAILED</td><td>Operation fail.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> dtm_test_req(uint16_t command)</div><div class="line">{</div><div class="line">    rx_chann = (command &amp; 0x3f00) &gt;&gt; 8;</div><div class="line">    le_dtm_receiver_test_req(rx_chann);</div><div class="line">}</div><div class="line"></div><div class="line"><a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> app_gap_callback(uint8_t cb_type, <span class="keywordtype">void</span> *p_cb_data)</div><div class="line">{</div><div class="line">    <a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> result = <a class="code" href="group___g_a_p___common___exported___types.html#gga90b0c39404615bbdf0fc222483ed3fb9a909f010ff315d17ec44d25243492a366">APP_RESULT_SUCCESS</a>;</div><div class="line">    <a class="code" href="union_t___l_e___c_b___d_a_t_a.html">T_LE_CB_DATA</a> *p_data = (<a class="code" href="union_t___l_e___c_b___d_a_t_a.html">T_LE_CB_DATA</a> *)p_cb_data;</div><div class="line"></div><div class="line">    uint16_t status  = 0;</div><div class="line">    uint16_t <span class="keyword">event</span> = 0;</div><div class="line">    <span class="keywordflow">switch</span> (cb_type)</div><div class="line">    {</div><div class="line">    ...</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___g_a_p___l_e___m_s_g___types.html#ga8ee321a5d787402bcaa8f469fd0cc837">GAP_MSG_LE_DTM_RECEIVER_TEST</a>:</div><div class="line">       status = p_data-&gt;p_le_receive_test_rsp-&gt;cause;</div><div class="line">       <span class="keywordflow">if</span> (status == 0)</div><div class="line">       {</div><div class="line">           <a class="code" href="group___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;dtm_event_trace: ev = 0x%x, st = 0x%x&quot;</span>, (event &amp; 0x8000) &gt;&gt; 15, event &amp; 0x1);</div><div class="line">       }</div><div class="line">       <span class="keywordflow">else</span></div><div class="line">       {</div><div class="line">           <span class="keyword">event</span> |= 1;</div><div class="line">           <a class="code" href="group___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;dtm_evt_trace: EV = 0x%x, st = 0x%x&quot;</span>, (event &amp; 0x8000) &gt;&gt; 15, event &amp; 0x1);</div><div class="line">       }</div><div class="line">       dtm_uart_send_bytes(event);</div><div class="line">       <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">    ...</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="gab422c6b8255c7245fa23ffc40d9bfa65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab422c6b8255c7245fa23ffc40d9bfa65">&#9670;&nbsp;</a></span>le_dtm_transmitter_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___g_a_p___common___exported___types.html#ga99268bc0507cd918edbd1c9d12c802ab">T_GAP_CAUSE</a> le_dtm_transmitter_test </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>tx_chann</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pkt_pl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a test where the DUT generates test reference packets at a fixed interval. The Controller shall transmit at maximum power. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tx_chann</td><td>- channel to transmit packets. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_len</td><td>- length in bytes of payload data in each packet. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pkt_pl</td><td>- the value of packet payload.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">GAP_CAUSE_SUCCESS</td><td>Operation success. </td></tr>
    <tr><td class="paramname">GAP_CAUSE_SEND_REQ_FAILED</td><td>Operation fail.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> dtm_test_req(uint16_t command)</div><div class="line">{</div><div class="line">    tx_chann = (command &amp; 0x3f00) &gt;&gt; 8;</div><div class="line">    data_len = up_2_bits &lt;&lt; 6 | (command &amp; 0xfc) &gt;&gt; 2;</div><div class="line">    pkt_pl = command &amp; 0x03;</div><div class="line">    <a class="code" href="group___g_a_p___l_e___d_t_m___exported___functions.html#gab422c6b8255c7245fa23ffc40d9bfa65">le_dtm_transmitter_test</a>(tx_chann, data_len, pkt_pl);</div><div class="line">}</div><div class="line"></div><div class="line"><a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> app_gap_callback(uint8_t cb_type, <span class="keywordtype">void</span> *p_cb_data)</div><div class="line">{</div><div class="line">    <a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> result = <a class="code" href="group___g_a_p___common___exported___types.html#gga90b0c39404615bbdf0fc222483ed3fb9a909f010ff315d17ec44d25243492a366">APP_RESULT_SUCCESS</a>;</div><div class="line">    <a class="code" href="union_t___l_e___c_b___d_a_t_a.html">T_LE_CB_DATA</a> *p_data = (<a class="code" href="union_t___l_e___c_b___d_a_t_a.html">T_LE_CB_DATA</a> *)p_cb_data;</div><div class="line"></div><div class="line">    uint16_t status  = 0;</div><div class="line">    uint16_t <span class="keyword">event</span> = 0;</div><div class="line">    <span class="keywordflow">switch</span> (cb_type)</div><div class="line">    {</div><div class="line">    ...</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___g_a_p___l_e___m_s_g___types.html#ga2250774fba2e13ee06d694e783c21554">GAP_MSG_LE_DTM_TRANSMITTER_TEST</a>:</div><div class="line">    status = p_data-&gt;<a class="code" href="union_t___l_e___c_b___d_a_t_a.html#a7b9ea0123f3b6bbebf007f85373dc8c2">le_cause</a>.<a class="code" href="struct_t___l_e___c_a_u_s_e.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>;</div><div class="line">       <span class="keywordflow">if</span> (status == 0)</div><div class="line">       {</div><div class="line">           <a class="code" href="group___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;dtm_evt_trace: ev = 0x%x, st = 0x%x&quot;</span>, (event &amp; 0x8000) &gt;&gt; 15, event &amp; 0x1);</div><div class="line">       }</div><div class="line">       <span class="keywordflow">else</span></div><div class="line">       {</div><div class="line">           <span class="keyword">event</span> |= 1;</div><div class="line">           <a class="code" href="group___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;dtm_evt_trace: st = 0x%x, st = 0x%x&quot;</span>, (event &amp; 0x8000) &gt;&gt; 15, event &amp; 0x1);</div><div class="line">       }</div><div class="line">       dtm_uart_send_bytes(event);</div><div class="line">       <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">    ...</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga349fc08f071eb32a556b1771dffb395e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga349fc08f071eb32a556b1771dffb395e">&#9670;&nbsp;</a></span>le_dtm_test_end()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___g_a_p___common___exported___types.html#ga99268bc0507cd918edbd1c9d12c802ab">T_GAP_CAUSE</a> le_dtm_test_end </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop any test which is in progress. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">GAP_CAUSE_SUCCESS</td><td>Operation success. </td></tr>
    <tr><td class="paramname">GAP_CAUSE_SEND_REQ_FAILED</td><td>Operation fail.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> dtm_test_req(uint16_t command)</div><div class="line">{</div><div class="line">    ...</div><div class="line">    <a class="code" href="group___g_a_p___l_e___d_t_m___exported___functions.html#ga349fc08f071eb32a556b1771dffb395e">le_dtm_test_end</a>();</div><div class="line">}</div><div class="line"></div><div class="line"><a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> app_gap_callback(uint8_t cb_type, <span class="keywordtype">void</span> *p_cb_data)</div><div class="line">{</div><div class="line">    <a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> result = <a class="code" href="group___g_a_p___common___exported___types.html#gga90b0c39404615bbdf0fc222483ed3fb9a909f010ff315d17ec44d25243492a366">APP_RESULT_SUCCESS</a>;</div><div class="line">    <a class="code" href="union_t___l_e___c_b___d_a_t_a.html">T_LE_CB_DATA</a> *p_data = (<a class="code" href="union_t___l_e___c_b___d_a_t_a.html">T_LE_CB_DATA</a> *)p_cb_data;</div><div class="line"></div><div class="line">    uint16_t status  = 0;</div><div class="line">    uint16_t <span class="keyword">event</span> = 0;</div><div class="line">    <span class="keywordflow">switch</span> (cb_type)</div><div class="line">    {</div><div class="line">    ...</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___g_a_p___l_e___m_s_g___types.html#ga411fcd85c916b4a87c7081509117ceee">GAP_MSG_LE_DTM_TEST_END</a>:</div><div class="line">         status = p_data-&gt;<a class="code" href="union_t___l_e___c_b___d_a_t_a.html#a00a9b184edbe186c29b23b634921ed5b">p_le_dtm_test_end_rsp</a>-&gt;<a class="code" href="struct_t___l_e___d_t_m___t_e_s_t___e_n_d___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>;</div><div class="line">         <span class="keywordflow">if</span> (status == 0)</div><div class="line">         {</div><div class="line">             <span class="keyword">event</span> |= 1 &lt;&lt; 15;</div><div class="line">             <span class="keyword">event</span> |= p_data-&gt;<a class="code" href="union_t___l_e___c_b___d_a_t_a.html#a00a9b184edbe186c29b23b634921ed5b">p_le_dtm_test_end_rsp</a>-&gt;<a class="code" href="struct_t___l_e___d_t_m___t_e_s_t___e_n_d___r_s_p.html#afe3235bc19bc30ab0167f0af8a625123">num_pkts</a>;</div><div class="line">             <a class="code" href="group___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;dtm_evt_trace: ev = 0x%x, packet count = 0x%x&quot;</span>, (event &amp; 0x8000) &gt;&gt; 15,</div><div class="line">                             event &amp; 0x7fff);</div><div class="line">         }</div><div class="line">         <span class="keywordflow">else</span></div><div class="line">         {</div><div class="line">             <span class="keyword">event</span> |= 1;</div><div class="line">             <a class="code" href="group___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;dtm_evt_trace: ev = 0x%x, st = 0x%x&quot;</span>, (event &amp; 0x8000) &gt;&gt; 15, event &amp; 0x1);</div><div class="line">         }</div><div class="line">         dtm_uart_send_bytes(event);</div><div class="line">         <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">    ...</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="gab4b3a4cf5bb97e160318c97c9b475cac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab4b3a4cf5bb97e160318c97c9b475cac">&#9670;&nbsp;</a></span>le_dtm_enhanced_receiver_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___g_a_p___common___exported___types.html#ga99268bc0507cd918edbd1c9d12c802ab">T_GAP_CAUSE</a> le_dtm_enhanced_receiver_test </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>rx_chann</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>phy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mod_idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a test where the DUT receives test reference packets at a fixed interval. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rx_chann</td><td>- channel to receive packets. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">phy</td><td>- physical to receive packets. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mod_idx</td><td>- modulation index to receive packets.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">GAP_CAUSE_SUCCESS</td><td>Operation success. </td></tr>
    <tr><td class="paramname">GAP_CAUSE_SEND_REQ_FAILED</td><td>Operation fail. <pre class="fragment">&lt;b&gt;Example usage&lt;/b&gt;
</pre> <div class="fragment"><div class="line">    <span class="keywordtype">void</span> dtm_test_req(uint16_t command)</div><div class="line">    {</div><div class="line">        <span class="keyword">static</span> uint8_t phy = 1;</div><div class="line">        <span class="keyword">static</span> uint8_t mod_idx = 0;</div><div class="line">        rx_chann = (command &amp; 0x3f00) &gt;&gt; 8;</div><div class="line"><span class="preprocessor">#if F_BT_LE_5_0_SUPPORT</span></div><div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group___g_a_p___l_e___d_t_m___exported___functions.html#gab4b3a4cf5bb97e160318c97c9b475cac">le_dtm_enhanced_receiver_test</a>(rx_chann, phy, mod_idx) != <a class="code" href="group___g_a_p___common___exported___types.html#gga99268bc0507cd918edbd1c9d12c802aba517ae23e2fc4ffb7a6128b63e43a5afc">GAP_CAUSE_SUCCESS</a>)</div><div class="line">        {</div><div class="line">            <a class="code" href="group___t_r_a_c_e.html#gaf20aac2fd019420214bcab2eadd15156">APP_PRINT_ERROR0</a>(<span class="stringliteral">&quot;dtm_test_req: le_dtm_enhanced_receiver_test fail&quot;</span>);</div><div class="line">        }</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">    }</div><div class="line"></div><div class="line">    <a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> app_gap_callback(uint8_t cb_type, <span class="keywordtype">void</span> *p_cb_data)</div><div class="line">    {</div><div class="line">        <a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> result = <a class="code" href="group___g_a_p___common___exported___types.html#gga90b0c39404615bbdf0fc222483ed3fb9a909f010ff315d17ec44d25243492a366">APP_RESULT_SUCCESS</a>;</div><div class="line">        <a class="code" href="union_t___l_e___c_b___d_a_t_a.html">T_LE_CB_DATA</a> *p_data = (<a class="code" href="union_t___l_e___c_b___d_a_t_a.html">T_LE_CB_DATA</a> *)p_cb_data;</div><div class="line"></div><div class="line">        uint16_t status  = 0;</div><div class="line">        uint16_t <span class="keyword">event</span> = 0;</div><div class="line">        <span class="keywordflow">switch</span> (cb_type)</div><div class="line">        {</div><div class="line">        ...</div><div class="line">#<span class="keywordflow">if</span> F_BT_LE_5_0_SUPPORT</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___g_a_p___l_e___m_s_g___types.html#gadedb7ecc77a2d20afb44d6f3dc110b2c">GAP_MSG_LE_DTM_ENHANCED_RECEIVER_TEST</a>:</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">        status = p_data-&gt;<a class="code" href="union_t___l_e___c_b___d_a_t_a.html#a7b9ea0123f3b6bbebf007f85373dc8c2">le_cause</a>.<a class="code" href="struct_t___l_e___c_a_u_s_e.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>;</div><div class="line">        <span class="keywordflow">if</span> (status == 0)</div><div class="line">        {</div><div class="line">            <a class="code" href="group___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;app_gap_callback: event 0x%x, status 0x%x&quot;</span>, (event &amp; 0x8000) &gt;&gt; 15, event &amp; 0x1);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">        {</div><div class="line">            <span class="keyword">event</span> |= 1;</div><div class="line">            <a class="code" href="group___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;app_gap_callback: event 0x%x, status 0x%x&quot;</span>, (event &amp; 0x8000) &gt;&gt; 15, event &amp; 0x1);</div><div class="line">        }</div><div class="line">        dtm_uart_send_bytes(event);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">        ...</div><div class="line">    }</div></div><!-- fragment --> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga3c6177a5d756ad54bed2e39f9a20d424"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3c6177a5d756ad54bed2e39f9a20d424">&#9670;&nbsp;</a></span>le_dtm_enhanced_transmitter_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___g_a_p___common___exported___types.html#ga99268bc0507cd918edbd1c9d12c802ab">T_GAP_CAUSE</a> le_dtm_enhanced_transmitter_test </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>tx_chann</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pkt_pl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>phy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a test where the DUT generates test reference packets at a fixed interval. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tx_chann</td><td>- Channel to transmit packets. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_len</td><td>- Length in bytes of payload data in each packet. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pkt_pl</td><td>- the value of packet payload. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">phy</td><td>- physical to transmit packets.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">GAP_CAUSE_SUCCESS</td><td>Operation success. </td></tr>
    <tr><td class="paramname">GAP_CAUSE_SEND_REQ_FAILED</td><td>Operation fail. <pre class="fragment">&lt;b&gt;Example usage&lt;/b&gt;
</pre> <div class="fragment"><div class="line">    <span class="keywordtype">void</span> dtm_test_req(uint16_t command)</div><div class="line">    {</div><div class="line">        <span class="keyword">static</span> uint8_t phy = 1;</div><div class="line">        tx_chann = (command &amp; 0x3f00) &gt;&gt; 8;</div><div class="line">        data_len = up_2_bits &lt;&lt; 6 | (command &amp; 0xfc) &gt;&gt; 2;</div><div class="line">        pkt_pl = command &amp; 0x03;;</div><div class="line"><span class="preprocessor">#if F_BT_LE_5_0_SUPPORT</span></div><div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group___g_a_p___l_e___d_t_m___exported___functions.html#ga3c6177a5d756ad54bed2e39f9a20d424">le_dtm_enhanced_transmitter_test</a>(tx_chann, data_len, pkt_pl, phy) != <a class="code" href="group___g_a_p___common___exported___types.html#gga99268bc0507cd918edbd1c9d12c802aba517ae23e2fc4ffb7a6128b63e43a5afc">GAP_CAUSE_SUCCESS</a>)</div><div class="line">        {</div><div class="line">           <a class="code" href="group___t_r_a_c_e.html#gaf20aac2fd019420214bcab2eadd15156">APP_PRINT_ERROR0</a>(<span class="stringliteral">&quot;dtm_test_req: le_dtm_enhanced_transmitter_test fail&quot;</span>);</div><div class="line">        }</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">    }</div><div class="line"></div><div class="line">    <a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> app_gap_callback(uint8_t cb_type, <span class="keywordtype">void</span> *p_cb_data)</div><div class="line">    {</div><div class="line">        <a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> result = <a class="code" href="group___g_a_p___common___exported___types.html#gga90b0c39404615bbdf0fc222483ed3fb9a909f010ff315d17ec44d25243492a366">APP_RESULT_SUCCESS</a>;</div><div class="line">        <a class="code" href="union_t___l_e___c_b___d_a_t_a.html">T_LE_CB_DATA</a> *p_data = (<a class="code" href="union_t___l_e___c_b___d_a_t_a.html">T_LE_CB_DATA</a> *)p_cb_data;</div><div class="line"></div><div class="line">        uint16_t status  = 0;</div><div class="line">        uint16_t <span class="keyword">event</span> = 0;</div><div class="line">        <span class="keywordflow">switch</span> (cb_type)</div><div class="line">        {</div><div class="line">         ...</div><div class="line">#<span class="keywordflow">if</span> F_BT_LE_5_0_SUPPORT</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___g_a_p___l_e___m_s_g___types.html#ga7d78b3261bad6f270811de9635dd0dac">GAP_MSG_LE_DTM_ENHANCED_TRANSMITTER_TEST</a>:</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">         status = p_data-&gt;<a class="code" href="union_t___l_e___c_b___d_a_t_a.html#a7b9ea0123f3b6bbebf007f85373dc8c2">le_cause</a>.<a class="code" href="struct_t___l_e___c_a_u_s_e.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>;</div><div class="line">         <span class="keywordflow">if</span> (status == 0)</div><div class="line">         {</div><div class="line">             <a class="code" href="group___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;app_gap_callback: event 0x%x, status 0x%x&quot;</span>, (event &amp; 0x8000) &gt;&gt; 15, event &amp; 0x1);</div><div class="line">         }</div><div class="line">         <span class="keywordflow">else</span></div><div class="line">         {</div><div class="line">             <span class="keyword">event</span> |= 1;</div><div class="line">             <a class="code" href="group___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;app_gap_callback: event 0x%x, status 0x%x&quot;</span>, (event &amp; 0x8000) &gt;&gt; 15, event &amp; 0x1);</div><div class="line">         }</div><div class="line">         dtm_uart_send_bytes(event);</div><div class="line">         <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">         ...</div><div class="line">    }</div></div><!-- fragment --> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga4d057df40db1564805341de17f3a4431"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4d057df40db1564805341de17f3a4431">&#9670;&nbsp;</a></span>le_dtm_receiver_test_v3()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___g_a_p___common___exported___types.html#ga99268bc0507cd918edbd1c9d12c802ab">T_GAP_CAUSE</a> le_dtm_receiver_test_v3 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>rx_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_p___l_e___t_y_p_e_s___exported___types.html#ga76ee08d96b6fe454d78c7098da491aa3">T_GAP_PHYS_TYPE</a>&#160;</td>
          <td class="paramname"><em>phy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_p___l_e___d_t_m___exported___types.html#gad868bf6e40939365c8c0e878763310a3">T_GAP_DTM_MODULATION_INDEX_TYPE</a>&#160;</td>
          <td class="paramname"><em>modulation_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>expected_cte_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_p___l_e___t_y_p_e_s___exported___types.html#ga816a3f87dccd65e3176c8e8906b43868">T_GAP_CTE_TYPE</a>&#160;</td>
          <td class="paramname"><em>expected_cte_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_p___l_e___t_y_p_e_s___exported___types.html#ga7e0979a85e8399b612d7c8f685b29915">T_GAP_SLOT_DUATIONS_TYPE</a>&#160;</td>
          <td class="paramname"><em>slot_durations</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>switching_pattern_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>p_antenna_ids</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a test where the DUT receives test reference packets at a fixed interval. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rx_chann</td><td>- channel to receive packets. Range: 0x00 to 0x27. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">phy</td><td>- physical to receive packets: <a class="el" href="group___g_a_p___l_e___t_y_p_e_s___exported___types.html#ga76ee08d96b6fe454d78c7098da491aa3">T_GAP_PHYS_TYPE</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">modulation_index</td><td>- modulation index to receive packets: <a class="el" href="group___g_a_p___l_e___d_t_m___exported___types.html#gad868bf6e40939365c8c0e878763310a3">T_GAP_DTM_MODULATION_INDEX_TYPE</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">expected_cte_length</td><td>- the expected length of the Constant Tone Extensions in received test reference packets. Range: 0x00 (No Constant Tone Extension expected (default)) or 0x02 to 0x14. Units: 8 us. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">expected_cte_type</td><td>- the expected type of the Constant Tone Extensions in received test reference packets: <a class="el" href="group___g_a_p___l_e___t_y_p_e_s___exported___types.html#ga816a3f87dccd65e3176c8e8906b43868">T_GAP_CTE_TYPE</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">slot_durations</td><td>- modulation index to receive packets and shall be ignored when expected_cte_type is not set to GAP_CTE_TYPE_AOA: <a class="el" href="group___g_a_p___l_e___t_y_p_e_s___exported___types.html#ga7e0979a85e8399b612d7c8f685b29915">T_GAP_SLOT_DUATIONS_TYPE</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">switching_pattern_length</td><td>- the number of Antenna IDs in the pattern and shall be ignored when expected_cte_type is not set to GAP_CTE_TYPE_AOA. Range: 0x02 to max_switching_pattern_length supported by controller max_switching_pattern_length shall be less than or equal to 0x4B. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_antenna_ids</td><td>- Antenna ID in the pattern and shall be ignored when expected_cte_type is not set to GAP_CTE_TYPE_AOA.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">GAP_CAUSE_SUCCESS</td><td>Send request success. </td></tr>
    <tr><td class="paramname">GAP_CAUSE_SEND_REQ_FAILED</td><td>Send request fail.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> dtm_test_req(uint16_t command)</div><div class="line">{</div><div class="line">    uint8_t rx_channel = 0;</div><div class="line">    <a class="code" href="group___g_a_p___l_e___t_y_p_e_s___exported___types.html#ga76ee08d96b6fe454d78c7098da491aa3">T_GAP_PHYS_TYPE</a> phy = <a class="code" href="group___g_a_p___l_e___t_y_p_e_s___exported___types.html#gga76ee08d96b6fe454d78c7098da491aa3ac0d2238b1db336dee38f4e0482bbc1e7">GAP_PHYS_1M</a>;</div><div class="line">    <a class="code" href="group___g_a_p___l_e___d_t_m___exported___types.html#gad868bf6e40939365c8c0e878763310a3">T_GAP_DTM_MODULATION_INDEX_TYPE</a> modulation_index = <a class="code" href="group___g_a_p___l_e___d_t_m___exported___types.html#ggad868bf6e40939365c8c0e878763310a3a6a71fa2b1b43529886fb557b0e70807c">GAP_DTM_MODULATION_INDEX_STANDARD</a>;</div><div class="line">    uint8_t expected_cte_length = 2;</div><div class="line">    <a class="code" href="group___g_a_p___l_e___t_y_p_e_s___exported___types.html#ga816a3f87dccd65e3176c8e8906b43868">T_GAP_CTE_TYPE</a> expected_cte_type = <a class="code" href="group___g_a_p___l_e___t_y_p_e_s___exported___types.html#gga816a3f87dccd65e3176c8e8906b43868a616208a2c5d67e507d508a39cd908de9">GAP_CTE_TYPE_AOA</a>;</div><div class="line">    <a class="code" href="group___g_a_p___l_e___t_y_p_e_s___exported___types.html#ga7e0979a85e8399b612d7c8f685b29915">T_GAP_SLOT_DUATIONS_TYPE</a> slot_durations = <a class="code" href="group___g_a_p___l_e___t_y_p_e_s___exported___types.html#gga7e0979a85e8399b612d7c8f685b29915a4ff4b305da8d3958a3bcb59072eef965">GAP_SLOT_DURATIONS_SWITCH_SAMPLE_1US</a>;</div><div class="line">    uint8_t switching_pattern_length = 2;</div><div class="line">    uint8_t p_antenna_ids[2] = {0, 1};</div><div class="line"></div><div class="line">    <a class="code" href="group___g_a_p___l_e___d_t_m___exported___functions.html#ga4d057df40db1564805341de17f3a4431">le_dtm_receiver_test_v3</a>(rx_channel, phy, modulation_index, expected_cte_length,</div><div class="line">                            expected_cte_type, slot_durations,</div><div class="line">                            switching_pattern_length, p_antenna_ids);</div><div class="line">}</div><div class="line"></div><div class="line"><a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> app_gap_callback(uint8_t cb_type, <span class="keywordtype">void</span> *p_cb_data)</div><div class="line">{</div><div class="line">    <a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> result = <a class="code" href="group___g_a_p___common___exported___types.html#gga90b0c39404615bbdf0fc222483ed3fb9a909f010ff315d17ec44d25243492a366">APP_RESULT_SUCCESS</a>;</div><div class="line">    <a class="code" href="union_t___l_e___c_b___d_a_t_a.html">T_LE_CB_DATA</a> *p_data = (<a class="code" href="union_t___l_e___c_b___d_a_t_a.html">T_LE_CB_DATA</a> *)p_cb_data;</div><div class="line"></div><div class="line">    uint16_t status  = 0;</div><div class="line">    uint16_t <span class="keyword">event</span> = 0;</div><div class="line">    <span class="keywordflow">switch</span> (cb_type)</div><div class="line">    {</div><div class="line">    ...</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___g_a_p___l_e___m_s_g___types.html#ga0666dd7d785bc3c283e57ec0ed25bce3">GAP_MSG_LE_DTM_RECEIVER_TEST_V3</a>:</div><div class="line">        <a class="code" href="group___t_r_a_c_e.html#ga81687b044a4d8600c4be891734f4839a">APP_PRINT_INFO1</a>(<span class="stringliteral">&quot;GAP_MSG_LE_DTM_RECEIVER_TEST_V3: cause 0x%x&quot;</span>,</div><div class="line">                        p_data-&gt;<a class="code" href="union_t___l_e___c_b___d_a_t_a.html#a7b9ea0123f3b6bbebf007f85373dc8c2">le_cause</a>.<a class="code" href="struct_t___l_e___c_a_u_s_e.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    ...</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga76cc29bedb4d5902285a4fa78ae06b1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga76cc29bedb4d5902285a4fa78ae06b1b">&#9670;&nbsp;</a></span>le_dtm_transmitter_test_v3()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___g_a_p___common___exported___types.html#ga99268bc0507cd918edbd1c9d12c802ab">T_GAP_CAUSE</a> le_dtm_transmitter_test_v3 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>tx_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>test_data_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_p___l_e___d_t_m___exported___types.html#ga3adbe5e38ee6582928ff0d2b1bb9e5ee">T_GAP_DTM_PACKET_PAYLOAD_TYPE</a>&#160;</td>
          <td class="paramname"><em>packet_payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_p___l_e___d_t_m___exported___types.html#ga274e950831788a507b020342ad05909a">T_GAP_DTM_PHYS_TYPE</a>&#160;</td>
          <td class="paramname"><em>phy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cte_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_p___l_e___t_y_p_e_s___exported___types.html#ga816a3f87dccd65e3176c8e8906b43868">T_GAP_CTE_TYPE</a>&#160;</td>
          <td class="paramname"><em>cte_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>switching_pattern_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>p_antenna_ids</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a test where the DUT receives test reference packets at a fixed interval. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tx_channel</td><td>- channel to transmit packets. Range: 0x00 to 0x27. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">test_data_length</td><td>- length in bytes of payload data in each packet. Range: 0x00 to 0xFF. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">packet_payload</td><td>- contents of the payload of the test reference packets: <a class="el" href="group___g_a_p___l_e___d_t_m___exported___types.html#ga3adbe5e38ee6582928ff0d2b1bb9e5ee">T_GAP_DTM_PACKET_PAYLOAD_TYPE</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">phy</td><td>- physical to transmit packets: <a class="el" href="group___g_a_p___l_e___d_t_m___exported___types.html#ga274e950831788a507b020342ad05909a">T_GAP_DTM_PHYS_TYPE</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cte_length</td><td>- the length of the Constant Tone Extension in the test reference packets. Range: 0x00 (Do not transmit a Constant Tone Extension) or 0x02 to 0x14. Units: 8 us. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cte_type</td><td>- the type of the Constant Tone Extension in the test reference packets. <a class="el" href="group___g_a_p___l_e___t_y_p_e_s___exported___types.html#ga816a3f87dccd65e3176c8e8906b43868">T_GAP_CTE_TYPE</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">switching_pattern_length</td><td>- the number of Antenna IDs in the pattern and shall be ignored when cte_type is set to GAP_CTE_TYPE_AOA. Range: 0x02 to max_switching_pattern_length supported by controller max_switching_pattern_length shall be less than or equal to 0x4B. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_antenna_ids</td><td>- Antenna ID in the pattern and shall be ignored when expected_cte_type is set to GAP_CTE_TYPE_AOA.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">GAP_CAUSE_SUCCESS</td><td>Send request success. </td></tr>
    <tr><td class="paramname">GAP_CAUSE_SEND_REQ_FAILED</td><td>Send request fail.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> dtm_test_req(uint16_t command)</div><div class="line">{</div><div class="line">    uint8_t tx_channel = 0;</div><div class="line">    uint8_t test_data_length = 2;</div><div class="line">    <a class="code" href="group___g_a_p___l_e___d_t_m___exported___types.html#ga3adbe5e38ee6582928ff0d2b1bb9e5ee">T_GAP_DTM_PACKET_PAYLOAD_TYPE</a> packet_payload = <a class="code" href="group___g_a_p___l_e___d_t_m___exported___types.html#gga3adbe5e38ee6582928ff0d2b1bb9e5eea73a41248ed74fb87168e5d1b91b77106">GAP_DTM_PACKET_PAYLOAD_PRBS9</a>;</div><div class="line">    <a class="code" href="group___g_a_p___l_e___d_t_m___exported___types.html#ga274e950831788a507b020342ad05909a">T_GAP_DTM_PHYS_TYPE</a> phy = <a class="code" href="group___g_a_p___l_e___d_t_m___exported___types.html#gga274e950831788a507b020342ad05909aa71cba295bc979e23cb97176db622b8e5">GAP_DTM_PHYS_1M</a>;</div><div class="line">    uint8_t cte_length = 2;</div><div class="line">    <a class="code" href="group___g_a_p___l_e___t_y_p_e_s___exported___types.html#ga816a3f87dccd65e3176c8e8906b43868">T_GAP_CTE_TYPE</a> cte_type = <a class="code" href="group___g_a_p___l_e___t_y_p_e_s___exported___types.html#gga816a3f87dccd65e3176c8e8906b43868a9a53bddbe4561d67efad3486410fe35b">GAP_CTE_TYPE_AOD_2US_SLOT</a>;</div><div class="line">    uint8_t switching_pattern_length = 2;</div><div class="line">    uint8_t p_antenna_ids[2] = {0, 1};</div><div class="line"></div><div class="line">    <a class="code" href="group___g_a_p___l_e___d_t_m___exported___functions.html#ga76cc29bedb4d5902285a4fa78ae06b1b">le_dtm_transmitter_test_v3</a>(tx_channel, test_data_length,</div><div class="line">                               packet_payload, phy, cte_length, cte_type,</div><div class="line">                               switching_pattern_length, p_antenna_ids);</div><div class="line">}</div><div class="line"></div><div class="line"><a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> app_gap_callback(uint8_t cb_type, <span class="keywordtype">void</span> *p_cb_data)</div><div class="line">{</div><div class="line">    <a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> result = <a class="code" href="group___g_a_p___common___exported___types.html#gga90b0c39404615bbdf0fc222483ed3fb9a909f010ff315d17ec44d25243492a366">APP_RESULT_SUCCESS</a>;</div><div class="line">    <a class="code" href="union_t___l_e___c_b___d_a_t_a.html">T_LE_CB_DATA</a> *p_data = (<a class="code" href="union_t___l_e___c_b___d_a_t_a.html">T_LE_CB_DATA</a> *)p_cb_data;</div><div class="line"></div><div class="line">    uint16_t status  = 0;</div><div class="line">    uint16_t <span class="keyword">event</span> = 0;</div><div class="line">    <span class="keywordflow">switch</span> (cb_type)</div><div class="line">    {</div><div class="line">    ...</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___g_a_p___l_e___m_s_g___types.html#gab6aee19aec312f7c40e29041f7aac811">GAP_MSG_LE_DTM_TRANSMITTER_TEST_V3</a>:</div><div class="line">        <a class="code" href="group___t_r_a_c_e.html#ga81687b044a4d8600c4be891734f4839a">APP_PRINT_INFO1</a>(<span class="stringliteral">&quot;GAP_MSG_LE_DTM_TRANSMITTER_TEST_V3: cause 0x%x&quot;</span>,</div><div class="line">                        p_data-&gt;<a class="code" href="union_t___l_e___c_b___d_a_t_a.html#a7b9ea0123f3b6bbebf007f85373dc8c2">le_cause</a>.<a class="code" href="struct_t___l_e___c_a_u_s_e.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    ...</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->

<HR SIZE=5>
<font size="3" color="black">Copyright(c) 2020, <a href=" http://www.realtek.com.tw/"><font size="3" color="#6FB7B7"><b>Realtek Semiconductor Corporation</b></font></a>. All rights reserved.</font> 
