<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BT AUDIO SDK: $title</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bbpro-h55px.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BT AUDIO SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,true,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="contents">
<div class="textblock"><p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
 </p>
<h1><a class="anchor" id="IMAGE_LAYOUT"></a>
Image Layout User Guide    </h1>
<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
 </p><center><b>V1.0.0.2</b></center><p><br />
 </p><center><b>2023/3/13</b></center><div style="page-break-after: always;"></div><h2><a class="anchor" id="IMAGE_LAYOUT_REV"></a>
Revision History</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Version  </th><th class="markdownTableHeadCenter">Date  </th><th class="markdownTableHeadCenter">Description   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">V1.0.0.0  </td><td class="markdownTableBodyCenter">2021/10/21  </td><td class="markdownTableBodyCenter">Stable Release   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">V1.0.0.1  </td><td class="markdownTableBodyCenter">2021/12/03  </td><td class="markdownTableBodyCenter">Add RTL87X3D support   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">V1.0.0.2  </td><td class="markdownTableBodyCenter">2023/03/13  </td><td class="markdownTableBodyCenter">Add extend data description   </td></tr>
</table>
<div style="page-break-after: always;"></div><h2>Contents</h2>
<ul>
<li><a class="el" href="_u_m008__i_m_a_g_e__l_a_y_o_u_t.html#IMAGE_LAYOUT_REV">Revision History</a></li>
<li><a class="el" href="_u_m008__i_m_a_g_e__l_a_y_o_u_t.html#IMAGE_LAYOUT_Table_List">Table List</a></li>
<li><a class="el" href="_u_m008__i_m_a_g_e__l_a_y_o_u_t.html#IMAGE_LAYOUT_Figure_List">Figure List</a></li>
<li><a class="el" href="_u_m008__i_m_a_g_e__l_a_y_o_u_t.html#IMAGE_LAYOUT_Glossary">Glossary</a></li>
<li><a class="el" href="_u_m008__i_m_a_g_e__l_a_y_o_u_t.html#IMAGE_LAYOUT_Intro">Introduction</a></li>
<li><a class="el" href="_u_m008__i_m_a_g_e__l_a_y_o_u_t.html#IMAGE_LAYOUT_MP_Header">MP Header Layout</a></li>
<li><a class="el" href="_u_m008__i_m_a_g_e__l_a_y_o_u_t.html#IMAGE_LAYOUT_Image_Header">Image Header Layout</a></li>
<li><a class="el" href="_u_m008__i_m_a_g_e__l_a_y_o_u_t.html#IMAGE_LAYOUT_Control_Header">Image Control Header</a></li>
<li><a class="el" href="_u_m008__i_m_a_g_e__l_a_y_o_u_t.html#IMAGE_LAYOUT_Flash_Layout">Flash Layout Items</a></li>
</ul>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="IMAGE_LAYOUT_Table_List"></a>
Table List</h2>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="IMAGE_LAYOUT_Figure_List"></a>
Figure List</h2>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="IMAGE_LAYOUT_Glossary"></a>
Glossary</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Terms  </th><th class="markdownTableHeadCenter">Definitions   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">MCU  </td><td class="markdownTableBodyCenter">Microcontroller Unit   </td></tr>
</table>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="IMAGE_LAYOUT_Intro"></a>
Introduction</h2>
<p>The purpose of this document is to provide a brief introduction to image layout. <br />
Each image include three parts: MP header, Image header and Image payload. But some config data image may exist extend data after the image payload, and the extend data length is not included in the image length of MP header and the image payload length of image header.</p>
<h3>RTL87X3E</h3>
<div class="image">
<img src="RTL87X3E_SOC_Image_Layout.png" alt="RTL87X3E_SOC_Image_Layout.png"/>
</div>
<h3>RTL87X3D</h3>
<div class="image">
<img src="RTL87X3D_SOC_Image_Layout.png" alt="RTL87X3D_SOC_Image_Layout.png"/>
</div>
<h2><a class="anchor" id="IMAGE_LAYOUT_MP_Header"></a>
MP Header Layout</h2>
<p>The information in MP header is used by Tool(MPPGTool and OTA tool) to do some checks, which will be stripped by tool before downloaded to MCU. The data format is like this(Take image size for example): </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Type ID  </th><th class="markdownTableHeadLeft">Date Length  </th><th class="markdownTableHeadLeft">Data   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">0x0014  </td><td class="markdownTableBodyLeft">0x04  </td><td class="markdownTableBodyLeft">(Image size)   </td></tr>
</table>
<h2><a class="anchor" id="IMAGE_LAYOUT_Image_Header"></a>
Image Header Layout</h2>
<p>Image header includes information of the image, such as length and secure information. And format of all images' image header for specified IC is same. But some items are useful just in certain images, which in other images is reserved. The default image header size is different for different ICs.</p>
<h3>RTL87X3E</h3>
<p>The default length of image header for RTL87X3E is 1024 bytes. The Image Header Layout is shown in the following figure. </p><div class="image">
<img src="RTL87X3E_SocVH_OEMH_Image_Layout.png" alt="RTL87X3E_SocVH_OEMH_Image_Layout.png"/>
</div>
<h3>RTL87X3D</h3>
<p>The default length of image header for RTL87X3D is 4096 bytes. The Image Header Layout is shown in the following figure. </p><div class="image">
<img src="RTL87X3D_SocVH_OEMH_Image_Layout.png" alt="RTL87X3D_SocVH_OEMH_Image_Layout.png"/>
</div>
<h2><a class="anchor" id="IMAGE_LAYOUT_Control_Header"></a>
Image Control Header</h2>
<p>The Image Control Header include basic information of this image. The format is shown in the following figure. </p><div class="image">
<img src="Image_Control_Header.png" alt="Image_Control_Header.png"/>
</div>
<h2><a class="anchor" id="IMAGE_LAYOUT_Flash_Layout"></a>
Flash Layout Items</h2>
<h3>RTL87X3E</h3>
<p>For RTL87X3E, the image_info in the image header of OTA Header Image and Boot Patch image defines flash layout of some images. And this item is reserved in other images. The format is shown in the following figure. </p><div class="image">
<img src="RTL87X3E_Image_Info_Format.png" alt="RTL87X3E_Image_Info_Format.png"/>
</div>
<h3>RTL87X3D</h3>
<p>For RTL87X3D, the image_info in the image header of OTA Header Image defines flash layout of some images. And this item is reserved in other images. The format is shown in the following figure. </p><div class="image">
<img src="RTL87X3D_Image_Info_Format.png" alt="RTL87X3D_Image_Info_Format.png"/>
</div>
 </div></div><!-- contents -->

<HR SIZE=5>
<font size="3" color="black">Copyright(c) 2020, <a href=" http://www.realtek.com.tw/"><font size="3" color="#6FB7B7"><b>Realtek Semiconductor Corporation</b></font></a>. All rights reserved.</font> 
