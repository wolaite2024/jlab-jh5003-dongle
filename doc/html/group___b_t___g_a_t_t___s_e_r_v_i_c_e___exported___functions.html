<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BT AUDIO SDK: Bluetooth GATT Service Exported Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bbpro-h55px.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BT AUDIO SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,true,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Bluetooth GATT Service Exported Functions<div class="ingroups"><a class="el" href="group___a_p_i___reference.html">API Reference</a> &raquo; <a class="el" href="group___b_t___m_a_n_a_g_e_r.html">BT Manager</a> &raquo; <a class="el" href="group___b_t___g_a_t_t___s_v_c.html">BT GATT Service</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac1b8e29befc4074007ae987d975ead68"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#gac1b8e29befc4074007ae987d975ead68">gatt_svc_add</a> (<a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a> *p_out_service_id, uint8_t *p_database, uint16_t length, const <a class="el" href="struct_t___f_u_n___g_a_t_t___e_x_t___s_e_r_v_i_c_e___c_b_s.html">T_FUN_GATT_EXT_SERVICE_CBS</a> *p_srv_ext_cbs, <a class="el" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___types.html#gae6ed5007a3c95a997b6f3bd6f3e294bb">P_FUN_GATT_EXT_SEND_DATA_CB</a> p_srv_ext_send_data_cb)</td></tr>
<tr class="memdesc:gac1b8e29befc4074007ae987d975ead68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register specific service.  <a href="#gac1b8e29befc4074007ae987d975ead68">More...</a><br /></td></tr>
<tr class="separator:gac1b8e29befc4074007ae987d975ead68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa51f241709c13a0b058c3e0e146394b3"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#gaa51f241709c13a0b058c3e0e146394b3">gatt_svc_get_num</a> (void)</td></tr>
<tr class="memdesc:gaa51f241709c13a0b058c3e0e146394b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the service table number registered by gatt_svc_add.  <a href="#gaa51f241709c13a0b058c3e0e146394b3">More...</a><br /></td></tr>
<tr class="separator:gaa51f241709c13a0b058c3e0e146394b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad207008d06219e04cec1ee92f1a5c26c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#gad207008d06219e04cec1ee92f1a5c26c">gatt_svc_read_confirm</a> (uint16_t conn_handle, uint16_t cid, <a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a> service_id, uint16_t attrib_index, uint8_t *p_data, uint16_t data_len, uint16_t total_len, <a class="el" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> cause)</td></tr>
<tr class="memdesc:gad207008d06219e04cec1ee92f1a5c26c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Confirm from the application when receiving a read request from the client.  <a href="#gad207008d06219e04cec1ee92f1a5c26c">More...</a><br /></td></tr>
<tr class="separator:gad207008d06219e04cec1ee92f1a5c26c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga12237b46096af42fccb72cc0b4f82d7e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#ga12237b46096af42fccb72cc0b4f82d7e">gatt_svc_write_confirm</a> (uint16_t conn_handle, uint16_t cid, <a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a> service_id, uint16_t attrib_index, <a class="el" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> cause)</td></tr>
<tr class="memdesc:ga12237b46096af42fccb72cc0b4f82d7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Confirm from the application when receiving a write request from the client.  <a href="#ga12237b46096af42fccb72cc0b4f82d7e">More...</a><br /></td></tr>
<tr class="separator:ga12237b46096af42fccb72cc0b4f82d7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5205fb9f2fa8f260cd62da5859a0a211"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#ga5205fb9f2fa8f260cd62da5859a0a211">gatt_svc_send_data</a> (uint16_t conn_handle, uint16_t cid, <a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a> service_id, uint16_t attrib_index, uint8_t *p_data, uint16_t data_len, <a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gadc8629288ad4dc04523014696c756e04">T_GATT_PDU_TYPE</a> type)</td></tr>
<tr class="memdesc:ga5205fb9f2fa8f260cd62da5859a0a211"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send notification or indication to peer device.  <a href="#ga5205fb9f2fa8f260cd62da5859a0a211">More...</a><br /></td></tr>
<tr class="separator:ga5205fb9f2fa8f260cd62da5859a0a211"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9e285e1bb546f3b0a84cbc9175234eb1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#ga9e285e1bb546f3b0a84cbc9175234eb1">gatt_svc_init</a> (uint16_t mode, uint8_t svc_num)</td></tr>
<tr class="memdesc:ga9e285e1bb546f3b0a84cbc9175234eb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the GATT Service mode and service number.  <a href="#ga9e285e1bb546f3b0a84cbc9175234eb1">More...</a><br /></td></tr>
<tr class="separator:ga9e285e1bb546f3b0a84cbc9175234eb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf406fc81f79ae43c0d49888e1f201cad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#gaf406fc81f79ae43c0d49888e1f201cad">gatt_svc_register_general_cb</a> (<a class="el" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___types.html#gaefcd5056ef2240cdf206711524e51b2f">P_FUNC_GATT_SVC_GENERAL_CB</a> svc_cb)</td></tr>
<tr class="memdesc:gaf406fc81f79ae43c0d49888e1f201cad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register GATT service general callback function.  <a href="#gaf406fc81f79ae43c0d49888e1f201cad">More...</a><br /></td></tr>
<tr class="separator:gaf406fc81f79ae43c0d49888e1f201cad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga04e4156a78179bc06f5d347b1711a05d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#ga04e4156a78179bc06f5d347b1711a05d">gatt_svc_handle_profile_data_cmpl</a> (uint16_t conn_handle, uint16_t cid, <a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a> service_id, uint16_t attrib_idx, uint16_t credits, uint16_t cause)</td></tr>
<tr class="memdesc:ga04e4156a78179bc06f5d347b1711a05d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle profile send data complete event. Used when receiving the message <a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___c_b___d_a_t_a.html#gga54eeb1ceeeb4e906d9793097cf0b540ea2154e2a880faa5a33fdeb6c52b910de4">PROFILE_EVT_SEND_DATA_COMPLETE</a>.  <a href="#ga04e4156a78179bc06f5d347b1711a05d">More...</a><br /></td></tr>
<tr class="separator:ga04e4156a78179bc06f5d347b1711a05d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf771650690536a8d14eff74091f961ed"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#gaf771650690536a8d14eff74091f961ed">gatt_svc_service_changed_indicate</a> (uint16_t conn_handle, uint16_t cid, uint16_t start_handle, uint16_t end_handle)</td></tr>
<tr class="memdesc:gaf771650690536a8d14eff74091f961ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send service changed indication.  <a href="#gaf771650690536a8d14eff74091f961ed">More...</a><br /></td></tr>
<tr class="separator:gaf771650690536a8d14eff74091f961ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga846b78867db1ac9e8b186278af7574ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_t___c_h_a_r___u_u_i_d.html">T_CHAR_UUID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#ga846b78867db1ac9e8b186278af7574ba">gatt_svc_find_char_uuid_by_index</a> (const <a class="el" href="struct_t___a_t_t_r_i_b___a_p_p_l.html">T_ATTRIB_APPL</a> *p_srv, uint16_t index, uint16_t attr_num)</td></tr>
<tr class="memdesc:ga846b78867db1ac9e8b186278af7574ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find service characteristic uuid by attribute index.  <a href="#ga846b78867db1ac9e8b186278af7574ba">More...</a><br /></td></tr>
<tr class="separator:ga846b78867db1ac9e8b186278af7574ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac3b4cc72ad4ded1114dbf957098e7a30"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#gac3b4cc72ad4ded1114dbf957098e7a30">gatt_svc_find_char_index_by_uuid</a> (const <a class="el" href="struct_t___a_t_t_r_i_b___a_p_p_l.html">T_ATTRIB_APPL</a> *p_srv, <a class="el" href="struct_t___c_h_a_r___u_u_i_d.html">T_CHAR_UUID</a> char_uuid, uint16_t attr_num, uint16_t *index)</td></tr>
<tr class="memdesc:gac3b4cc72ad4ded1114dbf957098e7a30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find service characteristic attribute index by uuid.  <a href="#gac3b4cc72ad4ded1114dbf957098e7a30">More...</a><br /></td></tr>
<tr class="separator:gac3b4cc72ad4ded1114dbf957098e7a30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga854e7b0227bc375a0f585bceba9ca547"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#ga854e7b0227bc375a0f585bceba9ca547">gatt_svc_find_char_index_by_uuid16</a> (const <a class="el" href="struct_t___a_t_t_r_i_b___a_p_p_l.html">T_ATTRIB_APPL</a> *p_srv, uint16_t char_uuid16, uint16_t attr_num)</td></tr>
<tr class="memdesc:ga854e7b0227bc375a0f585bceba9ca547"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find service characteristic attribute index by uuid16.  <a href="#ga854e7b0227bc375a0f585bceba9ca547">More...</a><br /></td></tr>
<tr class="separator:ga854e7b0227bc375a0f585bceba9ca547"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="gac1b8e29befc4074007ae987d975ead68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac1b8e29befc4074007ae987d975ead68">&#9670;&nbsp;</a></span>gatt_svc_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool gatt_svc_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a> *&#160;</td>
          <td class="paramname"><em>p_out_service_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>p_database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_t___f_u_n___g_a_t_t___e_x_t___s_e_r_v_i_c_e___c_b_s.html">T_FUN_GATT_EXT_SERVICE_CBS</a> *&#160;</td>
          <td class="paramname"><em>p_srv_ext_cbs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___types.html#gae6ed5007a3c95a997b6f3bd6f3e294bb">P_FUN_GATT_EXT_SEND_DATA_CB</a>&#160;</td>
          <td class="paramname"><em>p_srv_ext_send_data_cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register specific service. </p>
<dl class="section note"><dt>Note</dt><dd>Add specific service information to gatt_svc_table struct, will be registered to GATT later. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_out_service_id</td><td>Service ID of specific service. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_database</td><td>Database pointer of specific service. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>Length of Database of specific service. <a class="el" href="struct_t___f_u_n___g_a_t_t___e_x_t___s_e_r_v_i_c_e___c_b_s.html">T_FUN_GATT_EXT_SERVICE_CBS</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_srv_ext_cbs</td><td>Service callback functions of specific service. <a class="el" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___types.html#gae6ed5007a3c95a997b6f3bd6f3e294bb">P_FUN_GATT_EXT_SEND_DATA_CB</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_srv_ext_send_data_cb</td><td>Callback functions for service to handle the result of send notification or indication. <ul>
<li>NULL Application needs to handle <a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___c_b___d_a_t_a.html#gga54eeb1ceeeb4e906d9793097cf0b540ea2154e2a880faa5a33fdeb6c52b910de4">PROFILE_EVT_SEND_DATA_COMPLETE</a> directly. </li>
<li>Others Send result through the callback function p_srv_ext_send_data_cb. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Operation result. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Add service success </td></tr>
    <tr><td class="paramname">false</td><td>Add service failed</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="comment">//case 1</span></div><div class="line"><span class="keywordtype">bool</span> bass_add_service(uint8_t brs_num)</div><div class="line">{</div><div class="line">    <a class="code" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a> service_id;</div><div class="line">    uint16_t attr_tbl_size = <span class="keyword">sizeof</span>(bass_attr_tbl);</div><div class="line"></div><div class="line">    attr_tbl_size -= (<a class="code" href="group___b_a_s_s___def___exported___macros.html#ga69b97295e575b26872f8d1a0ed6f7ebe">BASS_BRS_CHAR_MAX_NUM</a> - brs_num) * 3 * <span class="keyword">sizeof</span>(<a class="code" href="struct_t___a_t_t_r_i_b___a_p_p_l.html">T_ATTRIB_APPL</a>);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#gac1b8e29befc4074007ae987d975ead68">gatt_svc_add</a>(&amp;service_id,</div><div class="line">                                 (uint8_t *)bass_attr_tbl,</div><div class="line">                                 attr_tbl_size,</div><div class="line">                                 &amp;bass_cbs, bass_send_data_cb))</div><div class="line">    {</div><div class="line">        <a class="code" href="group__x3_e___t_r_a_c_e___e_x_p_o_r_t_e_d___m_a_c_r_o_s.html#gacc1df2f06b36ae3ed508e4e1d614a6d6">PROTOCOL_PRINT_ERROR0</a>(<span class="stringliteral">&quot;bass_add_service: failed&quot;</span>);</div><div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line">    }</div><div class="line">    p_bass-&gt;service_id = service_id;</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line">}</div><div class="line"><span class="keywordtype">void</span> bass_send_data_cb(<a class="code" href="struct_t___e_x_t___s_e_n_d___d_a_t_a___r_e_s_u_l_t.html">T_EXT_SEND_DATA_RESULT</a> result)</div><div class="line">{</div><div class="line">    <a class="code" href="group__x3_e___t_r_a_c_e___e_x_p_o_r_t_e_d___m_a_c_r_o_s.html#gae1d37c6b45a18a0c504579de1fad3fcc">PROTOCOL_PRINT_INFO6</a>(<span class="stringliteral">&quot;bass_send_data_cb: credits %d, conn_handle 0x%x, cid 0x%x, service_id %d, attr_idx %d, cause 0x%x&quot;</span>,</div><div class="line">                         result.<a class="code" href="struct_t___e_x_t___s_e_n_d___d_a_t_a___r_e_s_u_l_t.html#a607393b49e6ef198a64152b0ba95ca31">credits</a>, result.<a class="code" href="struct_t___e_x_t___s_e_n_d___d_a_t_a___r_e_s_u_l_t.html#a0d5ffe38d68e48d81e61fc6a4999ae68">conn_handle</a>, result.<a class="code" href="struct_t___e_x_t___s_e_n_d___d_a_t_a___r_e_s_u_l_t.html#aeb65c8711b864df01fca95cfe904d924">cid</a>,</div><div class="line">                         result.<a class="code" href="struct_t___e_x_t___s_e_n_d___d_a_t_a___r_e_s_u_l_t.html#a094c03474c2092d3d653930fecb969e8">service_id</a>, result.<a class="code" href="struct_t___e_x_t___s_e_n_d___d_a_t_a___r_e_s_u_l_t.html#ad5892381ad0f7e319f5b34de243258df">attrib_idx</a>, result.<a class="code" href="struct_t___e_x_t___s_e_n_d___d_a_t_a___r_e_s_u_l_t.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//case 2</span></div><div class="line"><span class="keywordtype">bool</span> bass_add_service(uint8_t brs_num)</div><div class="line">{</div><div class="line">    <a class="code" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a> service_id;</div><div class="line">    uint16_t attr_tbl_size = <span class="keyword">sizeof</span>(bass_attr_tbl);</div><div class="line"></div><div class="line">    attr_tbl_size -= (<a class="code" href="group___b_a_s_s___def___exported___macros.html#ga69b97295e575b26872f8d1a0ed6f7ebe">BASS_BRS_CHAR_MAX_NUM</a> - brs_num) * 3 * <span class="keyword">sizeof</span>(<a class="code" href="struct_t___a_t_t_r_i_b___a_p_p_l.html">T_ATTRIB_APPL</a>);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (<span class="keyword">false</span> == <a class="code" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#gac1b8e29befc4074007ae987d975ead68">gatt_svc_add</a>(&amp;service_id,</div><div class="line">                                 (uint8_t *)bass_attr_tbl,</div><div class="line">                                 attr_tbl_size,</div><div class="line">                                 &amp;bass_cbs, <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div><div class="line">    {</div><div class="line">        <a class="code" href="group__x3_e___t_r_a_c_e___e_x_p_o_r_t_e_d___m_a_c_r_o_s.html#gacc1df2f06b36ae3ed508e4e1d614a6d6">PROTOCOL_PRINT_ERROR0</a>(<span class="stringliteral">&quot;bass_add_service: failed&quot;</span>);</div><div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line">    }</div><div class="line">    p_bass-&gt;service_id = service_id;</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="gaa51f241709c13a0b058c3e0e146394b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa51f241709c13a0b058c3e0e146394b3">&#9670;&nbsp;</a></span>gatt_svc_get_num()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t gatt_svc_get_num </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the service table number registered by gatt_svc_add. </p>
<dl class="Added_API_2_12_0_0"><dt><b><a class="el" href="_added__a_p_i_2_12_0_0.html#_Added_API_2_12_0_0000004">Added Since 2.12.0.0:</a></b></dt><dd></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Registered service table number. </dd></dl>

</div>
</div>
<a id="gad207008d06219e04cec1ee92f1a5c26c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad207008d06219e04cec1ee92f1a5c26c">&#9670;&nbsp;</a></span>gatt_svc_read_confirm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool gatt_svc_read_confirm </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a>&#160;</td>
          <td class="paramname"><em>service_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>attrib_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>p_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>data_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>total_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a>&#160;</td>
          <td class="paramname"><em>cause</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Confirm from the application when receiving a read request from the client. </p>
<dl class="section note"><dt>Note</dt><dd>When using this API, the cause shall be set to <a class="el" href="group___g_a_p___common___exported___types.html#gga90b0c39404615bbdf0fc222483ed3fb9a9f877e20e6ad5feed31bf5f59346ae2d">APP_RESULT_PENDING</a> in the attr_read_cb. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>Connection handle of the ACL link. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cid</td><td>Local CID assigned by Bluetooth Host. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">service_id</td><td>Service ID. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attrib_index</td><td>Attribute index of the attribute to read confirm from the application. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_data</td><td>Pointer to the read value. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_len</td><td>The length of the read data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">total_len</td><td>The total length of the data to read. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cause</td><td>Cause for read confirm. <a class="el" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Operation result. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Confirm from APP OK. </td></tr>
    <tr><td class="paramname">false</td><td>Confirm from APP failed.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> bass_attr_read_cb(uint16_t conn_handle, uint16_t cid, <a class="code" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a> service_id,</div><div class="line">                               uint16_t attrib_index,</div><div class="line">                               uint16_t offset, uint16_t *p_length, uint8_t **pp_value)</div><div class="line">{</div><div class="line">    <a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> cause = <a class="code" href="group___g_a_p___common___exported___types.html#gga90b0c39404615bbdf0fc222483ed3fb9a909f010ff315d17ec44d25243492a366">APP_RESULT_SUCCESS</a>;</div><div class="line">    uint8_t *p_data = <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line">    uint16_t len;</div><div class="line">    uint8_t source_id = bass_get_source_id(attrib_index, <span class="keyword">false</span>);</div><div class="line">    <a class="code" href="group__x3_e___t_r_a_c_e___e_x_p_o_r_t_e_d___m_a_c_r_o_s.html#gaaa53023c643802466184bd31dc369736">PROTOCOL_PRINT_INFO2</a>(<span class="stringliteral">&quot;bass_attr_read_cb: attrib_index %d, offset %x&quot;</span>, attrib_index, offset);</div><div class="line">    <span class="keywordflow">if</span> (source_id == BASS_INVALID_SOURCE_ID)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">return</span> <a class="code" href="group___g_a_p___common___exported___types.html#gga90b0c39404615bbdf0fc222483ed3fb9a4d28281a499adbaed7f8e290ae6ebe6d">APP_RESULT_ATTR_NOT_FOUND</a>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (bass_brs_gen_char_data(source_id,</div><div class="line">                               &amp;p_data,</div><div class="line">                               &amp;len))</div><div class="line">    {</div><div class="line">        <span class="keywordflow">if</span> (offset &gt; len)</div><div class="line">        {</div><div class="line">            cause = <a class="code" href="group___g_a_p___common___exported___types.html#gga90b0c39404615bbdf0fc222483ed3fb9ae82af8df732195dfdf70946128a17b73">APP_RESULT_INVALID_OFFSET</a>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#gad207008d06219e04cec1ee92f1a5c26c">gatt_svc_read_confirm</a>(conn_handle, cid, p_bass-&gt;service_id,</div><div class="line">                                         attrib_index,</div><div class="line">                                         p_data + offset,</div><div class="line">                                         len - offset, len, <a class="code" href="group___g_a_p___common___exported___types.html#gga90b0c39404615bbdf0fc222483ed3fb9a909f010ff315d17ec44d25243492a366">APP_RESULT_SUCCESS</a>))</div><div class="line">            {</div><div class="line">                cause = <a class="code" href="group___g_a_p___common___exported___types.html#gga90b0c39404615bbdf0fc222483ed3fb9a9f877e20e6ad5feed31bf5f59346ae2d">APP_RESULT_PENDING</a>;</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">if</span> (p_data)</div><div class="line">        {</div><div class="line">            ble_audio_mem_free(p_data);</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> (cause);</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga12237b46096af42fccb72cc0b4f82d7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga12237b46096af42fccb72cc0b4f82d7e">&#9670;&nbsp;</a></span>gatt_svc_write_confirm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool gatt_svc_write_confirm </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a>&#160;</td>
          <td class="paramname"><em>service_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>attrib_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a>&#160;</td>
          <td class="paramname"><em>cause</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Confirm from the application when receiving a write request from the client. </p>
<dl class="section note"><dt>Note</dt><dd>If the process of writing the attribute value does not end immediately, the specific service will call gatt_svc_write_confirm, and the cause shall be set to <a class="el" href="group___g_a_p___common___exported___types.html#gga90b0c39404615bbdf0fc222483ed3fb9a9f877e20e6ad5feed31bf5f59346ae2d">APP_RESULT_PENDING</a> in the attr_write_cb. </dd></dl>
<dl class="Added_API_2_13_0_0"><dt><b><a class="el" href="_added__a_p_i_2_13_0_0.html#_Added_API_2_13_0_0000007">Added Since 2.13.0.0:</a></b></dt><dd></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>Connection handle of the ACL link. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cid</td><td>Local CID assigned by Bluetooth Host. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">service_id</td><td>Service ID. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attrib_index</td><td>Attribute index of the attribute to write confirm from the application. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cause</td><td>Write request APP handle result, <a class="el" href="group___g_a_p___common___exported___types.html#gga90b0c39404615bbdf0fc222483ed3fb9a909f010ff315d17ec44d25243492a366">APP_RESULT_SUCCESS</a> or others. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Operation result. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Confirm from APP OK. </td></tr>
    <tr><td class="paramname">false</td><td>Confirm from APP failed.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><a class="code" href="group___u_s_e_r___c_m_d___p_a_r_s_e___exported___types.html#gab7f77eecc3c723d439e610daa838acec">T_USER_CMD_PARSE_RESULT</a> cmd_writeconf(<a class="code" href="struct_t___u_s_e_r___c_m_d___p_a_r_s_e_d___v_a_l_u_e.html">T_USER_CMD_PARSED_VALUE</a> *p_parse_value)</div><div class="line">{</div><div class="line">    uint8_t conn_id = p_parse_value-&gt;<a class="code" href="struct_t___u_s_e_r___c_m_d___p_a_r_s_e_d___v_a_l_u_e.html#a90696670324926369a9646e55705bcbf">dw_param</a>[0];</div><div class="line">    uint16_t cid = p_parse_value-&gt;<a class="code" href="struct_t___u_s_e_r___c_m_d___p_a_r_s_e_d___v_a_l_u_e.html#a90696670324926369a9646e55705bcbf">dw_param</a>[1];</div><div class="line">    <a class="code" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a> service_id = p_parse_value-&gt;<a class="code" href="struct_t___u_s_e_r___c_m_d___p_a_r_s_e_d___v_a_l_u_e.html#a90696670324926369a9646e55705bcbf">dw_param</a>[2];</div><div class="line">    uint16_t attrib_index = p_parse_value-&gt;<a class="code" href="struct_t___u_s_e_r___c_m_d___p_a_r_s_e_d___v_a_l_u_e.html#a90696670324926369a9646e55705bcbf">dw_param</a>[3];</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (!<a class="code" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#ga12237b46096af42fccb72cc0b4f82d7e">gatt_svc_write_confirm</a>(conn_id, cid, service_id, attrib_index,</div><div class="line">                                   <a class="code" href="group___g_a_p___common___exported___types.html#gga90b0c39404615bbdf0fc222483ed3fb9a909f010ff315d17ec44d25243492a366">APP_RESULT_SUCCESS</a>))</div><div class="line">    {</div><div class="line">        <span class="keywordflow">return</span> (<a class="code" href="group___u_s_e_r___c_m_d___p_a_r_s_e___exported___types.html#ggab7f77eecc3c723d439e610daa838acecaed12a48e8a6db9d3e74d4e29e7eda08d">RESULT_ERR</a>);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> (<a class="code" href="group___u_s_e_r___c_m_d___p_a_r_s_e___exported___types.html#ggab7f77eecc3c723d439e610daa838aceca0acf8b75f6fcf2284c37a773d30b5864">RESULT_SUCESS</a>);</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga5205fb9f2fa8f260cd62da5859a0a211"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5205fb9f2fa8f260cd62da5859a0a211">&#9670;&nbsp;</a></span>gatt_svc_send_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool gatt_svc_send_data </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a>&#160;</td>
          <td class="paramname"><em>service_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>attrib_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>p_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>data_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gadc8629288ad4dc04523014696c756e04">T_GATT_PDU_TYPE</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send notification or indication to peer device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>Connection handle of the ACL link. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cid</td><td>Local CID assigned by Bluetooth Host. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">service_id</td><td>Service ID. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attrib_index</td><td>Attribute index of characteristic. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_data</td><td>Pointer to data to be sent. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_len</td><td>Length of value to be sent, range: 0~(mtu_size - 3). uint16_t mtu_size is acquired by le_get_conn_param(GAP_PARAM_CONN_MTU_SIZE, &amp;mtu_size, conn_id). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>GATT PDU type. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Data sent result </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Success. </td></tr>
    <tr><td class="paramname">false</td><td>Failed.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> bass_send_brs_notify(T_BLE_AUDIO_LINK *p_link, T_BASS_BRS_DB *p_db)</div><div class="line">{</div><div class="line">    uint8_t *p_data = <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line">    uint16_t len = 0;</div><div class="line">    uint16_t attrib_idx;</div><div class="line">    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div><div class="line"></div><div class="line">    attrib_idx = BASS_CHAR_BRS_INDEX + 3 * (p_db-&gt;brs_data.source_id - 1);</div><div class="line">    <span class="keywordflow">if</span> (bass_brs_gen_char_data(p_db-&gt;brs_data.source_id, &amp;p_data,  &amp;len))</div><div class="line">    {</div><div class="line">        <span class="keywordflow">if</span> (len &gt; p_link-&gt;mtu_size - 3)</div><div class="line">        {</div><div class="line">            len = p_link-&gt;mtu_size - 3;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#ga5205fb9f2fa8f260cd62da5859a0a211">gatt_svc_send_data</a>(p_link-&gt;conn_handle, <a class="code" href="group___b_t___l_e___l2_c_a_p___f_i_x_e_d___c_i_d.html#gadab213b43c69fddca54722a2edcd393d">L2C_FIXED_CID_ATT</a>, p_bass-&gt;service_id, attrib_idx,</div><div class="line">                                  p_data, len,</div><div class="line">                                  <a class="code" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#ggadc8629288ad4dc04523014696c756e04a54d0b92a538dd91649ac58e51b188969">GATT_PDU_TYPE_NOTIFICATION</a>) == <span class="keyword">false</span>)</div><div class="line">        {</div><div class="line">            ret = <span class="keyword">false</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keywordflow">if</span> (p_data)</div><div class="line">    {</div><div class="line">        ble_audio_mem_free(p_data);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> ret;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga9e285e1bb546f3b0a84cbc9175234eb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9e285e1bb546f3b0a84cbc9175234eb1">&#9670;&nbsp;</a></span>gatt_svc_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool gatt_svc_init </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>svc_num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the GATT Service mode and service number. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>GATT Service mode: <a class="el" href="group___g_a_t_t___s_v_c___m_o_d_e.html">GATT Service Mode</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">svc_num</td><td>Set the number of services that need to register. <ul>
<li>0 Application shall call <a class="el" href="group___g_a_t_t___s_e_r_v_e_r___exported___functions.html#ga2fcbc3f5f19d9fdfb3e48923145e98f4">server_register_app_cb</a> and <a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___functions.html#ga69f3a8c88a1c2d5255f87e69e135311b">server_init</a> to register callback and set service number. </li>
<li>Others Application does not need to call <a class="el" href="group___g_a_t_t___s_e_r_v_e_r___exported___functions.html#ga2fcbc3f5f19d9fdfb3e48923145e98f4">server_register_app_cb</a> and <a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___functions.html#ga69f3a8c88a1c2d5255f87e69e135311b">server_init</a>. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The result of initializing the GATT Service mode. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Success. </td></tr>
    <tr><td class="paramname">false</td><td>Failed.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="comment">//case 1: The parameter svc_num is 0.</span></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="group___a_p_p___b_l_e___s_e_r_v_i_c_e___exported___functions.html#ga721aeeec02f1c42a4d1f9558688cbf2a">app_ble_service_init</a>(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    uint8_t server_num = 1;</div><div class="line">    <a class="code" href="group___g_a_t_t___s_e_r_v_e_r___exported___functions.html#ga2fcbc3f5f19d9fdfb3e48923145e98f4">server_register_app_cb</a>(app_ble_service_general_srv_cb);</div><div class="line">    <a class="code" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___functions.html#ga69f3a8c88a1c2d5255f87e69e135311b">server_init</a>(server_num);</div><div class="line">    <a class="code" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#ga9e285e1bb546f3b0a84cbc9175234eb1">gatt_svc_init</a>(<a class="code" href="group___g_a_t_t___s_v_c___m_o_d_e.html#ga23297604f1b646430b52fc5580b28eaf">GATT_SVC_USE_NORMAL_SERVER</a>, 0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//case 2: The parameter svc_num is not 0.</span></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="group___a_p_p___b_l_e___s_e_r_v_i_c_e___exported___functions.html#ga721aeeec02f1c42a4d1f9558688cbf2a">app_ble_service_init</a>(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    uint8_t server_num = 1;</div><div class="line">    <a class="code" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#ga9e285e1bb546f3b0a84cbc9175234eb1">gatt_svc_init</a>(<a class="code" href="group___g_a_t_t___s_v_c___m_o_d_e.html#ga23297604f1b646430b52fc5580b28eaf">GATT_SVC_USE_NORMAL_SERVER</a>, server_num);</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="gaf406fc81f79ae43c0d49888e1f201cad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf406fc81f79ae43c0d49888e1f201cad">&#9670;&nbsp;</a></span>gatt_svc_register_general_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gatt_svc_register_general_cb </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___types.html#gaefcd5056ef2240cdf206711524e51b2f">P_FUNC_GATT_SVC_GENERAL_CB</a>&#160;</td>
          <td class="paramname"><em>svc_cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register GATT service general callback function. </p>
<dl class="Experimental_Added_API_2_13_0_0"><dt><b><a class="el" href="_experimental__added__a_p_i_2_13_0_0.html#_Experimental_Added_API_2_13_0_0000007">Experimental Added Since 2.13.0.0:</a></b></dt><dd></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">svc_cb</td><td>GATT Service general callback function: <a class="el" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___types.html#gaefcd5056ef2240cdf206711524e51b2f">P_FUNC_GATT_SVC_GENERAL_CB</a>.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="group___a_p_p___b_l_e___s_e_r_v_i_c_e___exported___functions.html#ga721aeeec02f1c42a4d1f9558688cbf2a">app_ble_service_init</a>(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#ga9e285e1bb546f3b0a84cbc9175234eb1">gatt_svc_init</a>(<a class="code" href="group___g_a_t_t___s_v_c___m_o_d_e.html#ga23297604f1b646430b52fc5580b28eaf">GATT_SVC_USE_NORMAL_SERVER</a>, 1);</div><div class="line">    <a class="code" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#gaf406fc81f79ae43c0d49888e1f201cad">gatt_svc_register_general_cb</a>(app_gatt_svc_general_cb);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> app_gatt_svc_general_cb(uint8_t type, <span class="keywordtype">void</span> *p_data)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span> (type == <a class="code" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___types.html#ggae74682ecff949d0c71ec3be140c46c53ad854195ac735afcc7f844a710445d8bc">GATT_SVC_EVENT_REG_RESULT</a>)</div><div class="line">    {</div><div class="line">        <a class="code" href="struct_t___g_a_t_t___s_v_c___r_e_g___r_e_s_u_l_t.html">T_GATT_SVC_REG_RESULT</a> *p_result = (<a class="code" href="struct_t___g_a_t_t___s_v_c___r_e_g___r_e_s_u_l_t.html">T_GATT_SVC_REG_RESULT</a> *)p_data;</div><div class="line"></div><div class="line">        <a class="code" href="group__x3d___t_r_a_c_e.html#ga81687b044a4d8600c4be891734f4839a">APP_PRINT_INFO1</a>(<span class="stringliteral">&quot;GATT_SVC_EVENT_REG_RESULT: result 0x%x&quot;</span>, p_result-&gt;<a class="code" href="struct_t___g_a_t_t___s_v_c___r_e_g___r_e_s_u_l_t.html#a0e94f0561271a20f957dfb617f7f932b">result</a>);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___types.html#ggae74682ecff949d0c71ec3be140c46c53a827cff9910de3230514d810e847898f6">GATT_SVC_EVENT_REG_AFTER_INIT_RESULT</a>)</div><div class="line">    {</div><div class="line">        <a class="code" href="struct_t___g_a_t_t___s_v_c___r_e_g___a_f_t_e_r___i_n_i_t___r_e_s_u_l_t.html">T_GATT_SVC_REG_AFTER_INIT_RESULT</a> *p_result = (<a class="code" href="struct_t___g_a_t_t___s_v_c___r_e_g___a_f_t_e_r___i_n_i_t___r_e_s_u_l_t.html">T_GATT_SVC_REG_AFTER_INIT_RESULT</a> *)p_data;</div><div class="line">        <a class="code" href="group__x3d___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;GATT_SVC_EVENT_REG_AFTER_INIT_RESULT: service_id %d, cause 0x%x&quot;</span>,</div><div class="line">                        p_result-&gt;<a class="code" href="struct_t___g_a_t_t___s_v_c___r_e_g___a_f_t_e_r___i_n_i_t___r_e_s_u_l_t.html#a094c03474c2092d3d653930fecb969e8">service_id</a>, p_result-&gt;<a class="code" href="struct_t___g_a_t_t___s_v_c___r_e_g___a_f_t_e_r___i_n_i_t___r_e_s_u_l_t.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga04e4156a78179bc06f5d347b1711a05d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga04e4156a78179bc06f5d347b1711a05d">&#9670;&nbsp;</a></span>gatt_svc_handle_profile_data_cmpl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool gatt_svc_handle_profile_data_cmpl </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a>&#160;</td>
          <td class="paramname"><em>service_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>attrib_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>credits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cause</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle profile send data complete event. Used when receiving the message <a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___c_b___d_a_t_a.html#gga54eeb1ceeeb4e906d9793097cf0b540ea2154e2a880faa5a33fdeb6c52b910de4">PROFILE_EVT_SEND_DATA_COMPLETE</a>. </p>
<dl class="section note"><dt>Note</dt><dd>If the application uses the Bluetooth GATT Service module and the parameter svc_num of <a class="el" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#ga9e285e1bb546f3b0a84cbc9175234eb1">gatt_svc_init</a> is 0, this function shall be called after receiving <a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___c_b___d_a_t_a.html#gga54eeb1ceeeb4e906d9793097cf0b540ea2154e2a880faa5a33fdeb6c52b910de4">PROFILE_EVT_SEND_DATA_COMPLETE</a>. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>Connection handle of the ACL link. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cid</td><td>Local CID assigned by Bluetooth Host. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">service_id</td><td>Service ID. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attrib_idx</td><td>Attribute index of characteristic. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">credits</td><td>Credits number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cause</td><td>Cause of service send data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The result of handling the profile send data complete event. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Success. </td></tr>
    <tr><td class="paramname">false</td><td>Failed.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> app_bqb_ext_profile_callback(<a class="code" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a> service_id, <span class="keywordtype">void</span> *p_data)</div><div class="line">{</div><div class="line">    <a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> app_result = <a class="code" href="group___g_a_p___common___exported___types.html#gga90b0c39404615bbdf0fc222483ed3fb9a909f010ff315d17ec44d25243492a366">APP_RESULT_SUCCESS</a>;</div><div class="line">    <span class="keywordflow">if</span> (service_id == <a class="code" href="group___general___service___i_d.html#ga57766a6280cddcc4dbc90f20319e777e">SERVICE_PROFILE_GENERAL_ID</a>)</div><div class="line">    {</div><div class="line">        <a class="code" href="struct_t___s_e_r_v_e_r___e_x_t___a_p_p___c_b___d_a_t_a.html">T_SERVER_EXT_APP_CB_DATA</a> *p_param = (<a class="code" href="struct_t___s_e_r_v_e_r___e_x_t___a_p_p___c_b___d_a_t_a.html">T_SERVER_EXT_APP_CB_DATA</a> *)p_data;</div><div class="line">        <span class="keywordflow">switch</span> (p_param-&gt;<a class="code" href="struct_t___s_e_r_v_e_r___e_x_t___a_p_p___c_b___d_a_t_a.html#aa5343b97d75671fa26fc9d752b24ef28">eventId</a>)</div><div class="line">        {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___c_b___d_a_t_a.html#gga54eeb1ceeeb4e906d9793097cf0b540ea2154e2a880faa5a33fdeb6c52b910de4">PROFILE_EVT_SEND_DATA_COMPLETE</a>:</div><div class="line">            <span class="keywordflow">if</span> (!<a class="code" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#ga04e4156a78179bc06f5d347b1711a05d">gatt_svc_handle_profile_data_cmpl</a>(p_param-&gt;<a class="code" href="struct_t___s_e_r_v_e_r___e_x_t___a_p_p___c_b___d_a_t_a.html#a08f155fd79fbb4adacd673690e3dafa6">event_data</a>.<a class="code" href="union_t___s_e_r_v_e_r___e_x_t___c_b___d_a_t_a.html#ae546e22f9a38282866b371decd410bd4">send_data_result</a>.<a class="code" href="struct_t___e_x_t___s_e_n_d___d_a_t_a___r_e_s_u_l_t.html#a0d5ffe38d68e48d81e61fc6a4999ae68">conn_handle</a>,</div><div class="line">                                                      p_param-&gt;<a class="code" href="struct_t___s_e_r_v_e_r___e_x_t___a_p_p___c_b___d_a_t_a.html#a08f155fd79fbb4adacd673690e3dafa6">event_data</a>.<a class="code" href="union_t___s_e_r_v_e_r___e_x_t___c_b___d_a_t_a.html#ae546e22f9a38282866b371decd410bd4">send_data_result</a>.<a class="code" href="struct_t___e_x_t___s_e_n_d___d_a_t_a___r_e_s_u_l_t.html#aeb65c8711b864df01fca95cfe904d924">cid</a>,</div><div class="line">                                                      p_param-&gt;<a class="code" href="struct_t___s_e_r_v_e_r___e_x_t___a_p_p___c_b___d_a_t_a.html#a08f155fd79fbb4adacd673690e3dafa6">event_data</a>.<a class="code" href="union_t___s_e_r_v_e_r___e_x_t___c_b___d_a_t_a.html#ae546e22f9a38282866b371decd410bd4">send_data_result</a>.<a class="code" href="struct_t___e_x_t___s_e_n_d___d_a_t_a___r_e_s_u_l_t.html#a094c03474c2092d3d653930fecb969e8">service_id</a>,</div><div class="line">                                                      p_param-&gt;<a class="code" href="struct_t___s_e_r_v_e_r___e_x_t___a_p_p___c_b___d_a_t_a.html#a08f155fd79fbb4adacd673690e3dafa6">event_data</a>.<a class="code" href="union_t___s_e_r_v_e_r___e_x_t___c_b___d_a_t_a.html#ae546e22f9a38282866b371decd410bd4">send_data_result</a>.<a class="code" href="struct_t___e_x_t___s_e_n_d___d_a_t_a___r_e_s_u_l_t.html#ad5892381ad0f7e319f5b34de243258df">attrib_idx</a>,</div><div class="line">                                                      p_param-&gt;<a class="code" href="struct_t___s_e_r_v_e_r___e_x_t___a_p_p___c_b___d_a_t_a.html#a08f155fd79fbb4adacd673690e3dafa6">event_data</a>.<a class="code" href="union_t___s_e_r_v_e_r___e_x_t___c_b___d_a_t_a.html#ae546e22f9a38282866b371decd410bd4">send_data_result</a>.<a class="code" href="struct_t___e_x_t___s_e_n_d___d_a_t_a___r_e_s_u_l_t.html#a607393b49e6ef198a64152b0ba95ca31">credits</a>,</div><div class="line">                                                      p_param-&gt;<a class="code" href="struct_t___s_e_r_v_e_r___e_x_t___a_p_p___c_b___d_a_t_a.html#a08f155fd79fbb4adacd673690e3dafa6">event_data</a>.<a class="code" href="union_t___s_e_r_v_e_r___e_x_t___c_b___d_a_t_a.html#ae546e22f9a38282866b371decd410bd4">send_data_result</a>.<a class="code" href="struct_t___e_x_t___s_e_n_d___d_a_t_a___r_e_s_u_l_t.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>))</div><div class="line">            {</div><div class="line">                <a class="code" href="group__x3d___t_r_a_c_e.html#gaf20aac2fd019420214bcab2eadd15156">APP_PRINT_ERROR0</a>(<span class="stringliteral">&quot;gatt_svc_handle_profile_data_cmpl failed&quot;</span>);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="gaf771650690536a8d14eff74091f961ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf771650690536a8d14eff74091f961ed">&#9670;&nbsp;</a></span>gatt_svc_service_changed_indicate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool gatt_svc_service_changed_indicate </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>start_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>end_handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send service changed indication. </p>
<dl class="Experimental_Added_API_2_13_0_0"><dt><b><a class="el" href="_experimental__added__a_p_i_2_13_0_0.html#_Experimental_Added_API_2_13_0_0000008">Experimental Added Since 2.13.0.0:</a></b></dt><dd></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>Connection handle of the ACL link. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cid</td><td>Local Channel Identifier assigned by Bluetooth Host. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">start_handle</td><td>Start of Affected Attribute Handle Range. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">end_handle</td><td>End of Affected Attribute Handle Range. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The result of sending operation. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Sending request is successful. </td></tr>
    <tr><td class="paramname">false</td><td>Sending request is failed.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    uint16_t start_handle = 0x0001;</div><div class="line">    uint16_t end_handle = 0xFFFF;</div><div class="line">    <span class="keywordtype">bool</span> ret = <a class="code" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#gaf771650690536a8d14eff74091f961ed">gatt_svc_service_changed_indicate</a>(conn_handle, cid, start_handle, end_handle);</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga846b78867db1ac9e8b186278af7574ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga846b78867db1ac9e8b186278af7574ba">&#9670;&nbsp;</a></span>gatt_svc_find_char_uuid_by_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_t___c_h_a_r___u_u_i_d.html">T_CHAR_UUID</a> gatt_svc_find_char_uuid_by_index </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_t___a_t_t_r_i_b___a_p_p_l.html">T_ATTRIB_APPL</a> *&#160;</td>
          <td class="paramname"><em>p_srv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>attr_num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find service characteristic uuid by attribute index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_srv</td><td>Pointer to service table: <a class="el" href="struct_t___a_t_t_r_i_b___a_p_p_l.html">T_ATTRIB_APPL</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>Attribute index of characteristic. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attr_num</td><td>Total attribute number of service. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The characteristic uuid. <a class="el" href="struct_t___c_h_a_r___u_u_i_d.html">T_CHAR_UUID</a>.</dd></dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> tmas_attr_read_cb(uint16_t conn_handle, uint16_t cid, <a class="code" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a> service_id,</div><div class="line">                                      uint16_t attrib_index,</div><div class="line">                                      uint16_t offset, uint16_t *p_length, uint8_t **pp_value)</div><div class="line">{</div><div class="line">    <a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> cause = <a class="code" href="group___g_a_p___common___exported___types.html#gga90b0c39404615bbdf0fc222483ed3fb9a909f010ff315d17ec44d25243492a366">APP_RESULT_SUCCESS</a>;</div><div class="line"></div><div class="line">    <a class="code" href="group__x3_e___t_r_a_c_e___e_x_p_o_r_t_e_d___m_a_c_r_o_s.html#gaaa53023c643802466184bd31dc369736">PROTOCOL_PRINT_INFO2</a>(<span class="stringliteral">&quot;tmas_attr_read_cb: attrib_index %d, offset %x&quot;</span>, attrib_index, offset);</div><div class="line"></div><div class="line">    <a class="code" href="struct_t___c_h_a_r___u_u_i_d.html">T_CHAR_UUID</a> char_uuid = <a class="code" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#ga846b78867db1ac9e8b186278af7574ba">gatt_svc_find_char_uuid_by_index</a>(tmas_attr_tbl, attrib_index,</div><div class="line">                                                             <span class="keyword">sizeof</span>(tmas_attr_tbl) / <span class="keyword">sizeof</span>(<a class="code" href="struct_t___a_t_t_r_i_b___a_p_p_l.html">T_ATTRIB_APPL</a>));</div><div class="line">    <span class="keywordflow">if</span> (char_uuid.<a class="code" href="struct_t___c_h_a_r___u_u_i_d.html#aa4fd50f1b75f400f3b39777775a043e2">uuid_size</a> != <a class="code" href="group___g_a_t_t___u_u_i_d___s_i_z_e.html#ga4778df0abc2cfce291c096e4628ff0eb">UUID_16BIT_SIZE</a>)</div><div class="line">    {</div><div class="line">        <a class="code" href="group__x3_e___t_r_a_c_e___e_x_p_o_r_t_e_d___m_a_c_r_o_s.html#ga8e22c375b140cc46732777ce97f0e2ca">PROTOCOL_PRINT_ERROR1</a>(<span class="stringliteral">&quot;tmas_attr_read_cb Error: attrib_index 0x%x&quot;</span>, attrib_index);</div><div class="line">        <span class="keywordflow">return</span> <a class="code" href="group___g_a_p___common___exported___types.html#gga90b0c39404615bbdf0fc222483ed3fb9a4d28281a499adbaed7f8e290ae6ebe6d">APP_RESULT_ATTR_NOT_FOUND</a>;</div><div class="line">    }</div><div class="line">    *p_length = 0;</div><div class="line">    <span class="keywordflow">switch</span> (char_uuid.<a class="code" href="struct_t___c_h_a_r___u_u_i_d.html#a321f01ba23d70201d7963892c7380b74">uu</a>.<a class="code" href="struct_t___c_h_a_r___u_u_i_d.html#afad5a92f3a09bedc67d70db0f5095047">char_uuid16</a>)</div><div class="line">    {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___t_m_a_p___u_u_i_d.html#gaf9b6e8e926abb16b0bf341898572b1bd">TMAS_UUID_CHAR_ROLE</a>:</div><div class="line">        {</div><div class="line">            *pp_value = (uint8_t *)&amp;p_tmas-&gt;role;</div><div class="line">            *p_length = 2;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        cause = <a class="code" href="group___g_a_p___common___exported___types.html#gga90b0c39404615bbdf0fc222483ed3fb9a4d28281a499adbaed7f8e290ae6ebe6d">APP_RESULT_ATTR_NOT_FOUND</a>;</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> (cause);</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="gac3b4cc72ad4ded1114dbf957098e7a30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac3b4cc72ad4ded1114dbf957098e7a30">&#9670;&nbsp;</a></span>gatt_svc_find_char_index_by_uuid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool gatt_svc_find_char_index_by_uuid </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_t___a_t_t_r_i_b___a_p_p_l.html">T_ATTRIB_APPL</a> *&#160;</td>
          <td class="paramname"><em>p_srv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_t___c_h_a_r___u_u_i_d.html">T_CHAR_UUID</a>&#160;</td>
          <td class="paramname"><em>char_uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>attr_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find service characteristic attribute index by uuid. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_srv</td><td>Pointer to service table. <a class="el" href="struct_t___a_t_t_r_i_b___a_p_p_l.html">T_ATTRIB_APPL</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">char_uuid</td><td>Service characteristic uuid. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attr_num</td><td>Total attribute number of service. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">index</td><td>Attribute index of characteristic. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The result of finding service characteristic attribute index. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Success. </td></tr>
    <tr><td class="paramname">false</td><td>Failed.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> ccp_send_all_notify(T_TBS_CB *p_entry, uint16_t update_cfg,</div><div class="line">                         uint16_t uuid, uint8_t *p_data, uint16_t data_len)</div><div class="line">{</div><div class="line">    uint8_t i;</div><div class="line">    uint16_t attrib_idx;</div><div class="line"></div><div class="line">    <a class="code" href="struct_t___c_h_a_r___u_u_i_d.html">T_CHAR_UUID</a> char_uuid;</div><div class="line">    char_uuid.<a class="code" href="struct_t___c_h_a_r___u_u_i_d.html#a852b86a2eaee9852ada7a43e61e311a2">index</a> = 1;</div><div class="line">    char_uuid.<a class="code" href="struct_t___c_h_a_r___u_u_i_d.html#aa4fd50f1b75f400f3b39777775a043e2">uuid_size</a> = <a class="code" href="group___g_a_t_t___u_u_i_d___s_i_z_e.html#ga4778df0abc2cfce291c096e4628ff0eb">UUID_16BIT_SIZE</a>;</div><div class="line">    char_uuid.<a class="code" href="struct_t___c_h_a_r___u_u_i_d.html#a321f01ba23d70201d7963892c7380b74">uu</a>.<a class="code" href="struct_t___c_h_a_r___u_u_i_d.html#afad5a92f3a09bedc67d70db0f5095047">char_uuid16</a> = uuid;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (!<a class="code" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#gac3b4cc72ad4ded1114dbf957098e7a30">gatt_svc_find_char_index_by_uuid</a>(p_entry-&gt;p_attr_tbl, char_uuid,</div><div class="line">                                     p_entry-&gt;attr_num,</div><div class="line">                                     &amp;attrib_idx))</div><div class="line">    {</div><div class="line">        <a class="code" href="group__x3_e___t_r_a_c_e___e_x_p_o_r_t_e_d___m_a_c_r_o_s.html#ga8e22c375b140cc46732777ce97f0e2ca">PROTOCOL_PRINT_ERROR1</a>(<span class="stringliteral">&quot;[CCP]ccp_send_all_notify: find index failed, uuid 0x%x&quot;</span>, uuid);</div><div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="group___a_p_p___l_i_n_k.html#ga9875ca18a9c76318637e0df3774093ed">MAX_BLE_LINK_NUM</a>; i++)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">if</span> ((ble_audio_db.le_link[i].used == <span class="keyword">true</span>) &amp;&amp;</div><div class="line">            (ble_audio_db.le_link[i].state == <a class="code" href="group___gap___msg___exported___types.html#ggae236f1ba42a45ef51d2178ffa9acc44eaf55da45e50c905e90a11f4b73bc00f78">GAP_CONN_STATE_CONNECTED</a>))</div><div class="line">        {</div><div class="line">            T_LE_SRV_CFG *p_srv = ble_srv_find_by_srv_id(ble_audio_db.le_link[i].conn_handle,</div><div class="line">                                                         p_entry-&gt;service_id);</div><div class="line">            <span class="keywordflow">if</span> (p_srv != <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; (p_srv-&gt;cccd_cfg[0] &amp; update_cfg))</div><div class="line">            {</div><div class="line">                <span class="keywordflow">if</span> (tbs_send_notify(p_entry, ble_audio_db.le_link[i].conn_handle, attrib_idx, p_data,</div><div class="line">                                    data_len) == <span class="keyword">false</span>)</div><div class="line">                {</div><div class="line">                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line">                }</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga854e7b0227bc375a0f585bceba9ca547"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga854e7b0227bc375a0f585bceba9ca547">&#9670;&nbsp;</a></span>gatt_svc_find_char_index_by_uuid16()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t gatt_svc_find_char_index_by_uuid16 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_t___a_t_t_r_i_b___a_p_p_l.html">T_ATTRIB_APPL</a> *&#160;</td>
          <td class="paramname"><em>p_srv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>char_uuid16</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>attr_num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find service characteristic attribute index by uuid16. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_srv</td><td>Pointer to service table. <a class="el" href="struct_t___a_t_t_r_i_b___a_p_p_l.html">T_ATTRIB_APPL</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">char_uuid16</td><td>characteristic uuid16. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attr_num</td><td>Total attribute numer of service. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The characteristic attribute index. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>find service characteristic attribute index failed.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> mics_send_mute_value_notify(uint16_t conn_handle, uint8_t *p_mute_value)</div><div class="line">{</div><div class="line">    uint16_t attrib_idx = <a class="code" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#ga854e7b0227bc375a0f585bceba9ca547">gatt_svc_find_char_index_by_uuid16</a>(p_mics-&gt;p_mics_attr_tbl,</div><div class="line">                                                        <a class="code" href="group___m_i_c_s___u_u_i_d.html#gaf5e8f45f3c56c1100f23a36dfe89ec2d">MICS_UUID_CHAR_MUTE</a>,</div><div class="line">                                                        p_mics-&gt;attr_num);</div><div class="line">    <span class="keywordflow">return</span> <a class="code" href="group___b_t___g_a_t_t___s_e_r_v_i_c_e___exported___functions.html#ga5205fb9f2fa8f260cd62da5859a0a211">gatt_svc_send_data</a>(conn_handle, <a class="code" href="group___b_t___l_e___l2_c_a_p___f_i_x_e_d___c_i_d.html#gadab213b43c69fddca54722a2edcd393d">L2C_FIXED_CID_ATT</a>, p_mics-&gt;service_id,</div><div class="line">                                 attrib_idx,</div><div class="line">                                 p_mute_value,</div><div class="line">                                 1, <a class="code" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#ggadc8629288ad4dc04523014696c756e04a54d0b92a538dd91649ac58e51b188969">GATT_PDU_TYPE_NOTIFICATION</a>);</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->

<HR SIZE=5>
<font size="3" color="black">Copyright(c) 2020, <a href=" http://www.realtek.com.tw/"><font size="3" color="#6FB7B7"><b>Realtek Semiconductor Corporation</b></font></a>. All rights reserved.</font> 
