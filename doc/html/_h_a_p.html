<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BT AUDIO SDK: $title</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bbpro-h55px.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BT AUDIO SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,true,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="contents">
<div class="textblock"><p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
 </p>
<h1><a class="anchor" id="HAP_USER_MANU"></a>
HAP User Manual </h1>
<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
 </p><center><b>V1.1</b></center><p><br />
 </p><center><b>2024/03/06</b></center><div style="page-break-after: always;"></div><h2><a class="anchor" id="HAP_Revision_History"></a>
Revision History</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Version  </th><th class="markdownTableHeadCenter">Date  </th><th class="markdownTableHeadCenter">Description   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">V1.0  </td><td class="markdownTableBodyCenter">2024/01/11  </td><td class="markdownTableBodyCenter">Stable release   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">V1.1  </td><td class="markdownTableBodyCenter">2024/03/06  </td><td class="markdownTableBodyCenter">Optimize document content   </td></tr>
</table>
<div style="page-break-after: always;"></div><h2>Contents</h2>
<ul>
<li><a class="el" href="_h_a_p.html#HAP_Revision_History">Revision History</a></li>
<li><a class="el" href="_h_a_p.html#HAP_Table_List">Table List</a></li>
<li><a class="el" href="_h_a_p.html#HAP_Figure_List">Figure List</a></li>
<li><a class="el" href="_h_a_p.html#HAP_Glossary">Glossary</a></li>
<li><a class="el" href="_h_a_p.html#HAP_Intro">1 Introduction</a><ul>
<li><a class="el" href="_h_a_p.html#HAP_role">1.1 HAP Role</a></li>
</ul>
</li>
<li><a class="el" href="_h_a_p.html#HAS_Client_API">2 HAS Client API Introduction</a><ul>
<li><a class="el" href="_h_a_p.html#HAS_Client_Init">2.1 HAS Client Init</a></li>
<li><a class="el" href="_h_a_p.html#HAS_Config_CCCD">2.2 HAS Client Config CCCD</a></li>
<li><a class="el" href="_h_a_p.html#HAS_Client_Read">2.3 HAS Client Read</a><ul>
<li><a class="el" href="_h_a_p.html#HAS_Read_HA_Features">2.3.1 HAS Read Hearing Aid Features</a></li>
<li><a class="el" href="_h_a_p.html#HAS_Read_Active_Preset_Idx">2.3.1 HAS Read Active Preset Index</a></li>
</ul>
</li>
<li><a class="el" href="_h_a_p.html#HAS_Client_Control_Point">2.4 HAS Client Control Point</a><ul>
<li><a class="el" href="_h_a_p.html#HAS_CP_Read_Presets">2.4.1 HAS CP Read Presets</a></li>
<li><a class="el" href="_h_a_p.html#HAS_CP_Write_Preset_Name">2.4.2 HAS CP Write Preset Name</a></li>
<li><a class="el" href="_h_a_p.html#HAS_CP_Set_Active_Preset">2.4.3 HAS CP Set Active Preset</a></li>
<li><a class="el" href="_h_a_p.html#HAS_CP_Set_Next_Preset">2.4.4 HAS CP Set Next Preset</a></li>
<li><a class="el" href="_h_a_p.html#HAS_CP_Set_Previous_Preset">2.4.5 HAS CP Set Previous Preset</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="HAP_Table_List"></a>
Table List</h2>
<ul>
<li><a href="#table_1_1">Table 1-1 HAP Role</a></li>
</ul>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="HAP_Figure_List"></a>
Figure List</h2>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="HAP_Glossary"></a>
Glossary</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Terms  </th><th class="markdownTableHeadCenter">Definitions   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">HAP  </td><td class="markdownTableBodyCenter">Hearing Aid Profile   </td></tr>
</table>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="HAP_Intro"></a>
1 Introduction</h2>
<p>The purpose of the Hearing Access Profile (HAP) is to define the requirements for an interoperable experience for users of hearing aids and complementary products in the hearing aid ecosystem that use Bluetooth Low Energy (LE) Audio technology with the Isochronous Channels feature. <br />
</p>
<p>This document will introduce the use of HAP-related APIs to help users develop hearing aids products. <br />
</p>
<h3><a class="anchor" id="HAP_role"></a>
1.1 HAP Role</h3>
<p>HAP defines the following profile roles: <br />
</p>
<p><b>Hearing Aid (HA)</b>: The HA role is implemented in a hearing aid. <br />
</p>
<p><b>Hearing Aid Unicast Client (HAUC)</b>: The HAUC role is implemented in a device capable of sending and optionally receiving unicast audio data to/from a hearing aid in the HA role. <br />
</p>
<p><b>Hearing Aid Remote Controller (HARC)</b>: The HARC role is implemented in a device that controls volume levels of the different audio sources, mute state of a microphone, and presets of a hearing aid in the HA role. <br />
</p>
<p>Table 1-1 shows the conformance requirements for HAP roles with HAS Client role and HAS server role. <br />
 </p><center><div id="table_1_1"><b>Table 1-1 HAP role</b></div></center> <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">LE Audio Profile Role  </th><th class="markdownTableHeadCenter">HA  </th><th class="markdownTableHeadCenter">HAUC  </th><th class="markdownTableHeadCenter">HARC   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">HAS Client  </td><td class="markdownTableBodyCenter">X  </td><td class="markdownTableBodyCenter">X  </td><td class="markdownTableBodyCenter">Mandatory   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">HAS Server  </td><td class="markdownTableBodyCenter">Mandatory  </td><td class="markdownTableBodyCenter">X  </td><td class="markdownTableBodyCenter">X   </td></tr>
</table>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="HAS_Client_API"></a>
2 HAS Client API Introduction</h2>
<p>This chapter describes the <b>HAS client API definition</b>. <br />
</p>
<h3><a class="anchor" id="HAS_Client_Init"></a>
2.1 HAS Client Init</h3>
<p>This API is used to initialize the HAS client. <br />
</p>
<p>bool <a class="el" href="group___h_a_p___client___exported___functions.html#ga40fe1f421e00fa7d596938e6dca24944" title="Initialize HAS client. ">has_client_init()</a> <br />
</p>
<p>Application can call the API ble_audio_cback_register to register HAS client callback function to handle HAS client messages. <br />
 </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> app_lea_profile_init(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___l_e_a___l_i_b___exported___functions.html#gae459ea2b839f0a662f20d69aaac0013f">ble_audio_cback_register</a>(has_client_ts_handle_msg);</div><div class="line">    <a class="code" href="group___h_a_p___client___exported___functions.html#ga40fe1f421e00fa7d596938e6dca24944">has_client_init</a>();</div><div class="line">}</div></div><!-- fragment --><h3><a class="anchor" id="HAS_Config_CCCD"></a>
2.2 HAS Client Config CCCD</h3>
<p>This API is used to configure HAS service CCCD value. <br />
</p>
<p>void <a class="el" href="group___h_a_p___client___exported___functions.html#gacc28fd4a35ee3bce1777e65fbc4135de" title="Configure HAS CCCD. ">has_cfg_cccd()</a> <br />
</p>
<p>When handle the message LE_AUDIO_MSG_HAS_CLIENT_DIS_DONE, application can get the features that remote HAS server supported. According to the features, application can configure the cccd by calling has_cfg_cccd. <br />
 </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> app_lea_profile_init(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___l_e_a___l_i_b___exported___functions.html#gae459ea2b839f0a662f20d69aaac0013f">ble_audio_cback_register</a>(has_client_ts_handle_msg);</div><div class="line">    <a class="code" href="group___h_a_p___client___exported___functions.html#ga40fe1f421e00fa7d596938e6dca24944">has_client_init</a>();</div><div class="line">}</div><div class="line">uint16_t has_client_ts_handle_msg(<a class="code" href="group___l_e_a___l_i_b___exported___types.html#gabe1a2e587cdc57dc5de8e141de5d1b0b">T_LE_AUDIO_MSG</a> msg, <span class="keywordtype">void</span> *buf)</div><div class="line">{</div><div class="line">    uint16_t cb_result = <a class="code" href="group___b_l_e___a_u_d_i_o___c_b___r_e_s_u_l_t.html#ga6e0271af8429c63c2b6f3226948c14d5">BLE_AUDIO_CB_RESULT_SUCCESS</a>;</div><div class="line"></div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___l_e_a___l_i_b___exported___types.html#ggabe1a2e587cdc57dc5de8e141de5d1b0bafeed975f4edba9cf4a260ed2b809d3fa">LE_AUDIO_MSG_HAS_CLIENT_DIS_DONE</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___d_i_s___d_o_n_e.html">T_HAS_CLIENT_DIS_DONE</a> *p_data = (<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___d_i_s___d_o_n_e.html">T_HAS_CLIENT_DIS_DONE</a> *)buf;</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___d_i_s___d_o_n_e.html#aaf193e77dc196e79c86a8bc0384d3b1a">is_found</a>)</div><div class="line">            {</div><div class="line">                uint16_t cfg_flags = 0;</div><div class="line"></div><div class="line">                <span class="keywordflow">if</span> (p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___d_i_s___d_o_n_e.html#a386c729b94544bd6986f9eac37266aac">is_ha_features_notify_support</a>)</div><div class="line">                {</div><div class="line">                    cfg_flags |= <a class="code" href="group___h_a_s___c_f_g___f_l_a_g_s.html#ga7fb29758720f9a230e09a4974dd7f578">HAS_HEARING_AID_FEATURE_FLAG</a>;</div><div class="line">                }</div><div class="line">                <span class="keywordflow">if</span> (p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___d_i_s___d_o_n_e.html#aede509d2d497fe8d607c9d6b5468197a">is_ha_cp_exist</a>)</div><div class="line">                {</div><div class="line">                    cfg_flags |= <a class="code" href="group___h_a_s___c_f_g___f_l_a_g_s.html#ga1590d8d1296b5e01db1df01c13fb048e">HAS_HEARING_AID_PRESET_CP_FLAG</a>;</div><div class="line">                    cfg_flags |= <a class="code" href="group___h_a_s___c_f_g___f_l_a_g_s.html#gac58a1e3e1e7d74c193b91fd773b01ec9">HAS_ACTIVE_PRESET_IDX_FLAG</a>;</div><div class="line">                }</div><div class="line"></div><div class="line">                <a class="code" href="group___h_a_p___client___exported___functions.html#gacc28fd4a35ee3bce1777e65fbc4135de">has_cfg_cccd</a>(p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___d_i_s___d_o_n_e.html#a0d5ffe38d68e48d81e61fc6a4999ae68">conn_handle</a>, cfg_flags, <span class="keyword">true</span>);</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h3><a class="anchor" id="HAS_Client_Read"></a>
2.3 HAS Client Read</h3>
<p>Application can call APIs to read HAS service characteristic value. <br />
 </p>
<h4><a class="anchor" id="HAS_Read_HA_Features"></a>
2.3.1 HAS Read Hearing Aid Features</h4>
<p>Application can read the hearing aid features by calling the API has_read_ha_features. <br />
</p>
<p>bool <a class="el" href="group___h_a_p___client___exported___functions.html#ga62e9296226f7209056ced977195ca269" title="Read hearing aid features. ">has_read_ha_features()</a> <br />
</p>
<p>If the read procedure is completed, the message LE_AUDIO_MSG_HAS_CLIENT_READ_HA_FEATURES_RESULT will be sent to application. <br />
 </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> test(uint16_t conn_handle)</div><div class="line">{</div><div class="line">    <a class="code" href="group___h_a_p___client___exported___functions.html#ga62e9296226f7209056ced977195ca269">has_read_ha_features</a>(conn_handle);</div><div class="line">}</div><div class="line"></div><div class="line">uint16_t has_client_ts_handle_msg(<a class="code" href="group___l_e_a___l_i_b___exported___types.html#gabe1a2e587cdc57dc5de8e141de5d1b0b">T_LE_AUDIO_MSG</a> msg, <span class="keywordtype">void</span> *buf)</div><div class="line">{</div><div class="line">    uint16_t cb_result = <a class="code" href="group___b_l_e___a_u_d_i_o___c_b___r_e_s_u_l_t.html#ga6e0271af8429c63c2b6f3226948c14d5">BLE_AUDIO_CB_RESULT_SUCCESS</a>;</div><div class="line"></div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___l_e_a___l_i_b___exported___types.html#ggabe1a2e587cdc57dc5de8e141de5d1b0baca69af9caaca83b96ef75c016763ff50">LE_AUDIO_MSG_HAS_CLIENT_READ_HA_FEATURES_RESULT</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___r_e_a_d___h_a___f_e_a_t_u_r_e_s___r_e_s_u_l_t.html">T_HAS_CLIENT_READ_HA_FEATURES_RESULT</a> *p_data = (<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___r_e_a_d___h_a___f_e_a_t_u_r_e_s___r_e_s_u_l_t.html">T_HAS_CLIENT_READ_HA_FEATURES_RESULT</a> *)buf;</div><div class="line">            <a class="code" href="group___t_r_a_c_e.html#ga98e2dee240d2fde3119d3380b4d98762">APP_PRINT_INFO3</a>(<span class="stringliteral">&quot;LE_AUDIO_MSG_HAS_CLIENT_READ_HA_FEATURES_RESULT: hearing aid features 0x%x, conn_handle 0x%x, cause 0x%x&quot;</span>,</div><div class="line">                            p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___r_e_a_d___h_a___f_e_a_t_u_r_e_s___r_e_s_u_l_t.html#a9b94585ef25a05b2d9afc68880cd725b">has_feature</a>, p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___r_e_a_d___h_a___f_e_a_t_u_r_e_s___r_e_s_u_l_t.html#a0d5ffe38d68e48d81e61fc6a4999ae68">conn_handle</a>, p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___r_e_a_d___h_a___f_e_a_t_u_r_e_s___r_e_s_u_l_t.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h4><a class="anchor" id="HAS_Read_Active_Preset_Idx"></a>
2.3.1 HAS Read Active Preset Index</h4>
<p>Application can read the active preset index by calling the API has_read_active_preset_idx. <br />
</p>
<p>bool <a class="el" href="group___h_a_p___client___exported___functions.html#ga4df1973eee9a0ba781ccdcd842f94f57" title="Read active preset index. ">has_read_active_preset_idx()</a> <br />
</p>
<p>If the read procedure is completed, the message LE_AUDIO_MSG_HAS_CLIENT_READ_ACTIVE_PRESET_IDX_RESULT will be sent to application. <br />
 </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> test(uint16_t conn_handle)</div><div class="line">{</div><div class="line">    <a class="code" href="group___h_a_p___client___exported___functions.html#ga4df1973eee9a0ba781ccdcd842f94f57">has_read_active_preset_idx</a>(conn_handle);</div><div class="line">}</div><div class="line"></div><div class="line">uint16_t has_client_ts_handle_msg(<a class="code" href="group___l_e_a___l_i_b___exported___types.html#gabe1a2e587cdc57dc5de8e141de5d1b0b">T_LE_AUDIO_MSG</a> msg, <span class="keywordtype">void</span> *buf)</div><div class="line">{</div><div class="line">    uint16_t cb_result = <a class="code" href="group___b_l_e___a_u_d_i_o___c_b___r_e_s_u_l_t.html#ga6e0271af8429c63c2b6f3226948c14d5">BLE_AUDIO_CB_RESULT_SUCCESS</a>;</div><div class="line"></div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___l_e_a___l_i_b___exported___types.html#ggabe1a2e587cdc57dc5de8e141de5d1b0baf8eb3186e9f8ecf5bba78f154354db1f">LE_AUDIO_MSG_HAS_CLIENT_READ_ACTIVE_PRESET_IDX_RESULT</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___r_e_a_d___a_c_t_i_v_e___p_r_e_s_e_t___i_d_x___r_e_s_u_l_t.html">T_HAS_CLIENT_READ_ACTIVE_PRESET_IDX_RESULT</a> *p_data = (<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___r_e_a_d___a_c_t_i_v_e___p_r_e_s_e_t___i_d_x___r_e_s_u_l_t.html">T_HAS_CLIENT_READ_ACTIVE_PRESET_IDX_RESULT</a> *)</div><div class="line">                                                                  buf;</div><div class="line">            <a class="code" href="group___t_r_a_c_e.html#ga98e2dee240d2fde3119d3380b4d98762">APP_PRINT_INFO3</a>(<span class="stringliteral">&quot;LE_AUDIO_MSG_HAS_CLIENT_READ_ACTIVE_PRESET_IDX_RESULT: conn_handle 0x%x, cause 0x%x, active preset idx 0x%x&quot;</span>,</div><div class="line">                            p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___r_e_a_d___a_c_t_i_v_e___p_r_e_s_e_t___i_d_x___r_e_s_u_l_t.html#a0d5ffe38d68e48d81e61fc6a4999ae68">conn_handle</a>,</div><div class="line">                            p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___r_e_a_d___a_c_t_i_v_e___p_r_e_s_e_t___i_d_x___r_e_s_u_l_t.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>,</div><div class="line">                            p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___r_e_a_d___a_c_t_i_v_e___p_r_e_s_e_t___i_d_x___r_e_s_u_l_t.html#a41169d93b0f656e35993189eb0b6bd0e">active_preset_idx</a>);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h3><a class="anchor" id="HAS_Client_Control_Point"></a>
2.4 HAS Client Control Point</h3>
<p>The application can call APIs to trigger the hearing aid control point operations. <br />
 </p>
<h4><a class="anchor" id="HAS_CP_Read_Presets"></a>
2.4.1 HAS CP Read Presets</h4>
<p>Application can write the hearing aid control point characteristic value with Read Presets Request opcode by calling the API has_cp_read_presets. <br />
</p>
<p>bool <a class="el" href="group___h_a_p___client___exported___functions.html#ga57e37c2ea13b20115079c77bfd4e144c" title="Write read presets control point. ">has_cp_read_presets()</a> <br />
</p>
<p>If the write procedure is completed, the message LE_AUDIO_MSG_HAS_CLIENT_CP_RESULT will be sent to application. <br />
</p>
<p>Then, the HAS server will send read preset response notifications or indications to client. When client receives these notifications or indications, the message LE_AUDIO_MSG_HAS_CLIENT_CP_NOTIFY_IND_DATA will be sent to application with the opcode HAS_CP_OP_READ_PRESET_RSP. <br />
 </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> test(uint16_t conn_handle, uint8_t start_preset_idx, uint8_t preset_num)</div><div class="line">{</div><div class="line">    <a class="code" href="group___h_a_p___client___exported___functions.html#ga57e37c2ea13b20115079c77bfd4e144c">has_cp_read_presets</a>(conn_handle, start_preset_idx, preset_num);</div><div class="line">}</div><div class="line"></div><div class="line">uint16_t has_client_ts_handle_msg(<a class="code" href="group___l_e_a___l_i_b___exported___types.html#gabe1a2e587cdc57dc5de8e141de5d1b0b">T_LE_AUDIO_MSG</a> msg, <span class="keywordtype">void</span> *buf)</div><div class="line">{</div><div class="line">    uint16_t cb_result = <a class="code" href="group___b_l_e___a_u_d_i_o___c_b___r_e_s_u_l_t.html#ga6e0271af8429c63c2b6f3226948c14d5">BLE_AUDIO_CB_RESULT_SUCCESS</a>;</div><div class="line"></div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___l_e_a___l_i_b___exported___types.html#ggabe1a2e587cdc57dc5de8e141de5d1b0ba8bc535acfa9ddd89b5bfb8419e5e1633">LE_AUDIO_MSG_HAS_CLIENT_CP_RESULT</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___r_e_s_u_l_t.html">T_HAS_CLIENT_CP_RESULT</a> *p_data = (<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___r_e_s_u_l_t.html">T_HAS_CLIENT_CP_RESULT</a> *)buf;</div><div class="line">            <a class="code" href="group___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;LE_AUDIO_MSG_HAS_CLIENT_CP_RESULT: conn_handle 0x%x, cause 0x%x&quot;</span>,</div><div class="line">                            p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___r_e_s_u_l_t.html#a0d5ffe38d68e48d81e61fc6a4999ae68">conn_handle</a>, p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___r_e_s_u_l_t.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___l_e_a___l_i_b___exported___types.html#ggabe1a2e587cdc57dc5de8e141de5d1b0ba2f1b2714ad5369ae117945e1b6e271c7">LE_AUDIO_MSG_HAS_CLIENT_CP_NOTIFY_IND_DATA</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html">T_HAS_CLIENT_CP_NOTIFY_IND_DATA</a> *p_data = (<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html">T_HAS_CLIENT_CP_NOTIFY_IND_DATA</a> *)buf;</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a48311926dc475cb834a9021494ed3cc3">notify</a>)</div><div class="line">            {</div><div class="line">                <a class="code" href="group___t_r_a_c_e.html#ga5d77ab23ef056676a6860b9959404140">APP_PRINT_INFO0</a>(<span class="stringliteral">&quot;LE_AUDIO_MSG_HAS_CLIENT_CP_NOTIFY_IND_DATA: has send cp notification&quot;</span>);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                <a class="code" href="group___t_r_a_c_e.html#ga5d77ab23ef056676a6860b9959404140">APP_PRINT_INFO0</a>(<span class="stringliteral">&quot;LE_AUDIO_MSG_HAS_CLIENT_CP_NOTIFY_IND_DATA: has send cp indication&quot;</span>);</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a4b09deae3f65d69f8bfed76afdae27fa">cp_data</a>.<a class="code" href="struct_t___h_a_s___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a4c04fc380ca4f89a12164d51753ff594">cp_op</a> == <a class="code" href="group___h_a_p___def___exported___types.html#ggaca3d69e0b9c127e420bda927d96693d5a16171b21aed584edf13009deb7f83bd2">HAS_CP_OP_READ_PRESET_RSP</a>)</div><div class="line">            {</div><div class="line">                <a class="code" href="group___t_r_a_c_e.html#ga9a333df08413dee3d9e1a88f2993e141">APP_PRINT_INFO4</a>(<span class="stringliteral">&quot;HAS_CP_OP_READ_PRESET_RSP: is_last 0x%x, idx 0x%x, properties 0x%x, name %s&quot;</span>,</div><div class="line">                                p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a4b09deae3f65d69f8bfed76afdae27fa">cp_data</a>.<a class="code" href="struct_t___h_a_s___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a390cc918a9c5e4e228cb5a679f28058b">is_last</a>,</div><div class="line">                                p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a4b09deae3f65d69f8bfed76afdae27fa">cp_data</a>.<a class="code" href="struct_t___h_a_s___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#ab8a0c21e6d3694d84ac3f4b0c7d4f168">preset</a>.<a class="code" href="struct_t___h_a_s___p_r_e_s_e_t___f_o_r_m_a_t.html#aae5a12e607d0f782506d9e6ec6179c64">index</a>,</div><div class="line">                                p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a4b09deae3f65d69f8bfed76afdae27fa">cp_data</a>.<a class="code" href="struct_t___h_a_s___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#ab8a0c21e6d3694d84ac3f4b0c7d4f168">preset</a>.<a class="code" href="struct_t___h_a_s___p_r_e_s_e_t___f_o_r_m_a_t.html#a9186ef511fa792a0dec18079d57071ef">properties</a>,</div><div class="line">                                <a class="code" href="group___t_r_a_c_e.html#ga78c7b103f1c05e69c26a3b5d615de7e8">TRACE_STRING</a>(p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a4b09deae3f65d69f8bfed76afdae27fa">cp_data</a>.<a class="code" href="struct_t___h_a_s___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#ab8a0c21e6d3694d84ac3f4b0c7d4f168">preset</a>.<a class="code" href="struct_t___h_a_s___p_r_e_s_e_t___f_o_r_m_a_t.html#aa9fa5fd0730c26ffb779248b47c2519b">p_name</a>));</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h4><a class="anchor" id="HAS_CP_Write_Preset_Name"></a>
2.4.2 HAS CP Write Preset Name</h4>
<p>Application can write the hearing aid control point characteristic value with Write Preset Name opcode by calling the API has_cp_write_preset_name. <br />
</p>
<p>bool <a class="el" href="group___h_a_p___client___exported___functions.html#ga6165c4c97abe74323a0aed4b5e6dc0d2" title="Send write preset name control point. ">has_cp_write_preset_name()</a> <br />
</p>
<p>If the write procedure is completed, the message LE_AUDIO_MSG_HAS_CLIENT_CP_RESULT will be sent to application. <br />
</p>
<p>Then, the HAS server will send preset changed notification or indication to client. When client receives the preset changed notification or indication, the message LE_AUDIO_MSG_HAS_CLIENT_CP_NOTIFY_IND_DATA will be sent to application with the opcode HAS_CP_OP_PRESET_CHANGED. <br />
 </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> test(uint16_t conn_handle, uint8_t preset_idx,</div><div class="line">          uint8_t name_len, <span class="keywordtype">char</span> *p_name)</div><div class="line">{</div><div class="line">    <a class="code" href="group___h_a_p___client___exported___functions.html#ga6165c4c97abe74323a0aed4b5e6dc0d2">has_cp_write_preset_name</a>(conn_handle, preset_idx, name_len, p_name);</div><div class="line">}</div><div class="line"></div><div class="line">uint16_t has_client_ts_handle_msg(<a class="code" href="group___l_e_a___l_i_b___exported___types.html#gabe1a2e587cdc57dc5de8e141de5d1b0b">T_LE_AUDIO_MSG</a> msg, <span class="keywordtype">void</span> *buf)</div><div class="line">{</div><div class="line">    uint16_t cb_result = <a class="code" href="group___b_l_e___a_u_d_i_o___c_b___r_e_s_u_l_t.html#ga6e0271af8429c63c2b6f3226948c14d5">BLE_AUDIO_CB_RESULT_SUCCESS</a>;</div><div class="line"></div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___l_e_a___l_i_b___exported___types.html#ggabe1a2e587cdc57dc5de8e141de5d1b0ba8bc535acfa9ddd89b5bfb8419e5e1633">LE_AUDIO_MSG_HAS_CLIENT_CP_RESULT</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___r_e_s_u_l_t.html">T_HAS_CLIENT_CP_RESULT</a> *p_data = (<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___r_e_s_u_l_t.html">T_HAS_CLIENT_CP_RESULT</a> *)buf;</div><div class="line">            <a class="code" href="group___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;LE_AUDIO_MSG_HAS_CLIENT_CP_RESULT: conn_handle 0x%x, cause 0x%x&quot;</span>,</div><div class="line">                            p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___r_e_s_u_l_t.html#a0d5ffe38d68e48d81e61fc6a4999ae68">conn_handle</a>, p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___r_e_s_u_l_t.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___l_e_a___l_i_b___exported___types.html#ggabe1a2e587cdc57dc5de8e141de5d1b0ba2f1b2714ad5369ae117945e1b6e271c7">LE_AUDIO_MSG_HAS_CLIENT_CP_NOTIFY_IND_DATA</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html">T_HAS_CLIENT_CP_NOTIFY_IND_DATA</a> *p_data = (<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html">T_HAS_CLIENT_CP_NOTIFY_IND_DATA</a> *)buf;</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a48311926dc475cb834a9021494ed3cc3">notify</a>)</div><div class="line">            {</div><div class="line">                <a class="code" href="group___t_r_a_c_e.html#ga5d77ab23ef056676a6860b9959404140">APP_PRINT_INFO0</a>(<span class="stringliteral">&quot;LE_AUDIO_MSG_HAS_CLIENT_CP_NOTIFY_IND_DATA: has send cp notification&quot;</span>);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                <a class="code" href="group___t_r_a_c_e.html#ga5d77ab23ef056676a6860b9959404140">APP_PRINT_INFO0</a>(<span class="stringliteral">&quot;LE_AUDIO_MSG_HAS_CLIENT_CP_NOTIFY_IND_DATA: has send cp indication&quot;</span>);</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a4b09deae3f65d69f8bfed76afdae27fa">cp_data</a>.<a class="code" href="struct_t___h_a_s___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a4c04fc380ca4f89a12164d51753ff594">cp_op</a> == <a class="code" href="group___h_a_p___def___exported___types.html#ggaca3d69e0b9c127e420bda927d96693d5ad716b3b045da3683878a300e04497b9a">HAS_CP_OP_PRESET_CHANGED</a>)</div><div class="line">            {</div><div class="line">                <span class="keywordflow">switch</span> (p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a4b09deae3f65d69f8bfed76afdae27fa">cp_data</a>.<a class="code" href="struct_t___h_a_s___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#af1d525a57ffc15f83d06f0e2375c7c8e">change_id</a>)</div><div class="line">                {</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="group___h_a_p___def___exported___types.html#gga222141e1098018afdb53fd7a53d901bea2f3af46880939e831d2b53575e37b7b4">GENERIC_UPDATE</a>:</div><div class="line">                    {</div><div class="line">                        <a class="code" href="group___t_r_a_c_e.html#ga76eac5d2f173d1e601bd9d2bd4a4d809">APP_PRINT_INFO6</a>(<span class="stringliteral">&quot;HAS_CP_OP_PRESET_CHANGED: change_id 0x%x, is_last 0x%x, pre_idx 0x%x, idx 0x%x, properties 0x%x, name %s&quot;</span>,</div><div class="line">                                        p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a4b09deae3f65d69f8bfed76afdae27fa">cp_data</a>.<a class="code" href="struct_t___h_a_s___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#af1d525a57ffc15f83d06f0e2375c7c8e">change_id</a>,</div><div class="line">                                        p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a4b09deae3f65d69f8bfed76afdae27fa">cp_data</a>.<a class="code" href="struct_t___h_a_s___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a390cc918a9c5e4e228cb5a679f28058b">is_last</a>,</div><div class="line">                                        p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a4b09deae3f65d69f8bfed76afdae27fa">cp_data</a>.<a class="code" href="struct_t___h_a_s___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a8c948185f969e5c05542428bf4f432c1">pre_idx</a>,</div><div class="line">                                        p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a4b09deae3f65d69f8bfed76afdae27fa">cp_data</a>.<a class="code" href="struct_t___h_a_s___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#ab8a0c21e6d3694d84ac3f4b0c7d4f168">preset</a>.<a class="code" href="struct_t___h_a_s___p_r_e_s_e_t___f_o_r_m_a_t.html#aae5a12e607d0f782506d9e6ec6179c64">index</a>,</div><div class="line">                                        p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a4b09deae3f65d69f8bfed76afdae27fa">cp_data</a>.<a class="code" href="struct_t___h_a_s___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#ab8a0c21e6d3694d84ac3f4b0c7d4f168">preset</a>.<a class="code" href="struct_t___h_a_s___p_r_e_s_e_t___f_o_r_m_a_t.html#a9186ef511fa792a0dec18079d57071ef">properties</a>,</div><div class="line">                                        <a class="code" href="group___t_r_a_c_e.html#ga78c7b103f1c05e69c26a3b5d615de7e8">TRACE_STRING</a>(p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a4b09deae3f65d69f8bfed76afdae27fa">cp_data</a>.<a class="code" href="struct_t___h_a_s___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#ab8a0c21e6d3694d84ac3f4b0c7d4f168">preset</a>.<a class="code" href="struct_t___h_a_s___p_r_e_s_e_t___f_o_r_m_a_t.html#aa9fa5fd0730c26ffb779248b47c2519b">p_name</a>));</div><div class="line">                    }</div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="group___h_a_p___def___exported___types.html#gga222141e1098018afdb53fd7a53d901bea5d4c515faed17eb1b73a19ce498606a1">PRESET_RECORD_DELETED</a>:</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="group___h_a_p___def___exported___types.html#gga222141e1098018afdb53fd7a53d901beae4cb792bac54e820d1e9dfb5a93e82f6">PRESET_RECORD_AVAILABLE</a>:</div><div class="line">                <span class="keywordflow">case</span> <a class="code" href="group___h_a_p___def___exported___types.html#gga222141e1098018afdb53fd7a53d901beac0cee18416f2ea3319f2bad3891addd1">PRESET_RECORD_UNAVAILABLE</a>:</div><div class="line">                    {</div><div class="line">                        <a class="code" href="group___t_r_a_c_e.html#ga98e2dee240d2fde3119d3380b4d98762">APP_PRINT_INFO3</a>(<span class="stringliteral">&quot;HAS_CP_OP_PRESET_CHANGED: change_id 0x%x, is_last 0x%x, idx 0x%x&quot;</span>,</div><div class="line">                                        p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a4b09deae3f65d69f8bfed76afdae27fa">cp_data</a>.<a class="code" href="struct_t___h_a_s___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#af1d525a57ffc15f83d06f0e2375c7c8e">change_id</a>,</div><div class="line">                                        p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a4b09deae3f65d69f8bfed76afdae27fa">cp_data</a>.<a class="code" href="struct_t___h_a_s___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a390cc918a9c5e4e228cb5a679f28058b">is_last</a>,</div><div class="line">                                        p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#a4b09deae3f65d69f8bfed76afdae27fa">cp_data</a>.<a class="code" href="struct_t___h_a_s___c_p___n_o_t_i_f_y___i_n_d___d_a_t_a.html#ab8a0c21e6d3694d84ac3f4b0c7d4f168">preset</a>.<a class="code" href="struct_t___h_a_s___p_r_e_s_e_t___f_o_r_m_a_t.html#aae5a12e607d0f782506d9e6ec6179c64">index</a>);</div><div class="line">                    }</div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">                <span class="keywordflow">default</span>:</div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line">                }</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h4><a class="anchor" id="HAS_CP_Set_Active_Preset"></a>
2.4.3 HAS CP Set Active Preset</h4>
<p>Application can call the API has_cp_set_active_preset to set the active preset. If the parameter is_sync_local is false, the Set Active Preset opcode will be written to the Hearing Aid Preset Control Point characteristic. Otherwise, the Set Active Preset - Synchronized Locally opcode will be written to the Hearing Aid Preset Control Point characteristic. <br />
</p>
<p>bool <a class="el" href="group___h_a_p___client___exported___functions.html#ga2bf59dad9bf9ed5ab97d7c2b6db58ae4" title="Write set active preset control point. ">has_cp_set_active_preset()</a> <br />
</p>
<p>If the write procedure is completed, the message LE_AUDIO_MSG_HAS_CLIENT_CP_RESULT will be sent to application. <br />
</p>
<p>If this operation causes the value of the Active Preset Index characteristic to change, the HAS server will send active preset index notification to client. When client receives the active preset index notification, the message LE_AUDIO_MSG_HAS_CLIENT_ACTIVE_PRESET_IDX_NOTIFY will be sent to application. <br />
 </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> test(uint16_t conn_handle, uint8_t preset_idx, <span class="keywordtype">bool</span> is_sync_local)</div><div class="line">{</div><div class="line">    <a class="code" href="group___h_a_p___client___exported___functions.html#ga2bf59dad9bf9ed5ab97d7c2b6db58ae4">has_cp_set_active_preset</a>(conn_handle, preset_idx, is_sync_local);</div><div class="line">}</div><div class="line"></div><div class="line">uint16_t has_client_ts_handle_msg(<a class="code" href="group___l_e_a___l_i_b___exported___types.html#gabe1a2e587cdc57dc5de8e141de5d1b0b">T_LE_AUDIO_MSG</a> msg, <span class="keywordtype">void</span> *buf)</div><div class="line">{</div><div class="line">    uint16_t cb_result = <a class="code" href="group___b_l_e___a_u_d_i_o___c_b___r_e_s_u_l_t.html#ga6e0271af8429c63c2b6f3226948c14d5">BLE_AUDIO_CB_RESULT_SUCCESS</a>;</div><div class="line"></div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___l_e_a___l_i_b___exported___types.html#ggabe1a2e587cdc57dc5de8e141de5d1b0ba8bc535acfa9ddd89b5bfb8419e5e1633">LE_AUDIO_MSG_HAS_CLIENT_CP_RESULT</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___r_e_s_u_l_t.html">T_HAS_CLIENT_CP_RESULT</a> *p_data = (<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___r_e_s_u_l_t.html">T_HAS_CLIENT_CP_RESULT</a> *)buf;</div><div class="line">            <a class="code" href="group___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;LE_AUDIO_MSG_HAS_CLIENT_CP_RESULT: conn_handle 0x%x, cause 0x%x&quot;</span>,</div><div class="line">                            p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___r_e_s_u_l_t.html#a0d5ffe38d68e48d81e61fc6a4999ae68">conn_handle</a>, p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___r_e_s_u_l_t.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___l_e_a___l_i_b___exported___types.html#ggabe1a2e587cdc57dc5de8e141de5d1b0bad7b602c14cfdc0736b1ebbca900ba263">LE_AUDIO_MSG_HAS_CLIENT_ACTIVE_PRESET_IDX_NOTIFY</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___a_c_t_i_v_e___p_r_e_s_e_t___i_d_x___n_o_t_i_f_y.html">T_HAS_CLIENT_ACTIVE_PRESET_IDX_NOTIFY</a> *p_data = (<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___a_c_t_i_v_e___p_r_e_s_e_t___i_d_x___n_o_t_i_f_y.html">T_HAS_CLIENT_ACTIVE_PRESET_IDX_NOTIFY</a> *)buf;</div><div class="line">            <a class="code" href="group___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;LE_AUDIO_MSG_HAS_CLIENT_ACTIVE_PRESET_IDX_NOTIFY: conn_handle 0x%x, active_preset_idx 0x%x&quot;</span>,</div><div class="line">                            p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___a_c_t_i_v_e___p_r_e_s_e_t___i_d_x___n_o_t_i_f_y.html#a0d5ffe38d68e48d81e61fc6a4999ae68">conn_handle</a>,</div><div class="line">                            p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___a_c_t_i_v_e___p_r_e_s_e_t___i_d_x___n_o_t_i_f_y.html#a41169d93b0f656e35993189eb0b6bd0e">active_preset_idx</a>);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h4><a class="anchor" id="HAS_CP_Set_Next_Preset"></a>
2.4.4 HAS CP Set Next Preset</h4>
<p>Application can call the API has_cp_set_next_preset to set the next preset record in the server's list of preset records as the active preset. If the parameter is_sync_local is false, the Set Next Preset opcode will be written to the Hearing Aid Preset Control Point characteristic. Otherwise, the Set Next Preset - Synchronized Locally opcode will be written to the Hearing Aid Preset Control Point characteristic. <br />
</p>
<p>bool <a class="el" href="group___h_a_p___client___exported___functions.html#gadd4dbee65370c6d841bcc423015d9f9e" title="Write set next active preset control point. ">has_cp_set_next_preset()</a> <br />
</p>
<p>If the write procedure is completed, the message LE_AUDIO_MSG_HAS_CLIENT_CP_RESULT will be sent to application. <br />
</p>
<p>If this operation causes the value of the Active Preset Index characteristic to change, the HAS server will send active preset index notification to client. When client receives the active preset index notification, the message LE_AUDIO_MSG_HAS_CLIENT_ACTIVE_PRESET_IDX_NOTIFY will be sent to application. <br />
 </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> test(uint16_t conn_handle, <span class="keywordtype">bool</span> is_sync_local)</div><div class="line">{</div><div class="line">    <a class="code" href="group___h_a_p___client___exported___functions.html#gadd4dbee65370c6d841bcc423015d9f9e">has_cp_set_next_preset</a>(conn_handle, is_sync_local);</div><div class="line">}</div><div class="line"></div><div class="line">uint16_t has_client_ts_handle_msg(<a class="code" href="group___l_e_a___l_i_b___exported___types.html#gabe1a2e587cdc57dc5de8e141de5d1b0b">T_LE_AUDIO_MSG</a> msg, <span class="keywordtype">void</span> *buf)</div><div class="line">{</div><div class="line">    uint16_t cb_result = <a class="code" href="group___b_l_e___a_u_d_i_o___c_b___r_e_s_u_l_t.html#ga6e0271af8429c63c2b6f3226948c14d5">BLE_AUDIO_CB_RESULT_SUCCESS</a>;</div><div class="line"></div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___l_e_a___l_i_b___exported___types.html#ggabe1a2e587cdc57dc5de8e141de5d1b0ba8bc535acfa9ddd89b5bfb8419e5e1633">LE_AUDIO_MSG_HAS_CLIENT_CP_RESULT</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___r_e_s_u_l_t.html">T_HAS_CLIENT_CP_RESULT</a> *p_data = (<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___r_e_s_u_l_t.html">T_HAS_CLIENT_CP_RESULT</a> *)buf;</div><div class="line">            <a class="code" href="group___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;LE_AUDIO_MSG_HAS_CLIENT_CP_RESULT: conn_handle 0x%x, cause 0x%x&quot;</span>,</div><div class="line">                            p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___r_e_s_u_l_t.html#a0d5ffe38d68e48d81e61fc6a4999ae68">conn_handle</a>, p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___r_e_s_u_l_t.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___l_e_a___l_i_b___exported___types.html#ggabe1a2e587cdc57dc5de8e141de5d1b0bad7b602c14cfdc0736b1ebbca900ba263">LE_AUDIO_MSG_HAS_CLIENT_ACTIVE_PRESET_IDX_NOTIFY</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___a_c_t_i_v_e___p_r_e_s_e_t___i_d_x___n_o_t_i_f_y.html">T_HAS_CLIENT_ACTIVE_PRESET_IDX_NOTIFY</a> *p_data = (<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___a_c_t_i_v_e___p_r_e_s_e_t___i_d_x___n_o_t_i_f_y.html">T_HAS_CLIENT_ACTIVE_PRESET_IDX_NOTIFY</a> *)buf;</div><div class="line">            <a class="code" href="group___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;LE_AUDIO_MSG_HAS_CLIENT_ACTIVE_PRESET_IDX_NOTIFY: conn_handle 0x%x, active_preset_idx 0x%x&quot;</span>,</div><div class="line">                            p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___a_c_t_i_v_e___p_r_e_s_e_t___i_d_x___n_o_t_i_f_y.html#a0d5ffe38d68e48d81e61fc6a4999ae68">conn_handle</a>,</div><div class="line">                            p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___a_c_t_i_v_e___p_r_e_s_e_t___i_d_x___n_o_t_i_f_y.html#a41169d93b0f656e35993189eb0b6bd0e">active_preset_idx</a>);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h4><a class="anchor" id="HAS_CP_Set_Previous_Preset"></a>
2.4.5 HAS CP Set Previous Preset</h4>
<p>Application can call the API has_cp_set_previous_preset to set the previous preset record in the server's list of preset records as the active preset. If the parameter is_sync_local is false, the Set Previous Preset opcode will be written to the Hearing Aid Preset Control Point characteristic. Otherwise, the Set Previous Preset - Synchronized Locally opcode will be written to the Hearing Aid Preset Control Point characteristic. <br />
</p>
<p>bool <a class="el" href="group___h_a_p___client___exported___functions.html#gaacac9dad0b759ede123147a937436068" title="Write set previous active preset control point. ">has_cp_set_previous_preset()</a> <br />
</p>
<p>If the write procedure is completed, the message LE_AUDIO_MSG_HAS_CLIENT_CP_RESULT will be sent to application. <br />
</p>
<p>If this operation causes the value of the Active Preset Index characteristic to change, the HAS server will send active preset index notification to client. When client receives the active preset index notification, the message LE_AUDIO_MSG_HAS_CLIENT_ACTIVE_PRESET_IDX_NOTIFY will be sent to application. <br />
 </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> test(uint16_t conn_handle, <span class="keywordtype">bool</span> is_sync_local)</div><div class="line">{</div><div class="line">    <a class="code" href="group___h_a_p___client___exported___functions.html#gaacac9dad0b759ede123147a937436068">has_cp_set_previous_preset</a>(conn_handle, is_sync_local);</div><div class="line">}</div><div class="line"></div><div class="line">uint16_t has_client_ts_handle_msg(<a class="code" href="group___l_e_a___l_i_b___exported___types.html#gabe1a2e587cdc57dc5de8e141de5d1b0b">T_LE_AUDIO_MSG</a> msg, <span class="keywordtype">void</span> *buf)</div><div class="line">{</div><div class="line">    uint16_t cb_result = <a class="code" href="group___b_l_e___a_u_d_i_o___c_b___r_e_s_u_l_t.html#ga6e0271af8429c63c2b6f3226948c14d5">BLE_AUDIO_CB_RESULT_SUCCESS</a>;</div><div class="line"></div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___l_e_a___l_i_b___exported___types.html#ggabe1a2e587cdc57dc5de8e141de5d1b0ba8bc535acfa9ddd89b5bfb8419e5e1633">LE_AUDIO_MSG_HAS_CLIENT_CP_RESULT</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___r_e_s_u_l_t.html">T_HAS_CLIENT_CP_RESULT</a> *p_data = (<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___r_e_s_u_l_t.html">T_HAS_CLIENT_CP_RESULT</a> *)buf;</div><div class="line">            <a class="code" href="group___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;LE_AUDIO_MSG_HAS_CLIENT_CP_RESULT: conn_handle 0x%x, cause 0x%x&quot;</span>,</div><div class="line">                            p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___r_e_s_u_l_t.html#a0d5ffe38d68e48d81e61fc6a4999ae68">conn_handle</a>, p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___c_p___r_e_s_u_l_t.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___l_e_a___l_i_b___exported___types.html#ggabe1a2e587cdc57dc5de8e141de5d1b0bad7b602c14cfdc0736b1ebbca900ba263">LE_AUDIO_MSG_HAS_CLIENT_ACTIVE_PRESET_IDX_NOTIFY</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___a_c_t_i_v_e___p_r_e_s_e_t___i_d_x___n_o_t_i_f_y.html">T_HAS_CLIENT_ACTIVE_PRESET_IDX_NOTIFY</a> *p_data = (<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___a_c_t_i_v_e___p_r_e_s_e_t___i_d_x___n_o_t_i_f_y.html">T_HAS_CLIENT_ACTIVE_PRESET_IDX_NOTIFY</a> *)buf;</div><div class="line">            <a class="code" href="group___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;LE_AUDIO_MSG_HAS_CLIENT_ACTIVE_PRESET_IDX_NOTIFY: conn_handle 0x%x, active_preset_idx 0x%x&quot;</span>,</div><div class="line">                            p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___a_c_t_i_v_e___p_r_e_s_e_t___i_d_x___n_o_t_i_f_y.html#a0d5ffe38d68e48d81e61fc6a4999ae68">conn_handle</a>,</div><div class="line">                            p_data-&gt;<a class="code" href="struct_t___h_a_s___c_l_i_e_n_t___a_c_t_i_v_e___p_r_e_s_e_t___i_d_x___n_o_t_i_f_y.html#a41169d93b0f656e35993189eb0b6bd0e">active_preset_idx</a>);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->

<HR SIZE=5>
<font size="3" color="black">Copyright(c) 2020, <a href=" http://www.realtek.com.tw/"><font size="3" color="#6FB7B7"><b>Realtek Semiconductor Corporation</b></font></a>. All rights reserved.</font> 
