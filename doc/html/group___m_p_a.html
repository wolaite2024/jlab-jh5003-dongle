<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BT AUDIO SDK: MPA</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bbpro-h55px.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BT AUDIO SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,true,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">MPA<div class="ingroups"><a class="el" href="group___a_p_i___reference.html">API Reference</a> &raquo; <a class="el" href="group___b_l_u_e_t_o_o_t_h.html">Bluetooth</a> &raquo; <a class="el" href="group___g_a_p.html">GAP</a> &raquo; <a class="el" href="group___g_a_p___c_o_m_m_o_n___m_o_d_u_l_e.html">GAP Common Module</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Provide functions to control L2CAP layer in Bluetooth stack.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html">T_MPA_L2C_PROTO_REG_RSP</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Response of registering protocol over L2CAP. It will be received in the callback function registered by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a> with message type as <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a4d59c8c2ddb9372d0ca712a7168b2daf">L2C_PROTO_REG_RSP</a>.  <a href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t___m_p_a___l2_c___c_o_n_n___i_n_d.html">T_MPA_L2C_CONN_IND</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indication of remote L2CAP connection request. It will be received in the callback function registered by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a> with message type as <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a1a9c5c61d37ad78bf818b93210be018d">L2C_CONN_IND</a>.  <a href="struct_t___m_p_a___l2_c___c_o_n_n___i_n_d.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t___m_p_a___l2_c___c_o_n_n___r_s_p.html">T_MPA_L2C_CONN_RSP</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Response of starting L2CAP connection request. It will be received in the callback function registered by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a> with message type as <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a8b906e2b0e69038834821c9038faeb48">L2C_CONN_RSP</a>.  <a href="struct_t___m_p_a___l2_c___c_o_n_n___r_s_p.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t___m_p_a___l2_c___c_o_n_n___c_m_p_l___i_n_f_o.html">T_MPA_L2C_CONN_CMPL_INFO</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Information of L2CAP channel establish result. It will be received in the callback function registered by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a> with message type as <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a6895d3bf3e3e409bbb34bfb5dab8cf0d">L2C_CONN_CMPL</a>.  <a href="struct_t___m_p_a___l2_c___c_o_n_n___c_m_p_l___i_n_f_o.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t___m_p_a___l2_c___d_a_t_a___i_n_d.html">T_MPA_L2C_DATA_IND</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indication of L2CAP data received from remote side. It will be received in the callback function registered by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a> with message type as <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a47060330ca51e22582df9d3f7e8bf82f">L2C_DATA_IND</a>.  <a href="struct_t___m_p_a___l2_c___d_a_t_a___i_n_d.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t___m_p_a___l2_c___d_a_t_a___r_s_p.html">T_MPA_L2C_DATA_RSP</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indication of L2CAP data response with ack flag set. It will be received in the callback function registered by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a> with message type as <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a01d5c3013bd28ad03edcfd8f0d5b6535">L2C_DATA_RSP</a>.  <a href="struct_t___m_p_a___l2_c___d_a_t_a___r_s_p.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t___m_p_a___l2_c___d_i_s_c_o_n_n___i_n_d.html">T_MPA_L2C_DISCONN_IND</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indication of receiving L2CAP disconnection request from remote device. It will be received in the callback function registered by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a> with message type as <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047aa379b954711e3a7b686be2649ee29c24">L2C_DISCONN_IND</a>.  <a href="struct_t___m_p_a___l2_c___d_i_s_c_o_n_n___i_n_d.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t___m_p_a___l2_c___d_i_s_c_o_n_n___r_s_p.html">T_MPA_L2C_DISCONN_RSP</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Response of sending L2CAP disconnection request to remote device. It will be received in the callback function registered by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a> with message type as <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a728fbe199379fa0492962f8421a6a9b6">L2C_DISCONN_RSP</a>.  <a href="struct_t___m_p_a___l2_c___d_i_s_c_o_n_n___r_s_p.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t___m_p_a___l2_c___s_e_c___r_e_g___r_s_p.html">T_MPA_L2C_SEC_REG_RSP</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Response of registering protocol security into Bluetooth stack. It will be received in the callback function registered by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a> with message type as <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a942bd921a72cd9eae278fdea45b8e8b5">L2C_SEC_REG_RSP</a>.  <a href="struct_t___m_p_a___l2_c___s_e_c___r_e_g___r_s_p.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t___m_p_a___a_u_t_h_o_r___r_e_q___i_n_d.html">T_MPA_AUTHOR_REQ_IND</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indication to request user's authorization for service connection establish. It will be received in the callback function registered by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a> with message type as <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a88cc1f35a75b3eaf221b7ba189e30eae">L2C_PROTO_AUTHOR_IND</a>.  <a href="struct_t___m_p_a___a_u_t_h_o_r___r_e_q___i_n_d.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_t___m_p_a___r_f_c___a_u_t_h_e_n___r_s_p.html">T_MPA_RFC_AUTHEN_RSP</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reponse of authenticaion on profile over RFCOMM channel. It will be received in the callback function registered by <a class="el" href="group___m_p_a.html#ga3919a936dd52f482283e789d02ef3baf">mpa_reg_rfc_authen_cb</a>.  <a href="struct_t___m_p_a___r_f_c___a_u_t_h_e_n___r_s_p.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga429d1321039a9d989c35cf0fa26e7ae0"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#ga429d1321039a9d989c35cf0fa26e7ae0">P_PROTO_CB</a>) (void *p_buf, <a class="el" href="group___m_p_a.html#gaf08739dbd2dc472521bf4b1db8f43047">T_PROTO_MSG</a> msg)</td></tr>
<tr class="memdesc:ga429d1321039a9d989c35cf0fa26e7ae0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prototype of callback function to handle L2CAP related messages from MPA.  <a href="#ga429d1321039a9d989c35cf0fa26e7ae0">More...</a><br /></td></tr>
<tr class="separator:ga429d1321039a9d989c35cf0fa26e7ae0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa3b7e146197c1234b83d94574c4dc80f"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#gaa3b7e146197c1234b83d94574c4dc80f">P_RFC_AUTHEN_CB</a>) (<a class="el" href="struct_t___m_p_a___r_f_c___a_u_t_h_e_n___r_s_p.html">T_MPA_RFC_AUTHEN_RSP</a> *p_rsp)</td></tr>
<tr class="memdesc:gaa3b7e146197c1234b83d94574c4dc80f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prototype of callback function to handle response of authenticaion on profile over RFCOMM channel.  <a href="#gaa3b7e146197c1234b83d94574c4dc80f">More...</a><br /></td></tr>
<tr class="separator:gaa3b7e146197c1234b83d94574c4dc80f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga97cb1067a4edd8977c1a0112380397fa"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#ga97cb1067a4edd8977c1a0112380397fa">T_MPA_L2C_CONN_CFM_CAUSE</a> { <br />
&#160;&#160;<a class="el" href="group___m_p_a.html#gga97cb1067a4edd8977c1a0112380397faa3a5622e7b6af1c331d26ad7d00cf383a">MPA_L2C_CONN_ACCEPT</a> = L2C_CONN_ACCEPT, 
<br />
&#160;&#160;<a class="el" href="group___m_p_a.html#gga97cb1067a4edd8977c1a0112380397faaf10e757ce9e30ee6b09b277f4201a1c2">MPA_L2C_CONN_PENDING</a> = (L2C_ERR | L2C_ERR_PENDING), 
<br />
&#160;&#160;<a class="el" href="group___m_p_a.html#gga97cb1067a4edd8977c1a0112380397faa710b7719ea51f81fb098086fb3969501">MPA_L2C_CONN_INVALID_PSM</a> = (L2C_ERR | L2C_ERR_INVALID_PSM), 
<br />
&#160;&#160;<a class="el" href="group___m_p_a.html#gga97cb1067a4edd8977c1a0112380397faa3e4337fd72d3613b0329e415d1eb91c1">MPA_L2C_CONN_SECURITY_BLOCK</a> = (L2C_ERR | L2C_ERR_SECURITY_BLOCK), 
<br />
&#160;&#160;<a class="el" href="group___m_p_a.html#gga97cb1067a4edd8977c1a0112380397faa9a488cde284fffac4dc79436bc8aa054">MPA_L2C_CONN_NO_RESOURCE</a> = (L2C_ERR | L2C_ERR_NO_RESOURCE), 
<br />
&#160;&#160;<a class="el" href="group___m_p_a.html#gga97cb1067a4edd8977c1a0112380397faa9da65252258aed4af45fc35861cf3133">MPA_L2C_CONN_INVALID_PARAM</a> = (L2C_ERR | L2C_ERR_INVALID_PARAM), 
<br />
&#160;&#160;<a class="el" href="group___m_p_a.html#gga97cb1067a4edd8977c1a0112380397faa122d6678949f7a596b63689451e03339">MPA_L2C_CONN_INVALID_SOURCE_CID</a> = (L2C_ERR | L2C_ERR_INVALID_SOURCE_CID), 
<br />
&#160;&#160;<a class="el" href="group___m_p_a.html#gga97cb1067a4edd8977c1a0112380397faab9557cc8a4e91c56448ca62ea1dcad79">MPA_L2C_CONN_SOURCE_CID_ALLOCATED</a> = (L2C_ERR | L2C_ERR_SOURCE_CID_ALLOCATED)
<br />
 }</td></tr>
<tr class="memdesc:ga97cb1067a4edd8977c1a0112380397fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">L2CAP confirm cause used in <a class="el" href="group___m_p_a.html#ga58e2f055247ab357c6fe16be5f52f00f">mpa_send_l2c_conn_cfm</a> API.  <a href="group___m_p_a.html#ga97cb1067a4edd8977c1a0112380397fa">More...</a><br /></td></tr>
<tr class="separator:ga97cb1067a4edd8977c1a0112380397fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf08739dbd2dc472521bf4b1db8f43047"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#gaf08739dbd2dc472521bf4b1db8f43047">T_PROTO_MSG</a> { <br />
&#160;&#160;<a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a4d59c8c2ddb9372d0ca712a7168b2daf">L2C_PROTO_REG_RSP</a>, 
<br />
&#160;&#160;<a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a1a9c5c61d37ad78bf818b93210be018d">L2C_CONN_IND</a>, 
<br />
&#160;&#160;<a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a8b906e2b0e69038834821c9038faeb48">L2C_CONN_RSP</a>, 
<br />
&#160;&#160;<a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a6895d3bf3e3e409bbb34bfb5dab8cf0d">L2C_CONN_CMPL</a>, 
<br />
&#160;&#160;<a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a47060330ca51e22582df9d3f7e8bf82f">L2C_DATA_IND</a>, 
<br />
&#160;&#160;<a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a01d5c3013bd28ad03edcfd8f0d5b6535">L2C_DATA_RSP</a>, 
<br />
&#160;&#160;<a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047aa379b954711e3a7b686be2649ee29c24">L2C_DISCONN_IND</a>, 
<br />
&#160;&#160;<a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a728fbe199379fa0492962f8421a6a9b6">L2C_DISCONN_RSP</a>, 
<br />
&#160;&#160;<a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a942bd921a72cd9eae278fdea45b8e8b5">L2C_SEC_REG_RSP</a>, 
<br />
&#160;&#160;<a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a88cc1f35a75b3eaf221b7ba189e30eae">L2C_PROTO_AUTHOR_IND</a>
<br />
 }</td></tr>
<tr class="memdesc:gaf08739dbd2dc472521bf4b1db8f43047"><td class="mdescLeft">&#160;</td><td class="mdescRight">Messages types that protocols will get through callback function registed by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a>.  <a href="group___m_p_a.html#gaf08739dbd2dc472521bf4b1db8f43047">More...</a><br /></td></tr>
<tr class="separator:gaf08739dbd2dc472521bf4b1db8f43047"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8783a09ee27ec88efc80e33bf629d4f1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a> (uint16_t psm, <a class="el" href="group___m_p_a.html#ga429d1321039a9d989c35cf0fa26e7ae0">P_PROTO_CB</a> callback, uint8_t *p_proto_id)</td></tr>
<tr class="memdesc:ga8783a09ee27ec88efc80e33bf629d4f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a callback function to handle L2CAP related messages for a specific PSM.  <a href="#ga8783a09ee27ec88efc80e33bf629d4f1">More...</a><br /></td></tr>
<tr class="separator:ga8783a09ee27ec88efc80e33bf629d4f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae7163b178c9850a2ffd089f8c82dfb4b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#gae7163b178c9850a2ffd089f8c82dfb4b">mpa_set_att_psm_data_path</a> (uint8_t data_path)</td></tr>
<tr class="memdesc:gae7163b178c9850a2ffd089f8c82dfb4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setting the data path of the L2CAP channel using <a class="el" href="group___b_t___t_y_p_e_s.html#ga89709cb892e55d2020562494c244a2e8">PSM_ATT</a>.  <a href="#gae7163b178c9850a2ffd089f8c82dfb4b">More...</a><br /></td></tr>
<tr class="separator:gae7163b178c9850a2ffd089f8c82dfb4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga170638a84871c039ac26e18585dd81dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#ga170638a84871c039ac26e18585dd81dc">mpa_send_l2c_conn_req</a> (uint16_t psm, uint16_t uuid, uint16_t proto_id, uint16_t mtu_size, uint8_t *bd_addr, uint8_t mode, uint16_t flush_timeout)</td></tr>
<tr class="memdesc:ga170638a84871c039ac26e18585dd81dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a request to create a L2CAP connection. If the request was successfully sent, <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a8b906e2b0e69038834821c9038faeb48">L2C_CONN_RSP</a> will be received in the callback function registed by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a> to indicate whether the procedure was started successfully. If the procedure was started, <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a6895d3bf3e3e409bbb34bfb5dab8cf0d">L2C_CONN_CMPL</a> will be received later to tell the result of L2CAP channel establishment.  <a href="#ga170638a84871c039ac26e18585dd81dc">More...</a><br /></td></tr>
<tr class="separator:ga170638a84871c039ac26e18585dd81dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga58e2f055247ab357c6fe16be5f52f00f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#ga58e2f055247ab357c6fe16be5f52f00f">mpa_send_l2c_conn_cfm</a> (<a class="el" href="group___m_p_a.html#ga97cb1067a4edd8977c1a0112380397fa">T_MPA_L2C_CONN_CFM_CAUSE</a> cause, uint16_t cid, uint16_t mtu_size, uint8_t mode, uint16_t flush_timeout)</td></tr>
<tr class="memdesc:ga58e2f055247ab357c6fe16be5f52f00f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a confirmation for a L2CAP connection request from remote device. If the confirmation was successfully sent with cause as <a class="el" href="group___m_p_a.html#gga97cb1067a4edd8977c1a0112380397faa3a5622e7b6af1c331d26ad7d00cf383a">MPA_L2C_CONN_ACCEPT</a>, <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a6895d3bf3e3e409bbb34bfb5dab8cf0d">L2C_CONN_CMPL</a> will also be received in the callback function registered by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a> to tell the result of L2CAP channel establishment.  <a href="#ga58e2f055247ab357c6fe16be5f52f00f">More...</a><br /></td></tr>
<tr class="separator:ga58e2f055247ab357c6fe16be5f52f00f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2d4a9f38b81b8ce790cc64d54b0f2569"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#ga2d4a9f38b81b8ce790cc64d54b0f2569">mpa_send_l2c_disconn_req</a> (uint16_t cid)</td></tr>
<tr class="memdesc:ga2d4a9f38b81b8ce790cc64d54b0f2569"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a request to disconnect a L2CAP connection. If the request was successfully sent, <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a728fbe199379fa0492962f8421a6a9b6">L2C_DISCONN_RSP</a> will be received in the callback function registed by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a> to show the result of disconnection.  <a href="#ga2d4a9f38b81b8ce790cc64d54b0f2569">More...</a><br /></td></tr>
<tr class="separator:ga2d4a9f38b81b8ce790cc64d54b0f2569"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2af6cf949033fd486e7215c5c8cac263"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#ga2af6cf949033fd486e7215c5c8cac263">mpa_send_l2c_disconn_cfm</a> (uint16_t cid)</td></tr>
<tr class="memdesc:ga2af6cf949033fd486e7215c5c8cac263"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a confirmation for a L2CAP disconnection request from remote device.  <a href="#ga2af6cf949033fd486e7215c5c8cac263">More...</a><br /></td></tr>
<tr class="separator:ga2af6cf949033fd486e7215c5c8cac263"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2cc64da794ffd203f4d48b68fc1d518a"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#ga2cc64da794ffd203f4d48b68fc1d518a">mpa_get_l2c_buf</a> (uint8_t proto_id, uint16_t cid, uint8_t dlci, uint16_t size, uint16_t offset, bool ack)</td></tr>
<tr class="memdesc:ga2cc64da794ffd203f4d48b68fc1d518a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get buffer from Bluetooth stack to put in L2CAP data which will be sent to remote device.  <a href="#ga2cc64da794ffd203f4d48b68fc1d518a">More...</a><br /></td></tr>
<tr class="separator:ga2cc64da794ffd203f4d48b68fc1d518a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae7a156221bfa4632b15a77a6e49feacb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#gae7a156221bfa4632b15a77a6e49feacb">mpa_send_l2c_data_req</a> (void *p_buf, uint16_t offset, uint16_t cid, uint16_t length, bool auto_flush)</td></tr>
<tr class="memdesc:gae7a156221bfa4632b15a77a6e49feacb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a request to send L2CAP data to remote device.  <a href="#gae7a156221bfa4632b15a77a6e49feacb">More...</a><br /></td></tr>
<tr class="separator:gae7a156221bfa4632b15a77a6e49feacb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2d53bad21adf7b258a7f1ddd913ac373"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#ga2d53bad21adf7b258a7f1ddd913ac373">mpa_send_l2c_sec_reg_req</a> (uint8_t active, uint16_t psm, uint16_t server_chann, uint16_t uuid, uint8_t requirement)</td></tr>
<tr class="memdesc:ga2d53bad21adf7b258a7f1ddd913ac373"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a request to register/deregister a protocol security entry over L2CAP. The security will be used when establishing a L2CAP channel. If the request was successfully sent, a message whose type is <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a942bd921a72cd9eae278fdea45b8e8b5">L2C_SEC_REG_RSP</a> and data is <a class="el" href="struct_t___m_p_a___l2_c___s_e_c___r_e_g___r_s_p.html">T_MPA_L2C_SEC_REG_RSP</a> will be received in the callback function registered by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a>.  <a href="#ga2d53bad21adf7b258a7f1ddd913ac373">More...</a><br /></td></tr>
<tr class="separator:ga2d53bad21adf7b258a7f1ddd913ac373"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabd5d7bdc078b1b23a932664c1f38012a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#gabd5d7bdc078b1b23a932664c1f38012a">mpa_send_author_cfm</a> (uint8_t *bd_addr, <a class="el" href="group___g_a_p___common___exported___types.html#ga17c405b4388243cdfbfdbd543ddd09b2">T_GAP_CFM_CAUSE</a> result)</td></tr>
<tr class="memdesc:gabd5d7bdc078b1b23a932664c1f38012a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a confirmation for authorization request indication. This function is used when receiving a message whose type is <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a88cc1f35a75b3eaf221b7ba189e30eae">L2C_PROTO_AUTHOR_IND</a> and data is <a class="el" href="struct_t___m_p_a___a_u_t_h_o_r___r_e_q___i_n_d.html">T_MPA_AUTHOR_REQ_IND</a> in the callback function registered by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a>.  <a href="#gabd5d7bdc078b1b23a932664c1f38012a">More...</a><br /></td></tr>
<tr class="separator:gabd5d7bdc078b1b23a932664c1f38012a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3919a936dd52f482283e789d02ef3baf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#ga3919a936dd52f482283e789d02ef3baf">mpa_reg_rfc_authen_cb</a> (<a class="el" href="group___m_p_a.html#gaa3b7e146197c1234b83d94574c4dc80f">P_RFC_AUTHEN_CB</a> p_func)</td></tr>
<tr class="memdesc:ga3919a936dd52f482283e789d02ef3baf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a callback function to handle authentication responses over RFCOMM. <b>This API can only be used when realize RFCOMM protocol.</b>  <a href="#ga3919a936dd52f482283e789d02ef3baf">More...</a><br /></td></tr>
<tr class="separator:ga3919a936dd52f482283e789d02ef3baf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga26b0a58e55895f0c212fa98acdbff42d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#ga26b0a58e55895f0c212fa98acdbff42d">mpa_send_rfc_authen_req</a> (uint8_t *bd_addr, uint16_t cid, uint16_t dlci, uint16_t uuid, uint8_t outgoing)</td></tr>
<tr class="memdesc:ga26b0a58e55895f0c212fa98acdbff42d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a request to start authentication for a profile on RFCOMM channel. If the request was successfully sent, a response message will be received in the callback function registered by <a class="el" href="group___m_p_a.html#ga3919a936dd52f482283e789d02ef3baf">mpa_reg_rfc_authen_cb</a>. <b>This API can only be used when realize RFCOMM protocol.</b>  <a href="#ga26b0a58e55895f0c212fa98acdbff42d">More...</a><br /></td></tr>
<tr class="separator:ga26b0a58e55895f0c212fa98acdbff42d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
MPA_L2C_MODE</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrp04cf522c06f35211c72c5ab4de94da91"></a>L2CAP channel mode.</p>
<p><a class="el" href="mpa_8h_source.html">mpa.h</a></p>
<p><a class="anchor" id="MPA_L2C_MODE"></a></p>
</td></tr>
<tr class="memitem:gae0f294a01aa4a4b5e64786277bc916a9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#gae0f294a01aa4a4b5e64786277bc916a9">MPA_L2C_MODE_BASIC</a>&#160;&#160;&#160;(1 &lt;&lt; 0x00)</td></tr>
<tr class="separator:gae0f294a01aa4a4b5e64786277bc916a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae354b08da21e6bc6d7045654193f216b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#gae354b08da21e6bc6d7045654193f216b">MPA_L2C_MODE_ERTM</a>&#160;&#160;&#160;(1 &lt;&lt; 0x03)</td></tr>
<tr class="separator:gae354b08da21e6bc6d7045654193f216b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
MPA_SEC_SETTING</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrp7cc7b1307cfcc672cc86263c1970e611"></a>Protocol security requirement settings bit mask.</p>
<p><a class="el" href="mpa_8h_source.html">mpa.h</a></p>
<p><a class="anchor" id="MPA_SEC_SETTING"></a></p>
</td></tr>
<tr class="memitem:ga30962ac9bdb5ce9023ff6f8980f88599"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#ga30962ac9bdb5ce9023ff6f8980f88599">MPA_SEC_BIT_OUTGOING</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:ga30962ac9bdb5ce9023ff6f8980f88599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0070e49aa82ae1d959aa9814fd4740a4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#ga0070e49aa82ae1d959aa9814fd4740a4">MPA_SEC_BIT_AUTHEN</a>&#160;&#160;&#160;0x02</td></tr>
<tr class="separator:ga0070e49aa82ae1d959aa9814fd4740a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad4f45515b51674c04590778520513460"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#gad4f45515b51674c04590778520513460">MPA_SEC_BIT_MITM</a>&#160;&#160;&#160;0x04</td></tr>
<tr class="separator:gad4f45515b51674c04590778520513460"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeac452d5ef2e7c975dd6ed62c2050987"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#gaeac452d5ef2e7c975dd6ed62c2050987">MPA_SEC_BIT_AUTHOR</a>&#160;&#160;&#160;0x08</td></tr>
<tr class="separator:gaeac452d5ef2e7c975dd6ed62c2050987"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8b2b96e47d85d5e05415eee2c20e528a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#ga8b2b96e47d85d5e05415eee2c20e528a">MPA_SEC_BIT_ENCRYPT</a>&#160;&#160;&#160;0x10</td></tr>
<tr class="separator:ga8b2b96e47d85d5e05415eee2c20e528a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
MPA_ATT_PSM_DATA_PATH</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrp13fee852a75bdb57bdbbbf15d95943ea"></a>The ATT data path of the L2CAP channel using <a class="el" href="group___b_t___t_y_p_e_s.html#ga89709cb892e55d2020562494c244a2e8">PSM_ATT</a>.</p>
<p><a class="el" href="mpa_8h_source.html">mpa.h</a></p>
<p><a class="anchor" id="MPA_ATT_PSM_DATA_PATH"></a></p>
</td></tr>
<tr class="memitem:gaa2a27f246447cd9edc56c59b1285519e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#gaa2a27f246447cd9edc56c59b1285519e">MPA_ATT_PSM_DATA_PATH_APP</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="separator:gaa2a27f246447cd9edc56c59b1285519e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga713db21fff6858bb16a5f8d4f3a1e917"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_p_a.html#ga713db21fff6858bb16a5f8d4f3a1e917">MPA_ATT_PSM_DATA_PATH_GATT</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:ga713db21fff6858bb16a5f8d4f3a1e917"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Provide functions to control L2CAP layer in Bluetooth stack. </p>
<p>MPA(Multi protocol adaptor) is designed for user to implement protocols over L2CAP easily. Many functions are provided to connect, disconnect or send data over L2CAP channels. Upstream messages can be received in callback fucntions registered in MPA.<br />
</p><dl class="section note"><dt>Note</dt><dd>The structure here must be sycn with internal btif layer. </dd></dl>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gae0f294a01aa4a4b5e64786277bc916a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae0f294a01aa4a4b5e64786277bc916a9">&#9670;&nbsp;</a></span>MPA_L2C_MODE_BASIC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MPA_L2C_MODE_BASIC&#160;&#160;&#160;(1 &lt;&lt; 0x00)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>L2CAP channel mode: basic mode. </p>

</div>
</div>
<a id="ga30962ac9bdb5ce9023ff6f8980f88599"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga30962ac9bdb5ce9023ff6f8980f88599">&#9670;&nbsp;</a></span>MPA_SEC_BIT_OUTGOING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MPA_SEC_BIT_OUTGOING&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Request for outgoing connection. </p>

</div>
</div>
<a id="gaa2a27f246447cd9edc56c59b1285519e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa2a27f246447cd9edc56c59b1285519e">&#9670;&nbsp;</a></span>MPA_ATT_PSM_DATA_PATH_APP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MPA_ATT_PSM_DATA_PATH_APP&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Application needs to handle the data. The ATT layer will not handle the data. </p>

</div>
</div>
<a id="gae354b08da21e6bc6d7045654193f216b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae354b08da21e6bc6d7045654193f216b">&#9670;&nbsp;</a></span>MPA_L2C_MODE_ERTM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MPA_L2C_MODE_ERTM&#160;&#160;&#160;(1 &lt;&lt; 0x03)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>L2CAP channel mode: enhanced retransmission mode. </p>

</div>
</div>
<a id="ga0070e49aa82ae1d959aa9814fd4740a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0070e49aa82ae1d959aa9814fd4740a4">&#9670;&nbsp;</a></span>MPA_SEC_BIT_AUTHEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MPA_SEC_BIT_AUTHEN&#160;&#160;&#160;0x02</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Authentication is required. </p>

</div>
</div>
<a id="gad4f45515b51674c04590778520513460"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad4f45515b51674c04590778520513460">&#9670;&nbsp;</a></span>MPA_SEC_BIT_MITM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MPA_SEC_BIT_MITM&#160;&#160;&#160;0x04</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>MITM authentication is required, only possible if authentication is set. </p>

</div>
</div>
<a id="gaeac452d5ef2e7c975dd6ed62c2050987"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeac452d5ef2e7c975dd6ed62c2050987">&#9670;&nbsp;</a></span>MPA_SEC_BIT_AUTHOR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MPA_SEC_BIT_AUTHOR&#160;&#160;&#160;0x08</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>User level authorization is required. </p>

</div>
</div>
<a id="ga8b2b96e47d85d5e05415eee2c20e528a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8b2b96e47d85d5e05415eee2c20e528a">&#9670;&nbsp;</a></span>MPA_SEC_BIT_ENCRYPT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MPA_SEC_BIT_ENCRYPT&#160;&#160;&#160;0x10</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Encryption on link is required, only possible if authentication is set. </p>

</div>
</div>
<a id="ga713db21fff6858bb16a5f8d4f3a1e917"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga713db21fff6858bb16a5f8d4f3a1e917">&#9670;&nbsp;</a></span>MPA_ATT_PSM_DATA_PATH_GATT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MPA_ATT_PSM_DATA_PATH_GATT&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The ATT layer handles the data. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga429d1321039a9d989c35cf0fa26e7ae0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga429d1321039a9d989c35cf0fa26e7ae0">&#9670;&nbsp;</a></span>P_PROTO_CB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(*  P_PROTO_CB) (void *p_buf, <a class="el" href="group___m_p_a.html#gaf08739dbd2dc472521bf4b1db8f43047">T_PROTO_MSG</a> msg)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prototype of callback function to handle L2CAP related messages from MPA. </p>
<p><a class="el" href="mpa_8h_source.html">mpa.h</a></p>
<p>Message types are defined in <a class="el" href="group___m_p_a.html#gaf08739dbd2dc472521bf4b1db8f43047">T_PROTO_MSG</a>. Message data is located at <code>p_buf</code> and the content of data is dependent on message type.<br />
</p>

</div>
</div>
<a id="gaa3b7e146197c1234b83d94574c4dc80f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa3b7e146197c1234b83d94574c4dc80f">&#9670;&nbsp;</a></span>P_RFC_AUTHEN_CB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(*  P_RFC_AUTHEN_CB) (<a class="el" href="struct_t___m_p_a___r_f_c___a_u_t_h_e_n___r_s_p.html">T_MPA_RFC_AUTHEN_RSP</a> *p_rsp)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prototype of callback function to handle response of authenticaion on profile over RFCOMM channel. </p>
<p><a class="el" href="mpa_8h_source.html">mpa.h</a> </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga97cb1067a4edd8977c1a0112380397fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga97cb1067a4edd8977c1a0112380397fa">&#9670;&nbsp;</a></span>T_MPA_L2C_CONN_CFM_CAUSE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___m_p_a.html#ga97cb1067a4edd8977c1a0112380397fa">T_MPA_L2C_CONN_CFM_CAUSE</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>L2CAP confirm cause used in <a class="el" href="group___m_p_a.html#ga58e2f055247ab357c6fe16be5f52f00f">mpa_send_l2c_conn_cfm</a> API. </p>
<p><a class="el" href="mpa_8h_source.html">mpa.h</a> </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga97cb1067a4edd8977c1a0112380397faa3a5622e7b6af1c331d26ad7d00cf383a"></a>MPA_L2C_CONN_ACCEPT&#160;</td><td class="fielddoc"><p>L2CAP connection accept </p>
</td></tr>
<tr><td class="fieldname"><a id="gga97cb1067a4edd8977c1a0112380397faaf10e757ce9e30ee6b09b277f4201a1c2"></a>MPA_L2C_CONN_PENDING&#160;</td><td class="fielddoc"><p>L2CAP connection pending </p>
</td></tr>
<tr><td class="fieldname"><a id="gga97cb1067a4edd8977c1a0112380397faa710b7719ea51f81fb098086fb3969501"></a>MPA_L2C_CONN_INVALID_PSM&#160;</td><td class="fielddoc"><p>L2CAP connection reject because of PSM not support </p>
</td></tr>
<tr><td class="fieldname"><a id="gga97cb1067a4edd8977c1a0112380397faa3e4337fd72d3613b0329e415d1eb91c1"></a>MPA_L2C_CONN_SECURITY_BLOCK&#160;</td><td class="fielddoc"><p>L2CAP connection reject because of security block </p>
</td></tr>
<tr><td class="fieldname"><a id="gga97cb1067a4edd8977c1a0112380397faa9a488cde284fffac4dc79436bc8aa054"></a>MPA_L2C_CONN_NO_RESOURCE&#160;</td><td class="fielddoc"><p>L2CAP connection reject because of no resources available </p>
</td></tr>
<tr><td class="fieldname"><a id="gga97cb1067a4edd8977c1a0112380397faa9da65252258aed4af45fc35861cf3133"></a>MPA_L2C_CONN_INVALID_PARAM&#160;</td><td class="fielddoc"><p>L2CAP connection reject because of invalid parameter </p>
</td></tr>
<tr><td class="fieldname"><a id="gga97cb1067a4edd8977c1a0112380397faa122d6678949f7a596b63689451e03339"></a>MPA_L2C_CONN_INVALID_SOURCE_CID&#160;</td><td class="fielddoc"><p>L2CAP connection reject because of invalid source CID </p>
</td></tr>
<tr><td class="fieldname"><a id="gga97cb1067a4edd8977c1a0112380397faab9557cc8a4e91c56448ca62ea1dcad79"></a>MPA_L2C_CONN_SOURCE_CID_ALLOCATED&#160;</td><td class="fielddoc"><p>L2CAP connection reject because of source CID already allocated </p>
</td></tr>
</table>

</div>
</div>
<a id="gaf08739dbd2dc472521bf4b1db8f43047"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf08739dbd2dc472521bf4b1db8f43047">&#9670;&nbsp;</a></span>T_PROTO_MSG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___m_p_a.html#gaf08739dbd2dc472521bf4b1db8f43047">T_PROTO_MSG</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Messages types that protocols will get through callback function registed by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a>. </p>
<p><a class="el" href="mpa_8h_source.html">mpa.h</a> </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggaf08739dbd2dc472521bf4b1db8f43047a4d59c8c2ddb9372d0ca712a7168b2daf"></a>L2C_PROTO_REG_RSP&#160;</td><td class="fielddoc"><p>Response of register protocol into L2CAP layer. Message data is <a class="el" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html">T_MPA_L2C_PROTO_REG_RSP</a>. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf08739dbd2dc472521bf4b1db8f43047a1a9c5c61d37ad78bf818b93210be018d"></a>L2C_CONN_IND&#160;</td><td class="fielddoc"><p>Indication of L2CAP connection request from remote device. Message data is <a class="el" href="struct_t___m_p_a___l2_c___c_o_n_n___i_n_d.html">T_MPA_L2C_CONN_IND</a>. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf08739dbd2dc472521bf4b1db8f43047a8b906e2b0e69038834821c9038faeb48"></a>L2C_CONN_RSP&#160;</td><td class="fielddoc"><p>Response of send L2CAP connection request to remote device. Message data is <a class="el" href="struct_t___m_p_a___l2_c___c_o_n_n___r_s_p.html">T_MPA_L2C_CONN_RSP</a>. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf08739dbd2dc472521bf4b1db8f43047a6895d3bf3e3e409bbb34bfb5dab8cf0d"></a>L2C_CONN_CMPL&#160;</td><td class="fielddoc"><p>Information of L2CAP connection establish result. Message data is <a class="el" href="struct_t___m_p_a___l2_c___c_o_n_n___c_m_p_l___i_n_f_o.html">T_MPA_L2C_CONN_CMPL_INFO</a>. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf08739dbd2dc472521bf4b1db8f43047a47060330ca51e22582df9d3f7e8bf82f"></a>L2C_DATA_IND&#160;</td><td class="fielddoc"><p>Indication of L2CAP data received from remote device. Message data is <a class="el" href="struct_t___m_p_a___l2_c___d_a_t_a___i_n_d.html">T_MPA_L2C_DATA_IND</a>. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf08739dbd2dc472521bf4b1db8f43047a01d5c3013bd28ad03edcfd8f0d5b6535"></a>L2C_DATA_RSP&#160;</td><td class="fielddoc"><p>Indication of L2CAP data response with ack flag set. Message data is <a class="el" href="struct_t___m_p_a___l2_c___d_a_t_a___r_s_p.html">T_MPA_L2C_DATA_RSP</a>. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf08739dbd2dc472521bf4b1db8f43047aa379b954711e3a7b686be2649ee29c24"></a>L2C_DISCONN_IND&#160;</td><td class="fielddoc"><p>Indication of L2CAP disconnection request from remote device. Message data is <a class="el" href="struct_t___m_p_a___l2_c___d_i_s_c_o_n_n___i_n_d.html">T_MPA_L2C_DISCONN_IND</a>. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf08739dbd2dc472521bf4b1db8f43047a728fbe199379fa0492962f8421a6a9b6"></a>L2C_DISCONN_RSP&#160;</td><td class="fielddoc"><p>Response of send L2CAP disconnection request ro remote device. Message data is <a class="el" href="struct_t___m_p_a___l2_c___d_i_s_c_o_n_n___r_s_p.html">T_MPA_L2C_DISCONN_RSP</a>. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf08739dbd2dc472521bf4b1db8f43047a942bd921a72cd9eae278fdea45b8e8b5"></a>L2C_SEC_REG_RSP&#160;</td><td class="fielddoc"><p>Response of register protocol security requirement into Bluetooth stack. Message data is <a class="el" href="struct_t___m_p_a___l2_c___s_e_c___r_e_g___r_s_p.html">T_MPA_L2C_SEC_REG_RSP</a>. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf08739dbd2dc472521bf4b1db8f43047a88cc1f35a75b3eaf221b7ba189e30eae"></a>L2C_PROTO_AUTHOR_IND&#160;</td><td class="fielddoc"><p>Indication of request authorization for service connection establish. Message data is <a class="el" href="struct_t___m_p_a___a_u_t_h_o_r___r_e_q___i_n_d.html">T_MPA_AUTHOR_REQ_IND</a>. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga8783a09ee27ec88efc80e33bf629d4f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8783a09ee27ec88efc80e33bf629d4f1">&#9670;&nbsp;</a></span>mpa_reg_l2c_proto()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mpa_reg_l2c_proto </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>psm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___m_p_a.html#ga429d1321039a9d989c35cf0fa26e7ae0">P_PROTO_CB</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>p_proto_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a callback function to handle L2CAP related messages for a specific PSM. </p>
<p><a class="el" href="mpa_8h_source.html">mpa.h</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">psm</td><td>Protocol service multiplexer that the callback function is related. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">callback</td><td>Callback function to handle L2CAP messages. The function must have the prototype defined as <a class="el" href="group___m_p_a.html#ga429d1321039a9d989c35cf0fa26e7ae0">P_PROTO_CB</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_proto_id</td><td>Protocol ID assigned by MPA which will be used in <a class="el" href="group___m_p_a.html#ga170638a84871c039ac26e18585dd81dc">mpa_send_l2c_conn_req</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The result of callback function register. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>The function was successfully registered. </td></tr>
    <tr><td class="paramname">false</td><td>The function was failed to register.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line">uint8_t proto_id;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> test_l2c_cb(<span class="keywordtype">void</span> *p_buf, <a class="code" href="group___m_p_a.html#gaf08739dbd2dc472521bf4b1db8f43047">T_PROTO_MSG</a> msg)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a4d59c8c2ddb9372d0ca712a7168b2daf">L2C_PROTO_REG_RSP</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html">T_MPA_L2C_PROTO_REG_RSP</a> *p_rsp = (<a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html">T_MPA_L2C_PROTO_REG_RSP</a> *)p_buf;</div><div class="line">            <a class="code" href="group___t_r_a_c_e.html#ga517945d492f75547264f521def378025">APP_PRINT_TRACE2</a>(<span class="stringliteral">&quot;protocol register response: psm 0x%04x, cause 0x%04x\r\n&quot;</span>, p_rsp-&gt;<a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html#a38a3d76182946faeb6b5ea25bed58432">psm</a>, p_rsp-&gt;<a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a>(<a class="code" href="group___b_t___t_y_p_e_s.html#ga6db75c9162ffb534c855804327fea0ea">PSM_AVDTP</a>, test_l2c_cb, &amp;proto_id);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="gae7163b178c9850a2ffd089f8c82dfb4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae7163b178c9850a2ffd089f8c82dfb4b">&#9670;&nbsp;</a></span>mpa_set_att_psm_data_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mpa_set_att_psm_data_path </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data_path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setting the data path of the L2CAP channel using <a class="el" href="group___b_t___t_y_p_e_s.html#ga89709cb892e55d2020562494c244a2e8">PSM_ATT</a>. </p>
<p><a class="el" href="mpa_8h_source.html">mpa.h</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data_path</td><td>Data processing method. Should be use <a class="el" href="group___m_p_a.html#MPA_ATT_PSM_DATA_PATH">MPA_ATT_PSM_DATA_PATH</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The result of callback function register. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>The function was successfully configuration. </td></tr>
    <tr><td class="paramname">false</td><td>The function was failed to configure.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___m_p_a.html#gae7163b178c9850a2ffd089f8c82dfb4b">mpa_set_att_psm_data_path</a>(<a class="code" href="group___m_p_a.html#ga713db21fff6858bb16a5f8d4f3a1e917">MPA_ATT_PSM_DATA_PATH_GATT</a>);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga170638a84871c039ac26e18585dd81dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga170638a84871c039ac26e18585dd81dc">&#9670;&nbsp;</a></span>mpa_send_l2c_conn_req()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mpa_send_l2c_conn_req </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>psm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>proto_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>mtu_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>bd_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>flush_timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a request to create a L2CAP connection. If the request was successfully sent, <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a8b906e2b0e69038834821c9038faeb48">L2C_CONN_RSP</a> will be received in the callback function registed by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a> to indicate whether the procedure was started successfully. If the procedure was started, <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a6895d3bf3e3e409bbb34bfb5dab8cf0d">L2C_CONN_CMPL</a> will be received later to tell the result of L2CAP channel establishment. </p>
<p><a class="el" href="mpa_8h_source.html">mpa.h</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">psm</td><td>PSM of the L2CAP channel that will be established. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uuid</td><td>UUID of profile that is established over the L2CAP channel. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">proto_id</td><td>Protocol ID assigned by MPA. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mtu_size</td><td>Prefered MTU size value of the L2CAP channel. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bd_addr</td><td>Bluetooth address of remote device. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>Channel mode to use. Should be the combination of <a class="el" href="group___m_p_a.html#MPA_L2C_MODE">MPA_L2C_MODE</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flush_timeout</td><td>Flush timeout of flushable data on this channel, 0xFFFF for not flush.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line">uint8_t proto_id;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> test_l2c_cb(<span class="keywordtype">void</span> *p_buf, <a class="code" href="group___m_p_a.html#gaf08739dbd2dc472521bf4b1db8f43047">T_PROTO_MSG</a> msg)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a4d59c8c2ddb9372d0ca712a7168b2daf">L2C_PROTO_REG_RSP</a>:</div><div class="line">        {</div><div class="line">            uint8_t bd_addr[6] = {0x11, 0x22, 0x33, 0x44, 0x55, 0x66};</div><div class="line">            <a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html">T_MPA_L2C_PROTO_REG_RSP</a> *p_rsp = (<a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html">T_MPA_L2C_PROTO_REG_RSP</a> *)p_buf;</div><div class="line"></div><div class="line">            <a class="code" href="group___t_r_a_c_e.html#ga517945d492f75547264f521def378025">APP_PRINT_TRACE2</a>(<span class="stringliteral">&quot;protocol register response: psm 0x%04x, cause 0x%04x\r\n&quot;</span>, p_rsp-&gt;<a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html#a38a3d76182946faeb6b5ea25bed58432">psm</a>, p_rsp-&gt;<a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (!p_rsp-&gt;<a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>)</div><div class="line">            {</div><div class="line">                <a class="code" href="group___m_p_a.html#ga170638a84871c039ac26e18585dd81dc">mpa_send_l2c_conn_req</a>(<a class="code" href="group___b_t___t_y_p_e_s.html#ga6db75c9162ffb534c855804327fea0ea">PSM_AVDTP</a>, <a class="code" href="group___b_t___t_y_p_e_s.html#ga757abe5de4d297c7fb59e294b3647667">UUID_AVDTP</a>, proto_id, 672, bd_addr, <a class="code" href="group___m_p_a.html#gae0f294a01aa4a4b5e64786277bc916a9">MPA_L2C_MODE_BASIC</a>, 0xFFFF);</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a8b906e2b0e69038834821c9038faeb48">L2C_CONN_RSP</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___m_p_a___l2_c___c_o_n_n___r_s_p.html">T_MPA_L2C_CONN_RSP</a> *p_rsp = (<a class="code" href="struct_t___m_p_a___l2_c___c_o_n_n___r_s_p.html">T_MPA_L2C_CONN_RSP</a> *)p_buf;</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (p_rsp-&gt;<a class="code" href="struct_t___m_p_a___l2_c___c_o_n_n___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>)</div><div class="line">            {</div><div class="line">                <a class="code" href="group___t_r_a_c_e.html#ga57c6954e0ebb68c0ca06a0052659be48">APP_PRINT_ERROR1</a>(<span class="stringliteral">&quot;send l2cap connection request fail, cause 0x%04x&quot;</span>, p_rsp-&gt;<a class="code" href="struct_t___m_p_a___l2_c___c_o_n_n___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a6895d3bf3e3e409bbb34bfb5dab8cf0d">L2C_CONN_CMPL</a>:</div><div class="line">        {</div><div class="line">            T_MPA_L2C_CONN_CMPL *p_info = (T_MPA_L2C_CONN_CMPL *)p_buf;</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (!p_info-&gt;cause)</div><div class="line">            {</div><div class="line">                <a class="code" href="group___t_r_a_c_e.html#gadbd6667019aa1db0ec6456ec90268f4f">APP_PRINT_TRACE1</a>(<span class="stringliteral">&quot;l2cap channel connect successfully, cid 0x%04x&quot;</span>, p_info-&gt;cid);</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a>(<a class="code" href="group___b_t___t_y_p_e_s.html#ga6db75c9162ffb534c855804327fea0ea">PSM_AVDTP</a>, test_l2c_cb, &amp;proto_id);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga58e2f055247ab357c6fe16be5f52f00f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga58e2f055247ab357c6fe16be5f52f00f">&#9670;&nbsp;</a></span>mpa_send_l2c_conn_cfm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mpa_send_l2c_conn_cfm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___m_p_a.html#ga97cb1067a4edd8977c1a0112380397fa">T_MPA_L2C_CONN_CFM_CAUSE</a>&#160;</td>
          <td class="paramname"><em>cause</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>mtu_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>flush_timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a confirmation for a L2CAP connection request from remote device. If the confirmation was successfully sent with cause as <a class="el" href="group___m_p_a.html#gga97cb1067a4edd8977c1a0112380397faa3a5622e7b6af1c331d26ad7d00cf383a">MPA_L2C_CONN_ACCEPT</a>, <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a6895d3bf3e3e409bbb34bfb5dab8cf0d">L2C_CONN_CMPL</a> will also be received in the callback function registered by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a> to tell the result of L2CAP channel establishment. </p>
<p><a class="el" href="mpa_8h_source.html">mpa.h</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cause</td><td>Confirmation cause for the connection request from remote device. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cid</td><td>Local channel ID assigned by Bluetooth stack. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mtu_size</td><td>Prefered MTU size value of the L2CAP channel. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>Channel mode to use. Should be the combination of <a class="el" href="group___m_p_a.html#MPA_L2C_MODE">MPA_L2C_MODE</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flush_timeout</td><td>Flush timeout of flushable data on this channel, 0xFFFF for not flush.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> test_l2c_cb(<span class="keywordtype">void</span> *p_buf, <a class="code" href="group___m_p_a.html#gaf08739dbd2dc472521bf4b1db8f43047">T_PROTO_MSG</a> msg)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a1a9c5c61d37ad78bf818b93210be018d">L2C_CONN_IND</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___m_p_a___l2_c___c_o_n_n___i_n_d.html">T_MPA_L2C_CONN_IND</a> *p_ind = (<a class="code" href="struct_t___m_p_a___l2_c___c_o_n_n___i_n_d.html">T_MPA_L2C_CONN_IND</a> *)p_buf;</div><div class="line"></div><div class="line">            <a class="code" href="group___m_p_a.html#ga58e2f055247ab357c6fe16be5f52f00f">mpa_send_l2c_conn_cfm</a>(<a class="code" href="group___m_p_a.html#gga97cb1067a4edd8977c1a0112380397faa3a5622e7b6af1c331d26ad7d00cf383a">MPA_L2C_CONN_ACCEPT</a>, p_ind-&gt;<a class="code" href="struct_t___m_p_a___l2_c___c_o_n_n___i_n_d.html#aeb65c8711b864df01fca95cfe904d924">cid</a>, 672, <a class="code" href="group___m_p_a.html#gae0f294a01aa4a4b5e64786277bc916a9">MPA_L2C_MODE_BASIC</a>, 0xFFFF);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a6895d3bf3e3e409bbb34bfb5dab8cf0d">L2C_CONN_CMPL</a>:</div><div class="line">        {</div><div class="line">            T_MPA_L2C_CONN_CMPL *p_info = (T_MPA_L2C_CONN_CMPL *)p_buf;</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (!p_info-&gt;cause)</div><div class="line">            {</div><div class="line">                <a class="code" href="group___t_r_a_c_e.html#gadbd6667019aa1db0ec6456ec90268f4f">APP_PRINT_TRACE1</a>(<span class="stringliteral">&quot;l2cap channel connect successfully, cid 0x%04x&quot;</span>, p_info-&gt;cid);</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a>(<a class="code" href="group___b_t___t_y_p_e_s.html#ga6db75c9162ffb534c855804327fea0ea">PSM_AVDTP</a>, test_l2c_cb, &amp;proto_id);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga2d4a9f38b81b8ce790cc64d54b0f2569"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2d4a9f38b81b8ce790cc64d54b0f2569">&#9670;&nbsp;</a></span>mpa_send_l2c_disconn_req()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mpa_send_l2c_disconn_req </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a request to disconnect a L2CAP connection. If the request was successfully sent, <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a728fbe199379fa0492962f8421a6a9b6">L2C_DISCONN_RSP</a> will be received in the callback function registed by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a> to show the result of disconnection. </p>
<p><a class="el" href="mpa_8h_source.html">mpa.h</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cid</td><td>Local channel ID of the L2CAP channel to disconnect.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line">uint8_t proto_id;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> test_l2c_cb(<span class="keywordtype">void</span> *p_buf, <a class="code" href="group___m_p_a.html#gaf08739dbd2dc472521bf4b1db8f43047">T_PROTO_MSG</a> msg)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a4d59c8c2ddb9372d0ca712a7168b2daf">L2C_PROTO_REG_RSP</a>:</div><div class="line">        {</div><div class="line">            uint8_t bd_addr[6] = {0x11, 0x22, 0x33, 0x44, 0x55, 0x66};</div><div class="line">            <a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html">T_MPA_L2C_PROTO_REG_RSP</a> *p_rsp = (<a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html">T_MPA_L2C_PROTO_REG_RSP</a> *)p_buf;</div><div class="line"></div><div class="line">            <a class="code" href="group___t_r_a_c_e.html#ga517945d492f75547264f521def378025">APP_PRINT_TRACE2</a>(<span class="stringliteral">&quot;protocol register response: psm 0x%04x, cause 0x%04x\r\n&quot;</span>, p_rsp-&gt;<a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html#a38a3d76182946faeb6b5ea25bed58432">psm</a>, p_rsp-&gt;<a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (!p_rsp-&gt;<a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>)</div><div class="line">            {</div><div class="line">                <a class="code" href="group___m_p_a.html#ga170638a84871c039ac26e18585dd81dc">mpa_send_l2c_conn_req</a>(<a class="code" href="group___b_t___t_y_p_e_s.html#ga6db75c9162ffb534c855804327fea0ea">PSM_AVDTP</a>, <a class="code" href="group___b_t___t_y_p_e_s.html#ga757abe5de4d297c7fb59e294b3647667">UUID_AVDTP</a>, proto_id, 672, bd_addr, <a class="code" href="group___m_p_a.html#gae0f294a01aa4a4b5e64786277bc916a9">MPA_L2C_MODE_BASIC</a>, 0xFFFF);</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a8b906e2b0e69038834821c9038faeb48">L2C_CONN_RSP</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___m_p_a___l2_c___c_o_n_n___r_s_p.html">T_MPA_L2C_CONN_RSP</a> *p_rsp = (<a class="code" href="struct_t___m_p_a___l2_c___c_o_n_n___r_s_p.html">T_MPA_L2C_CONN_RSP</a> *)p_buf;</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (p_rsp-&gt;<a class="code" href="struct_t___m_p_a___l2_c___c_o_n_n___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>)</div><div class="line">            {</div><div class="line">                <a class="code" href="group___t_r_a_c_e.html#ga57c6954e0ebb68c0ca06a0052659be48">APP_PRINT_ERROR1</a>(<span class="stringliteral">&quot;send l2cap connection request fail, cause 0x%04x&quot;</span>, p_rsp-&gt;<a class="code" href="struct_t___m_p_a___l2_c___c_o_n_n___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a6895d3bf3e3e409bbb34bfb5dab8cf0d">L2C_CONN_CMPL</a>:</div><div class="line">        {</div><div class="line">            T_MPA_L2C_CONN_CMPL *p_info = (T_MPA_L2C_CONN_CMPL *)p_buf;</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (!p_info-&gt;cause)</div><div class="line">            {</div><div class="line">                <a class="code" href="group___m_p_a.html#ga2d4a9f38b81b8ce790cc64d54b0f2569">mpa_send_l2c_disconn_req</a>(p_info-&gt;cid);</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a728fbe199379fa0492962f8421a6a9b6">L2C_DISCONN_RSP</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___m_p_a___l2_c___d_i_s_c_o_n_n___r_s_p.html">T_MPA_L2C_DISCONN_RSP</a> *p_rsp = (<a class="code" href="struct_t___m_p_a___l2_c___d_i_s_c_o_n_n___r_s_p.html">T_MPA_L2C_DISCONN_RSP</a> *)p_buf;</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (p_rsp-&gt;<a class="code" href="struct_t___m_p_a___l2_c___d_i_s_c_o_n_n___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>)</div><div class="line">            {</div><div class="line">                <a class="code" href="group___t_r_a_c_e.html#gadbd6667019aa1db0ec6456ec90268f4f">APP_PRINT_TRACE1</a>(<span class="stringliteral">&quot;l2cap disconnect response, cause 0x%04x&quot;</span>, p_rsp-&gt;<a class="code" href="struct_t___m_p_a___l2_c___d_i_s_c_o_n_n___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a>(<a class="code" href="group___b_t___t_y_p_e_s.html#ga6db75c9162ffb534c855804327fea0ea">PSM_AVDTP</a>, test_l2c_cb, &amp;proto_id);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga2af6cf949033fd486e7215c5c8cac263"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2af6cf949033fd486e7215c5c8cac263">&#9670;&nbsp;</a></span>mpa_send_l2c_disconn_cfm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mpa_send_l2c_disconn_cfm </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a confirmation for a L2CAP disconnection request from remote device. </p>
<p><a class="el" href="mpa_8h_source.html">mpa.h</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cid</td><td>Local channel ID of the L2CAP channel.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> test_l2c_cb(<span class="keywordtype">void</span> *p_buf, <a class="code" href="group___m_p_a.html#gaf08739dbd2dc472521bf4b1db8f43047">T_PROTO_MSG</a> msg)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047aa379b954711e3a7b686be2649ee29c24">L2C_DISCONN_IND</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___m_p_a___l2_c___d_i_s_c_o_n_n___i_n_d.html">T_MPA_L2C_DISCONN_IND</a> *p_ind = (<a class="code" href="struct_t___m_p_a___l2_c___d_i_s_c_o_n_n___i_n_d.html">T_MPA_L2C_DISCONN_IND</a> *)p_buf;</div><div class="line"></div><div class="line">            <a class="code" href="group___m_p_a.html#ga2af6cf949033fd486e7215c5c8cac263">mpa_send_l2c_disconn_cfm</a>(p_ind-&gt;<a class="code" href="struct_t___m_p_a___l2_c___d_i_s_c_o_n_n___i_n_d.html#aeb65c8711b864df01fca95cfe904d924">cid</a>);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a>(<a class="code" href="group___b_t___t_y_p_e_s.html#ga6db75c9162ffb534c855804327fea0ea">PSM_AVDTP</a>, test_l2c_cb, &amp;proto_id);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga2cc64da794ffd203f4d48b68fc1d518a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2cc64da794ffd203f4d48b68fc1d518a">&#9670;&nbsp;</a></span>mpa_get_l2c_buf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* mpa_get_l2c_buf </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>proto_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>dlci</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ack</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get buffer from Bluetooth stack to put in L2CAP data which will be sent to remote device. </p>
<p><a class="el" href="mpa_8h_source.html">mpa.h</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Length of L2CAP data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>Offset of real L2CAP data in the buffer. Offset value can be get from <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a6895d3bf3e3e409bbb34bfb5dab8cf0d">L2C_CONN_CMPL</a> message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ack</td><td>Whether need an ack when the buffer was released. If set to true, <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a01d5c3013bd28ad03edcfd8f0d5b6535">L2C_DATA_RSP</a> message will be received in the callback function registered by legacy_register_cb.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The address of the allocated buffer. If the address in NULL, the buffer was get failed.</dd></dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line">uint8_t proto_id;</div><div class="line">uint8_t proto_data[30] = {0};</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> test_l2c_cb(<span class="keywordtype">void</span> *p_buf, <a class="code" href="group___m_p_a.html#gaf08739dbd2dc472521bf4b1db8f43047">T_PROTO_MSG</a> msg)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a6895d3bf3e3e409bbb34bfb5dab8cf0d">L2C_CONN_CMPL</a>:</div><div class="line">        {</div><div class="line">            T_MPA_L2C_CONN_CMPL *p_info = (T_MPA_L2C_CONN_CMPL *)p_buf;</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (!p_info-&gt;cause)</div><div class="line">            {</div><div class="line">                uint8_t *p_buffer = <a class="code" href="group___m_p_a.html#ga2cc64da794ffd203f4d48b68fc1d518a">mpa_get_l2c_buf</a>(proto_id, p_info-&gt;cid, 0, 30, p_info-&gt;ds_data_offset, <span class="keyword">false</span>, 0);</div><div class="line"></div><div class="line">                <span class="keywordflow">if</span> (p_buffer)</div><div class="line">                {</div><div class="line">                    memcpy(p_buffer + p_info-&gt;ds_data_offset, proto_data, 30);</div><div class="line">                    <a class="code" href="group___m_p_a.html#gae7a156221bfa4632b15a77a6e49feacb">mpa_send_l2c_data_req</a>(p_buffer, p_info-&gt;ds_data_offset, p_info-&gt;cid, 30, <span class="keyword">false</span>);</div><div class="line">                }</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a>(<a class="code" href="group___b_t___t_y_p_e_s.html#ga6db75c9162ffb534c855804327fea0ea">PSM_AVDTP</a>, test_l2c_cb, &amp;proto_id);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="gae7a156221bfa4632b15a77a6e49feacb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae7a156221bfa4632b15a77a6e49feacb">&#9670;&nbsp;</a></span>mpa_send_l2c_data_req()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mpa_send_l2c_data_req </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>auto_flush</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a request to send L2CAP data to remote device. </p>
<p><a class="el" href="mpa_8h_source.html">mpa.h</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_buf</td><td>Address of L2CAP data buffer which is allocated by <a class="el" href="group___m_p_a.html#ga2cc64da794ffd203f4d48b68fc1d518a">mpa_get_l2c_buf</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>Offset of real L2CAP data in the buffer. Offset value can be get from <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a6895d3bf3e3e409bbb34bfb5dab8cf0d">L2C_CONN_CMPL</a> message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cid</td><td>Local channel ID. The value can be get from <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a6895d3bf3e3e409bbb34bfb5dab8cf0d">L2C_CONN_CMPL</a> message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>Length of real L2CAP data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">auto_flush</td><td>Whether the L2CAP data can be flushed or not.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void.</dd></dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line">uint8_t proto_id;</div><div class="line">uint8_t proto_data[30] = {0};</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> test_l2c_cb(<span class="keywordtype">void</span> *p_buf, <a class="code" href="group___m_p_a.html#gaf08739dbd2dc472521bf4b1db8f43047">T_PROTO_MSG</a> msg)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a6895d3bf3e3e409bbb34bfb5dab8cf0d">L2C_CONN_CMPL</a>:</div><div class="line">        {</div><div class="line">            T_MPA_L2C_CONN_CMPL *p_info = (T_MPA_L2C_CONN_CMPL *)p_buf;</div><div class="line"></div><div class="line">            <span class="keywordflow">if</span> (!p_info-&gt;cause)</div><div class="line">            {</div><div class="line">                uint8_t *p_buffer = <a class="code" href="group___m_p_a.html#ga2cc64da794ffd203f4d48b68fc1d518a">mpa_get_l2c_buf</a>(proto_id, p_info-&gt;cid, 0, 30, p_info-&gt;ds_data_offset, <span class="keyword">false</span>, 0);</div><div class="line"></div><div class="line">                <span class="keywordflow">if</span> (p_buffer)</div><div class="line">                {</div><div class="line">                    memcpy(p_buffer + p_info-&gt;ds_data_offset, proto_data, 30);</div><div class="line">                    <a class="code" href="group___m_p_a.html#gae7a156221bfa4632b15a77a6e49feacb">mpa_send_l2c_data_req</a>(p_buffer, p_info-&gt;ds_data_offset, p_info-&gt;cid, 30, <span class="keyword">false</span>);</div><div class="line">                }</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a>(<a class="code" href="group___b_t___t_y_p_e_s.html#ga6db75c9162ffb534c855804327fea0ea">PSM_AVDTP</a>, test_l2c_cb, &amp;proto_id);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga2d53bad21adf7b258a7f1ddd913ac373"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2d53bad21adf7b258a7f1ddd913ac373">&#9670;&nbsp;</a></span>mpa_send_l2c_sec_reg_req()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mpa_send_l2c_sec_reg_req </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>active</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>psm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>server_chann</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>requirement</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a request to register/deregister a protocol security entry over L2CAP. The security will be used when establishing a L2CAP channel. If the request was successfully sent, a message whose type is <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a942bd921a72cd9eae278fdea45b8e8b5">L2C_SEC_REG_RSP</a> and data is <a class="el" href="struct_t___m_p_a___l2_c___s_e_c___r_e_g___r_s_p.html">T_MPA_L2C_SEC_REG_RSP</a> will be received in the callback function registered by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a>. </p>
<p><a class="el" href="mpa_8h_source.html">mpa.h</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">active</td><td>Register/Deregister the security entry. </td></tr>
    <tr><td class="paramname">psm</td><td>PSM value for protocol. </td></tr>
    <tr><td class="paramname">server_chann</td><td>Local server channel number for RFCOMM, for other protocols set to 0. </td></tr>
    <tr><td class="paramname">uuid</td><td>UUID for profiles over rfcomm or UUID for other protocols except RFCOMM. </td></tr>
    <tr><td class="paramname">requirement</td><td>Security requirement of the entry. Valid values are combinations of <a class="el" href="group___m_p_a.html#MPA_SEC_SETTING">MPA_SEC_SETTING</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None.</dd></dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> test_l2c_cb(<span class="keywordtype">void</span> *p_buf, <a class="code" href="group___m_p_a.html#gaf08739dbd2dc472521bf4b1db8f43047">T_PROTO_MSG</a> msg)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a4d59c8c2ddb9372d0ca712a7168b2daf">L2C_PROTO_REG_RSP</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html">T_MPA_L2C_PROTO_REG_RSP</a> *p_rsp = (<a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html">T_MPA_L2C_PROTO_REG_RSP</a> *)p_buf;</div><div class="line">            <a class="code" href="group___t_r_a_c_e.html#ga517945d492f75547264f521def378025">APP_PRINT_TRACE2</a>(<span class="stringliteral">&quot;protocol register response: psm 0x%04x, cause 0x%04x\r\n&quot;</span>, p_rsp-&gt;<a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html#a38a3d76182946faeb6b5ea25bed58432">psm</a>, p_rsp-&gt;<a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a942bd921a72cd9eae278fdea45b8e8b5">L2C_SEC_REG_RSP</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___m_p_a___l2_c___s_e_c___r_e_g___r_s_p.html">T_MPA_L2C_SEC_REG_RSP</a> *p_rsp = (<a class="code" href="struct_t___m_p_a___l2_c___s_e_c___r_e_g___r_s_p.html">T_MPA_L2C_SEC_REG_RSP</a> *)p_buf;</div><div class="line">            <a class="code" href="group___t_r_a_c_e.html#gadbd6667019aa1db0ec6456ec90268f4f">APP_PRINT_TRACE1</a>(<span class="stringliteral">&quot;protocol security requirement register response: cause 0x%04x\r\n&quot;</span>, p_rsp-&gt;<a class="code" href="struct_t___m_p_a___l2_c___s_e_c___r_e_g___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a>(<a class="code" href="group___b_t___t_y_p_e_s.html#ga6db75c9162ffb534c855804327fea0ea">PSM_AVDTP</a>, test_l2c_cb, &amp;proto_id);</div><div class="line">    <a class="code" href="group___m_p_a.html#ga2d53bad21adf7b258a7f1ddd913ac373">mpa_send_l2c_sec_reg_req</a>(1, <a class="code" href="group___b_t___t_y_p_e_s.html#ga6db75c9162ffb534c855804327fea0ea">PSM_AVDTP</a>, 0, <a class="code" href="group___b_t___t_y_p_e_s.html#ga757abe5de4d297c7fb59e294b3647667">UUID_AVDTP</a>, <a class="code" href="group___m_p_a.html#ga0070e49aa82ae1d959aa9814fd4740a4">MPA_SEC_BIT_AUTHEN</a> | <a class="code" href="group___m_p_a.html#gad4f45515b51674c04590778520513460">MPA_SEC_BIT_MITM</a>);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="gabd5d7bdc078b1b23a932664c1f38012a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabd5d7bdc078b1b23a932664c1f38012a">&#9670;&nbsp;</a></span>mpa_send_author_cfm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mpa_send_author_cfm </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>bd_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_p___common___exported___types.html#ga17c405b4388243cdfbfdbd543ddd09b2">T_GAP_CFM_CAUSE</a>&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a confirmation for authorization request indication. This function is used when receiving a message whose type is <a class="el" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a88cc1f35a75b3eaf221b7ba189e30eae">L2C_PROTO_AUTHOR_IND</a> and data is <a class="el" href="struct_t___m_p_a___a_u_t_h_o_r___r_e_q___i_n_d.html">T_MPA_AUTHOR_REQ_IND</a> in the callback function registered by <a class="el" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a>. </p>
<p><a class="el" href="mpa_8h_source.html">mpa.h</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bd_addr</td><td>Bluetooth address of remote device. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cause</td><td>Confirmation cause of authorization.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None.</dd></dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line">uint8_t proto_id;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> test_l2c_cb(<span class="keywordtype">void</span> *p_buf, <a class="code" href="group___m_p_a.html#gaf08739dbd2dc472521bf4b1db8f43047">T_PROTO_MSG</a> msg)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a4d59c8c2ddb9372d0ca712a7168b2daf">L2C_PROTO_REG_RSP</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html">T_MPA_L2C_PROTO_REG_RSP</a> *p_rsp = (<a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html">T_MPA_L2C_PROTO_REG_RSP</a> *)p_buf;</div><div class="line">            <a class="code" href="group___t_r_a_c_e.html#ga517945d492f75547264f521def378025">APP_PRINT_TRACE2</a>(<span class="stringliteral">&quot;protocol register response: psm 0x%04x, cause 0x%04x\r\n&quot;</span>, p_rsp-&gt;<a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html#a38a3d76182946faeb6b5ea25bed58432">psm</a>, p_rsp-&gt;<a class="code" href="struct_t___m_p_a___l2_c___p_r_o_t_o___r_e_g___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___m_p_a.html#ggaf08739dbd2dc472521bf4b1db8f43047a88cc1f35a75b3eaf221b7ba189e30eae">L2C_PROTO_AUTHOR_IND</a>:</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_t___m_p_a___a_u_t_h_o_r___r_e_q___i_n_d.html">T_MPA_AUTHOR_REQ_IND</a> *p_ind = (<a class="code" href="struct_t___m_p_a___a_u_t_h_o_r___r_e_q___i_n_d.html">T_MPA_AUTHOR_REQ_IND</a> *)p_buf;</div><div class="line">            <a class="code" href="group___m_p_a.html#gabd5d7bdc078b1b23a932664c1f38012a">mpa_send_author_cfm</a>(p_ind-&gt;<a class="code" href="struct_t___m_p_a___a_u_t_h_o_r___r_e_q___i_n_d.html#a624fd24b46be2b40c8731334c9de5d06">bd_addr</a>, <a class="code" href="group___g_a_p___common___exported___types.html#gga17c405b4388243cdfbfdbd543ddd09b2ae7659210dbfb11ce24973bba8aaa6b6c">GAP_CFM_CAUSE_ACCEPT</a>);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___m_p_a.html#ga8783a09ee27ec88efc80e33bf629d4f1">mpa_reg_l2c_proto</a>(<a class="code" href="group___b_t___t_y_p_e_s.html#ga6db75c9162ffb534c855804327fea0ea">PSM_AVDTP</a>, test_l2c_cb, &amp;proto_id);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga3919a936dd52f482283e789d02ef3baf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3919a936dd52f482283e789d02ef3baf">&#9670;&nbsp;</a></span>mpa_reg_rfc_authen_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mpa_reg_rfc_authen_cb </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___m_p_a.html#gaa3b7e146197c1234b83d94574c4dc80f">P_RFC_AUTHEN_CB</a>&#160;</td>
          <td class="paramname"><em>p_func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a callback function to handle authentication responses over RFCOMM. <b>This API can only be used when realize RFCOMM protocol.</b> </p>
<p><a class="el" href="mpa_8h_source.html">mpa.h</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_func</td><td>Callback function to handle authentication response. The function must have the prototype as <a class="el" href="group___m_p_a.html#gaa3b7e146197c1234b83d94574c4dc80f">P_RFC_AUTHEN_CB</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None.</dd></dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> rfc_handle_authen_rsp(<a class="code" href="struct_t___m_p_a___r_f_c___a_u_t_h_e_n___r_s_p.html">T_MPA_RFC_AUTHEN_RSP</a> *p_rsp)</div><div class="line">{</div><div class="line">    <a class="code" href="group___t_r_a_c_e.html#gadbd6667019aa1db0ec6456ec90268f4f">APP_PRINT_TRACE1</a>(<span class="stringliteral">&quot;RFCOMM authentication response: cause 0x%04x&quot;</span>, p_rsp-&gt;<a class="code" href="struct_t___m_p_a___r_f_c___a_u_t_h_e_n___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    uint8_t bd_addr[6] = {0x11, 0x22, 0x33, 0x44, 0x55, 0x66};</div><div class="line"></div><div class="line">    <a class="code" href="group___m_p_a.html#ga3919a936dd52f482283e789d02ef3baf">mpa_reg_rfc_authen_cb</a>(rfc_handle_authen_rsp);</div><div class="line"></div><div class="line">    <span class="comment">// ...</span></div><div class="line">    <span class="comment">// HFP connected</span></div><div class="line">    <span class="comment">// ...</span></div><div class="line"></div><div class="line">    <a class="code" href="group___m_p_a.html#ga26b0a58e55895f0c212fa98acdbff42d">mpa_send_rfc_authen_req</a>(bd_addr, 0x40, 0x12, <a class="code" href="group___b_t___t_y_p_e_s.html#ga269b7d3ec23604d90525e8f7a54d4f72">UUID_HANDSFREE</a>, 0);</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga26b0a58e55895f0c212fa98acdbff42d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga26b0a58e55895f0c212fa98acdbff42d">&#9670;&nbsp;</a></span>mpa_send_rfc_authen_req()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mpa_send_rfc_authen_req </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>bd_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>dlci</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>outgoing</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a request to start authentication for a profile on RFCOMM channel. If the request was successfully sent, a response message will be received in the callback function registered by <a class="el" href="group___m_p_a.html#ga3919a936dd52f482283e789d02ef3baf">mpa_reg_rfc_authen_cb</a>. <b>This API can only be used when realize RFCOMM protocol.</b> </p>
<p><a class="el" href="mpa_8h_source.html">mpa.h</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bd_addr</td><td>Bluetooth address of remote device. </td></tr>
    <tr><td class="paramname">cid</td><td>L2CAP local channel ID. </td></tr>
    <tr><td class="paramname">dlci</td><td>DLCI value for the RFCOMM channel. </td></tr>
    <tr><td class="paramname">uuid</td><td>UUID for profiles over rfcomm. </td></tr>
    <tr><td class="paramname">outgoing</td><td>Direction of the profile over rfcomm channel.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None.</dd></dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> rfc_handle_authen_rsp(<a class="code" href="struct_t___m_p_a___r_f_c___a_u_t_h_e_n___r_s_p.html">T_MPA_RFC_AUTHEN_RSP</a> *p_rsp)</div><div class="line">{</div><div class="line">    <a class="code" href="group___t_r_a_c_e.html#gadbd6667019aa1db0ec6456ec90268f4f">APP_PRINT_TRACE1</a>(<span class="stringliteral">&quot;RFCOMM authentication response: cause 0x%04x&quot;</span>, p_rsp-&gt;<a class="code" href="struct_t___m_p_a___r_f_c___a_u_t_h_e_n___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    uint8_t bd_addr[6] = {0x11, 0x22, 0x33, 0x44, 0x55, 0x66};</div><div class="line"></div><div class="line">    <a class="code" href="group___m_p_a.html#ga3919a936dd52f482283e789d02ef3baf">mpa_reg_rfc_authen_cb</a>(rfc_handle_authen_rsp);</div><div class="line"></div><div class="line">    <span class="comment">// ...</span></div><div class="line">    <span class="comment">// HFP connected</span></div><div class="line">    <span class="comment">// ...</span></div><div class="line"></div><div class="line">    <a class="code" href="group___m_p_a.html#ga26b0a58e55895f0c212fa98acdbff42d">mpa_send_rfc_authen_req</a>(bd_addr, 0x40, 0x12, <a class="code" href="group___b_t___t_y_p_e_s.html#ga269b7d3ec23604d90525e8f7a54d4f72">UUID_HANDSFREE</a>, 0);</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->

<HR SIZE=5>
<font size="3" color="black">Copyright(c) 2020, <a href=" http://www.realtek.com.tw/"><font size="3" color="#6FB7B7"><b>Realtek Semiconductor Corporation</b></font></a>. All rights reserved.</font> 
