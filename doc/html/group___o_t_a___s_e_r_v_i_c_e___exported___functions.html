<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BT AUDIO SDK: OTA service Exported Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bbpro-h55px.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BT AUDIO SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,true,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">OTA service Exported Functions<div class="ingroups"><a class="el" href="group___a_p_i___reference.html">API Reference</a> &raquo; <a class="el" href="group___b_l_u_e_t_o_o_t_h.html">Bluetooth</a> &raquo; <a class="el" href="group___p_r_o_f_i_l_e___a_p_i.html">Profile</a> &raquo; <a class="el" href="group___bluetooth___services.html">Bluetooth Services</a> &raquo; <a class="el" href="group___o_t_a___s_e_r_v_i_c_e.html">OTA Service</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa4847d4dd2dab51e0d06e44bbfc6763d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_t_a___s_e_r_v_i_c_e___exported___functions.html#gaa4847d4dd2dab51e0d06e44bbfc6763d">ota_service_write_post_callback</a> (uint16_t conn_handle, uint16_t cid, <a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a> service_id, uint16_t attrib_index, uint16_t length, uint8_t *p_value)</td></tr>
<tr class="memdesc:gaa4847d4dd2dab51e0d06e44bbfc6763d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write characteristic data from service.  <a href="#gaa4847d4dd2dab51e0d06e44bbfc6763d">More...</a><br /></td></tr>
<tr class="separator:gaa4847d4dd2dab51e0d06e44bbfc6763d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa0b591ba9dfbbc6f70769ef8bc97b4a8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_t_a___s_e_r_v_i_c_e___exported___functions.html#gaa0b591ba9dfbbc6f70769ef8bc97b4a8">ota_service_attr_write_cb</a> (uint16_t conn_handle, uint16_t cid, <a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a> service_id, uint16_t attr_index, <a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#ga07c105220cd4d1b097c670b9d2841114">T_WRITE_TYPE</a> write_type, uint16_t length, uint8_t *p_value, <a class="el" href="group___p___f_u_n___e_x_t___w_r_i_t_e___i_n_d___p_o_s_t___p_r_o_c.html#ga75ebe98da0c01dc190db242e779da4ab">P_FUN_EXT_WRITE_IND_POST_PROC</a> *p_write_ind_post_proc)</td></tr>
<tr class="separator:gaa0b591ba9dfbbc6f70769ef8bc97b4a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad45991cf34ca697984764594bd948a75"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_t_a___s_e_r_v_i_c_e___exported___functions.html#gad45991cf34ca697984764594bd948a75">ota_service_attr_read_cb</a> (uint16_t conn_handle, uint16_t cid, <a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a> service_id, uint16_t attr_index, uint16_t offset, uint16_t *p_length, uint8_t **pp_value)</td></tr>
<tr class="memdesc:gad45991cf34ca697984764594bd948a75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read characteristic data from service.  <a href="#gad45991cf34ca697984764594bd948a75">More...</a><br /></td></tr>
<tr class="separator:gad45991cf34ca697984764594bd948a75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga268c37e35bb34b56ed9d284c647bde6a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_t_a___s_e_r_v_i_c_e___exported___functions.html#ga268c37e35bb34b56ed9d284c647bde6a">ota_add_service</a> (void *p_func)</td></tr>
<tr class="memdesc:ga268c37e35bb34b56ed9d284c647bde6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add OTA BLE service to application.  <a href="#ga268c37e35bb34b56ed9d284c647bde6a">More...</a><br /></td></tr>
<tr class="separator:ga268c37e35bb34b56ed9d284c647bde6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8b1e1f654dfabd3e948331669a44053a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_t_a___s_e_r_v_i_c_e___exported___functions.html#ga8b1e1f654dfabd3e948331669a44053a">ota_service_send_notification</a> (uint16_t conn_handle, uint16_t cid, uint8_t *p_data, uint16_t data_len)</td></tr>
<tr class="memdesc:ga8b1e1f654dfabd3e948331669a44053a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send notification to peer side.  <a href="#ga8b1e1f654dfabd3e948331669a44053a">More...</a><br /></td></tr>
<tr class="separator:ga8b1e1f654dfabd3e948331669a44053a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gaae01d5d9094cfa6fda6a832ecbf89624"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="struct_t___f_u_n___g_a_t_t___e_x_t___s_e_r_v_i_c_e___c_b_s.html">T_FUN_GATT_EXT_SERVICE_CBS</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_t_a___s_e_r_v_i_c_e___exported___functions.html#gaae01d5d9094cfa6fda6a832ecbf89624">ota_service_cbs</a></td></tr>
<tr class="memdesc:gaae01d5d9094cfa6fda6a832ecbf89624"><td class="mdescLeft">&#160;</td><td class="mdescRight">OTA BLE Service Callbacks.  <a href="#gaae01d5d9094cfa6fda6a832ecbf89624">More...</a><br /></td></tr>
<tr class="separator:gaae01d5d9094cfa6fda6a832ecbf89624"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaa4847d4dd2dab51e0d06e44bbfc6763d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa4847d4dd2dab51e0d06e44bbfc6763d">&#9670;&nbsp;</a></span>ota_service_write_post_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ota_service_write_post_callback </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a>&#160;</td>
          <td class="paramname"><em>service_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>attrib_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>p_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write characteristic data from service. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn_handle</td><td>connection handle of current ACL link </td></tr>
    <tr><td class="paramname">cid</td><td>L2CAP channel id </td></tr>
    <tr><td class="paramname">service_id</td><td>Service ID to be written </td></tr>
    <tr><td class="paramname">attr_index</td><td>Attribute index of characteristic </td></tr>
    <tr><td class="paramname">write_type</td><td>Write type of data to be written </td></tr>
    <tr><td class="paramname">length</td><td>Length of value to be written </td></tr>
    <tr><td class="paramname">p_value</td><td>Value to be written </td></tr>
    <tr><td class="paramname">p_write_ind_post_proc</td><td>Write indicate post procedure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>T_APP_RESULT </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Profile</td><td>procedure result </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaa0b591ba9dfbbc6f70769ef8bc97b4a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa0b591ba9dfbbc6f70769ef8bc97b4a8">&#9670;&nbsp;</a></span>ota_service_attr_write_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> ota_service_attr_write_cb </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a>&#160;</td>
          <td class="paramname"><em>service_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>attr_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#ga07c105220cd4d1b097c670b9d2841114">T_WRITE_TYPE</a>&#160;</td>
          <td class="paramname"><em>write_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>p_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___p___f_u_n___e_x_t___w_r_i_t_e___i_n_d___p_o_s_t___p_r_o_c.html#ga75ebe98da0c01dc190db242e779da4ab">P_FUN_EXT_WRITE_IND_POST_PROC</a> *&#160;</td>
          <td class="paramname"><em>p_write_ind_post_proc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="gad45991cf34ca697984764594bd948a75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad45991cf34ca697984764594bd948a75">&#9670;&nbsp;</a></span>ota_service_attr_read_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> ota_service_attr_read_cb </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a>&#160;</td>
          <td class="paramname"><em>service_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>attr_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>p_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t **&#160;</td>
          <td class="paramname"><em>pp_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read characteristic data from service. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn_id</td><td>ID to identify the connection </td></tr>
    <tr><td class="paramname">service_id</td><td>ServiceID of characteristic data </td></tr>
    <tr><td class="paramname">attr_index</td><td>Attribute index of getting characteristic data </td></tr>
    <tr><td class="paramname">offset</td><td>Used for Blob Read </td></tr>
    <tr><td class="paramname">p_length</td><td>Length of getting characteristic data </td></tr>
    <tr><td class="paramname">pp_value</td><td>Data got from service </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>T_APP_RESULT </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Profile</td><td>procedure result </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga268c37e35bb34b56ed9d284c647bde6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga268c37e35bb34b56ed9d284c647bde6a">&#9670;&nbsp;</a></span>ota_add_service()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a> ota_add_service </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add OTA BLE service to application. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_func</td><td>Pointer of APP callback function called by profile </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Service ID auto generated by profile layer </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">A</td><td>T_SERVER_ID type value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga8b1e1f654dfabd3e948331669a44053a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8b1e1f654dfabd3e948331669a44053a">&#9670;&nbsp;</a></span>ota_service_send_notification()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ota_service_send_notification </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>p_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>data_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send notification to peer side. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn_handle</td><td>connection handle of current ACL link </td></tr>
    <tr><td class="paramname">cid</td><td>L2cap channel id </td></tr>
    <tr><td class="paramname">p_data</td><td>value to be send to peer </td></tr>
    <tr><td class="paramname">data_len</td><td>data length of the value to be send </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void <b>Example usage</b> <div class="fragment"><div class="line"><span class="comment">//case1:call ota_service_send_notification() in xxx_write_cb()</span></div><div class="line"><span class="keyword">static</span> <a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> <a class="code" href="group___o_t_a___s_e_r_v_i_c_e___exported___functions.html#gaa0b591ba9dfbbc6f70769ef8bc97b4a8">ota_service_attr_write_cb</a>(uint16_t conn_handle, uint16_t cid, <a class="code" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a> service_id,</div><div class="line">                                      uint16_t attr_index, <a class="code" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#ga07c105220cd4d1b097c670b9d2841114">T_WRITE_TYPE</a> write_type, uint16_t length,</div><div class="line">                                      uint8_t *p_value, <a class="code" href="group___p___f_u_n___e_x_t___w_r_i_t_e___i_n_d___p_o_s_t___p_r_o_c.html#ga75ebe98da0c01dc190db242e779da4ab">P_FUN_EXT_WRITE_IND_POST_PROC</a>  *p_write_ind_post_proc)</div><div class="line">{</div><div class="line">    ......</div><div class="line">    <a class="code" href="group___o_t_a___s_e_r_v_i_c_e___exported___functions.html#ga8b1e1f654dfabd3e948331669a44053a">ota_service_send_notification</a>(conn_handle, cid, p_data, data_len);</div><div class="line">    ......</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//case2:case1:call ota_service_send_notification() in xxx_read_cb()</span></div><div class="line"><span class="keyword">static</span> <a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> <a class="code" href="group___o_t_a___s_e_r_v_i_c_e___exported___functions.html#gad45991cf34ca697984764594bd948a75">ota_service_attr_read_cb</a>(uint16_t conn_handle, uint16_t cid,</div><div class="line">                                     <a class="code" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a> service_id,</div><div class="line">                                     uint16_t attr_index,</div><div class="line">                                     uint16_t offset, uint16_t *p_length, uint8_t **pp_value)</div><div class="line">{</div><div class="line">    ......</div><div class="line">    <a class="code" href="group___o_t_a___s_e_r_v_i_c_e___exported___functions.html#ga8b1e1f654dfabd3e948331669a44053a">ota_service_send_notification</a>(conn_handle, cid, p_data, data_len);</div><div class="line">    ......</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//case3:call ota_service_send_notification() when can not directly get conn_handle and cid</span></div><div class="line"><span class="keywordtype">void</span> test()</div><div class="line">{</div><div class="line">    uint8_t remote_bd_addr[6];</div><div class="line">    <a class="code" href="group___g_a_p___common___exported___types.html#ga41dd9d848e985c7c492f8f43e1da9249">T_GAP_REMOTE_ADDR_TYPE</a> remote_bd_type;</div><div class="line">    uint16_t cid;</div><div class="line">    uint8_t cid_num;</div><div class="line">    uint16_t conn_handle;</div><div class="line">    <a class="code" href="group___g_a_p___c_h_a_n_n_e_l___e_x_p_o_r_t___functions.html#gab4666dc5175fa83cf35d93fa2040c4a9">gap_chann_get_handle</a>(remote_bd_addr, remote_bd_type, &amp;conn_handle);</div><div class="line">    <a class="code" href="group___g_a_p___c_h_a_n_n_e_l___e_x_p_o_r_t___functions.html#ga0a7b90198405bba2f685afe2b6a936da">gap_chann_get_cid</a>(conn_handle, 1, &amp;cid, &amp;cid_num);</div><div class="line">    <a class="code" href="group___o_t_a___s_e_r_v_i_c_e___exported___functions.html#ga8b1e1f654dfabd3e948331669a44053a">ota_service_send_notification</a>(conn_handle, cid, p_data, data_len);</div><div class="line">}</div></div><!-- fragment --></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn_handle</td><td>connection handle of current ACL link </td></tr>
    <tr><td class="paramname">cid</td><td>L2cap channel id </td></tr>
    <tr><td class="paramname">p_data</td><td>value to be send to peer </td></tr>
    <tr><td class="paramname">data_len</td><td>data length of the value to be send </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void <b>Example usage</b> <div class="fragment"><div class="line"><span class="comment">//case1:call ota_service_send_notification() in xxx_write_cb()</span></div><div class="line"><span class="keyword">static</span> <a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> <a class="code" href="group___o_t_a___s_e_r_v_i_c_e___exported___functions.html#gaa0b591ba9dfbbc6f70769ef8bc97b4a8">ota_service_attr_write_cb</a>(uint16_t conn_handle, uint16_t cid, <a class="code" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a> service_id,</div><div class="line">                                      uint16_t attr_index, <a class="code" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#ga07c105220cd4d1b097c670b9d2841114">T_WRITE_TYPE</a> write_type, uint16_t length,</div><div class="line">                                      uint8_t *p_value, <a class="code" href="group___p___f_u_n___e_x_t___w_r_i_t_e___i_n_d___p_o_s_t___p_r_o_c.html#ga75ebe98da0c01dc190db242e779da4ab">P_FUN_EXT_WRITE_IND_POST_PROC</a>  *p_write_ind_post_proc)</div><div class="line">{</div><div class="line">    ......</div><div class="line">    <a class="code" href="group___o_t_a___s_e_r_v_i_c_e___exported___functions.html#ga8b1e1f654dfabd3e948331669a44053a">ota_service_send_notification</a>(conn_handle, cid, p_data, data_len);</div><div class="line">    ......</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//case2:call ota_service_send_notification() in xxx_read_cb()</span></div><div class="line"><span class="keyword">static</span> <a class="code" href="group___g_a_p___common___exported___types.html#ga90b0c39404615bbdf0fc222483ed3fb9">T_APP_RESULT</a> <a class="code" href="group___o_t_a___s_e_r_v_i_c_e___exported___functions.html#gad45991cf34ca697984764594bd948a75">ota_service_attr_read_cb</a>(uint16_t conn_handle, uint16_t cid,</div><div class="line">                                     <a class="code" href="group___g_a_t_t___s_e_r_v_e_r___c_o_m_m_o_n___exported___types.html#gada7cb21908790f5a0751f80b733f5287">T_SERVER_ID</a> service_id,</div><div class="line">                                     uint16_t attr_index,</div><div class="line">                                     uint16_t offset, uint16_t *p_length, uint8_t **pp_value)</div><div class="line">{</div><div class="line">    ......</div><div class="line">    <a class="code" href="group___o_t_a___s_e_r_v_i_c_e___exported___functions.html#ga8b1e1f654dfabd3e948331669a44053a">ota_service_send_notification</a>(conn_handle, cid, p_data, data_len);</div><div class="line">    ......</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//case3:call ota_service_send_notification() when can not directly get conn_handle and cid</span></div><div class="line"><span class="keywordtype">void</span> test()</div><div class="line">{</div><div class="line">    uint8_t remote_bd_addr[6];</div><div class="line">    <a class="code" href="group___g_a_p___common___exported___types.html#ga41dd9d848e985c7c492f8f43e1da9249">T_GAP_REMOTE_ADDR_TYPE</a> remote_bd_type;</div><div class="line">    uint16_t cid;</div><div class="line">    uint8_t cid_num;</div><div class="line">    uint16_t conn_handle;</div><div class="line">    <a class="code" href="group___g_a_p___c_h_a_n_n_e_l___e_x_p_o_r_t___functions.html#gab4666dc5175fa83cf35d93fa2040c4a9">gap_chann_get_handle</a>(remote_bd_addr, remote_bd_type, &amp;conn_handle);</div><div class="line">    <a class="code" href="group___g_a_p___c_h_a_n_n_e_l___e_x_p_o_r_t___functions.html#ga0a7b90198405bba2f685afe2b6a936da">gap_chann_get_cid</a>(conn_handle, 1, &amp;cid, &amp;cid_num);</div><div class="line">    <a class="code" href="group___o_t_a___s_e_r_v_i_c_e___exported___functions.html#ga8b1e1f654dfabd3e948331669a44053a">ota_service_send_notification</a>(conn_handle, cid, p_data, data_len);</div><div class="line">}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="gaae01d5d9094cfa6fda6a832ecbf89624"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaae01d5d9094cfa6fda6a832ecbf89624">&#9670;&nbsp;</a></span>ota_service_cbs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="struct_t___f_u_n___g_a_t_t___e_x_t___s_e_r_v_i_c_e___c_b_s.html">T_FUN_GATT_EXT_SERVICE_CBS</a> ota_service_cbs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div><div class="line">{</div><div class="line">    <a class="code" href="group___o_t_a___s_e_r_v_i_c_e___exported___functions.html#gad45991cf34ca697984764594bd948a75">ota_service_attr_read_cb</a>,   </div><div class="line">    <a class="code" href="group___o_t_a___s_e_r_v_i_c_e___exported___functions.html#gaa0b591ba9dfbbc6f70769ef8bc97b4a8">ota_service_attr_write_cb</a>,  </div><div class="line">    <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>                        </div><div class="line">}</div><div class="ttc" id="group___platform___types___exported___macros_html_ga070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> platform_types.h:46</div></div>
<div class="ttc" id="group___o_t_a___s_e_r_v_i_c_e___exported___functions_html_gaa0b591ba9dfbbc6f70769ef8bc97b4a8"><div class="ttname"><a href="group___o_t_a___s_e_r_v_i_c_e___exported___functions.html#gaa0b591ba9dfbbc6f70769ef8bc97b4a8">ota_service_attr_write_cb</a></div><div class="ttdeci">static T_APP_RESULT ota_service_attr_write_cb(uint16_t conn_handle, uint16_t cid, T_SERVER_ID service_id, uint16_t attr_index, T_WRITE_TYPE write_type, uint16_t length, uint8_t *p_value, P_FUN_EXT_WRITE_IND_POST_PROC *p_write_ind_post_proc)</div><div class="ttdef"><b>Definition:</b> ota_service.c:479</div></div>
<div class="ttc" id="group___o_t_a___s_e_r_v_i_c_e___exported___functions_html_gad45991cf34ca697984764594bd948a75"><div class="ttname"><a href="group___o_t_a___s_e_r_v_i_c_e___exported___functions.html#gad45991cf34ca697984764594bd948a75">ota_service_attr_read_cb</a></div><div class="ttdeci">static T_APP_RESULT ota_service_attr_read_cb(uint16_t conn_handle, uint16_t cid, T_SERVER_ID service_id, uint16_t attr_index, uint16_t offset, uint16_t *p_length, uint8_t **pp_value)</div><div class="ttdoc">Read characteristic data from service. </div><div class="ttdef"><b>Definition:</b> ota_service.c:553</div></div>
</div><!-- fragment -->
<p>OTA BLE Service Callbacks. </p>

</div>
</div>
</div><!-- contents -->

<HR SIZE=5>
<font size="3" color="black">Copyright(c) 2020, <a href=" http://www.realtek.com.tw/"><font size="3" color="#6FB7B7"><b>Realtek Semiconductor Corporation</b></font></a>. All rights reserved.</font> 
