<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BT AUDIO SDK: Task Log Exported Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bbpro-h55px.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BT AUDIO SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,true,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Task Log Exported Functions<div class="ingroups"><a class="el" href="group___a_p_i___reference.html">API Reference</a> &raquo; <a class="el" href="group___h_a_l.html">Hal</a> &raquo; <a class="el" href="group___h_a_l__87x3d.html">rtl87x3d</a> &raquo; <a class="el" href="group___h_a_l__87x3d___task___log.html">Save Log To Flash Api</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga40628a3ce9afe854dc268dcb2c8c7ceb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l__87x3d___t_a_s_k___l_o_g___exported___functions.html#ga40628a3ce9afe854dc268dcb2c8c7ceb">log_task_init</a> (size_t log_part_addr, size_t log_part_size, size_t log_rb_size, <a class="el" href="group___m_e_m___c_o_n_f_i_g___exported___types.html#ga20f6fc28665b1bdf8326a4826ba69b77">RAM_TYPE</a> rb_ram_type, bool use_dma)</td></tr>
<tr class="memdesc:ga40628a3ce9afe854dc268dcb2c8c7ceb"><td class="mdescLeft">&#160;</td><td class="mdescRight">set up log2flash task  <a href="#ga40628a3ce9afe854dc268dcb2c8c7ceb">More...</a><br /></td></tr>
<tr class="separator:ga40628a3ce9afe854dc268dcb2c8c7ceb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2bb7a7f9751c2a7ebaefc89a1bffa442"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l__87x3d___t_a_s_k___l_o_g___exported___functions.html#ga2bb7a7f9751c2a7ebaefc89a1bffa442">enable_log_to_flash</a> (bool enable_status)</td></tr>
<tr class="memdesc:ga2bb7a7f9751c2a7ebaefc89a1bffa442"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable or disable log to flash.  <a href="#ga2bb7a7f9751c2a7ebaefc89a1bffa442">More...</a><br /></td></tr>
<tr class="separator:ga2bb7a7f9751c2a7ebaefc89a1bffa442"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga99b0ac7e66da5cef1a1c79a5d9232bbd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l__87x3d___t_a_s_k___l_o_g___exported___functions.html#ga99b0ac7e66da5cef1a1c79a5d9232bbd">log_flash_format</a> (void)</td></tr>
<tr class="memdesc:ga99b0ac7e66da5cef1a1c79a5d9232bbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">format log flash circular block to the init state  <a href="#ga99b0ac7e66da5cef1a1c79a5d9232bbd">More...</a><br /></td></tr>
<tr class="separator:ga99b0ac7e66da5cef1a1c79a5d9232bbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga40628a3ce9afe854dc268dcb2c8c7ceb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga40628a3ce9afe854dc268dcb2c8c7ceb">&#9670;&nbsp;</a></span>log_task_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int log_task_init </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>log_part_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>log_part_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>log_rb_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___m_e_m___c_o_n_f_i_g___exported___types.html#ga20f6fc28665b1bdf8326a4826ba69b77">RAM_TYPE</a>&#160;</td>
          <td class="paramname"><em>rb_ram_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>use_dma</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set up log2flash task </p>
<dl class="Added_API_2_12_0_0"><dt><b><a class="el" href="_added__a_p_i_2_12_0_0.html#_Added_API_2_12_0_0000022">Added Since 2.12.0.0:</a></b></dt><dd></dd></dl>
<dl class="section note"><dt>Note</dt><dd>specify the log partition space on the flash through log_part_addr and log_part_size, specify the log2flash cache ring buffer size through the log_rb_size, LOG_BUFFER_SIZE is the reference value. Please keep the log partition space aligned by 4Kbytes. If the log partition space is under the flash block protection region, please unlock the flash bp level before using it as log partition. If the log partition region is assigned at the address more than 16 Mbytes, please consider to use 4-byte address mode for the flash driver, refer to the api fmc_flash_set_4_byte_address_mode. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">log_part_addr</td><td>log partition address on the flash </td></tr>
    <tr><td class="paramname">log_part_size</td><td>log partition size on the flash </td></tr>
    <tr><td class="paramname">log_rb_size</td><td>log2flash cache ring buffer size on the heap </td></tr>
    <tr><td class="paramname">rb_ram_type</td><td>ref RAM_TYPE definition, RAM_TYPE_DSPSHARE, RAM_TYPE_COMMON_ON or other invalid ram type. </td></tr>
    <tr><td class="paramname">use_dma</td><td>true: use flash dma write. false: use flash user write. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the result of log2flash task init and create </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">!=</td><td>0 error code </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga2bb7a7f9751c2a7ebaefc89a1bffa442"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2bb7a7f9751c2a7ebaefc89a1bffa442">&#9670;&nbsp;</a></span>enable_log_to_flash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enable_log_to_flash </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable_status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable or disable log to flash. </p>
<dl class="Added_API_2_11_1_0"><dt><b><a class="el" href="_added__a_p_i_2_11_1_0.html#_Added_API_2_11_1_0000011">Added Since 2.11.1.0:</a></b></dt><dd></dd></dl>
<dl class="section note"><dt>Note</dt><dd>When user call log_task_int api to init the log to flash function, the log to flash status is enabled by default. If user wants to disable the log to flash operation, use enable_log_to_flash(false) to stop writting log data to flash, but the log task will still run without writting flash. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This api is supported in RTL87x3E and RTL87x3D. It is NOT supported in RTL87x3G. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">enable_status</td><td>true: enable log to flash operation false: disable log to flash operation </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a id="ga99b0ac7e66da5cef1a1c79a5d9232bbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga99b0ac7e66da5cef1a1c79a5d9232bbd">&#9670;&nbsp;</a></span>log_flash_format()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int log_flash_format </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>format log flash circular block to the init state </p>
<dl class="Experimental_Added_API_2_13_0_0"><dt><b><a class="el" href="_experimental__added__a_p_i_2_13_0_0.html#_Experimental_Added_API_2_13_0_0000130">Experimental Added Since 2.13.0.0:</a></b></dt><dd></dd></dl>
<dl class="section note"><dt>Note</dt><dd>If user needs to format the log flash partition when the log2flash task is running, log_flash_format can be used. When log2flash task is running ok, the flash bp level should be unlocked by fmc_flash_nor_set_bp_lv already. So it doesn't need to unlock the flash bp level before calling log_flash_format. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This api can't be used before log_task_init. This api is supported in RTL87x3E and RTL87x3D. It is NOT supported in RTL87x3G. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code 0: success,others: error code </dd></dl>

</div>
</div>
</div><!-- contents -->

<HR SIZE=5>
<font size="3" color="black">Copyright(c) 2020, <a href=" http://www.realtek.com.tw/"><font size="3" color="#6FB7B7"><b>Realtek Semiconductor Corporation</b></font></a>. All rights reserved.</font> 
