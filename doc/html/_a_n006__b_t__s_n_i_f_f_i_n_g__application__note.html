<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BT AUDIO SDK: $title</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bbpro-h55px.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BT AUDIO SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,true,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="Sniffing_Page"></a>
eRWS Sniffing Introduction </h1>
<h2><a class="anchor" id="Rev"></a>
Revision History</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Version  </th><th class="markdownTableHeadCenter">Date  </th><th class="markdownTableHeadCenter">Description   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">V1.0.0.0  </td><td class="markdownTableBodyCenter">2021/10/21  </td><td class="markdownTableBodyCenter">Stable Release   </td></tr>
</table>
<h2>Contents</h2>
<ul>
<li><a class="el" href="_a_n006__b_t__s_n_i_f_f_i_n_g__application__note.html#Overview">Overview</a></li>
<li><a class="el" href="_a_n006__b_t__s_n_i_f_f_i_n_g__application__note.html#APP_sniffing_state_machine">APP sniffing state machine</a></li>
<li><a class="el" href="_a_n006__b_t__s_n_i_f_f_i_n_g__application__note.html#A2DP_sniffing_flow">A2DP sniffing flow</a></li>
<li><a class="el" href="_a_n006__b_t__s_n_i_f_f_i_n_g__application__note.html#HFP_Sniffing_flow">HFP sniffing flow</a></li>
<li><a class="el" href="_a_n006__b_t__s_n_i_f_f_i_n_g__application__note.html#Roleswap">Roleswap</a></li>
</ul>
<h2><a class="anchor" id="Overview"></a>
Overview</h2>
<p>The purpose of this document is to give an overview of eRWS sniffing mechanism.</p>
<p><b> bud role </b> Primary role: the bud which connect to the source directly. Secondary role: the bud which connect to the primary bud.</p>
<p><b> b2s link </b> The bt acl link which between the primary bud and the source.</p>
<p><b> b2b link </b> The bt acl link which between the primary bud and the secondary bud.</p>
<p><b> roleswap </b> The roles of the two buds are interchangeable during a2dp streaming and sco active.</p>
<h2><a class="anchor" id="APP_sniffing_state_machine"></a>
APP sniffing state machine</h2>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span></div><div class="line">{</div><div class="line">    <a class="code" href="group___a_p_p___b_t___s_n_i_f_f_i_n_g___exported___types.html#gga4b6b6455f97be108d5a518e6dd3e8d9ca8cff99b39c42058651e9d8160da10aa8">APP_BT_SNIFFING_STATE_IDLE</a>                  = 0x00,  <span class="comment">// b2b and b2s role not ready</span></div><div class="line">    <a class="code" href="group___a_p_p___b_t___s_n_i_f_f_i_n_g___exported___types.html#gga4b6b6455f97be108d5a518e6dd3e8d9ca043b3a49209eda5198761a832b9352aa">APP_BT_SNIFFING_STATE_READY</a>                 = 0x01,  <span class="comment">// no sniffing link</span></div><div class="line">    <a class="code" href="group___a_p_p___b_t___s_n_i_f_f_i_n_g___exported___types.html#gga4b6b6455f97be108d5a518e6dd3e8d9cae9382067957230ad45989345e4ee11d8">APP_BT_SNIFFING_STATE_STARTING</a>              = 0x02,  <span class="comment">// setup sniffing</span></div><div class="line">    <a class="code" href="group___a_p_p___b_t___s_n_i_f_f_i_n_g___exported___types.html#gga4b6b6455f97be108d5a518e6dd3e8d9ca2814dc85500b33c9bb9b7cb73bfcd522">APP_BT_SNIFFING_STATE_SNIFFING</a>              = 0x03,  <span class="comment">// erws sniffing</span></div><div class="line">    <a class="code" href="group___a_p_p___b_t___s_n_i_f_f_i_n_g___exported___types.html#gga4b6b6455f97be108d5a518e6dd3e8d9ca8093b34acd670ce645224652eb816638">APP_BT_SNIFFING_STATE_STOPPING</a>              = 0x04,  <span class="comment">// disconnect sniffing link</span></div><div class="line">    <a class="code" href="group___a_p_p___b_t___s_n_i_f_f_i_n_g___exported___types.html#gga4b6b6455f97be108d5a518e6dd3e8d9ca7ef814a3f2cb856dca68bccec352a96f">APP_BT_SNIFFING_STATE_ROLESWAP</a>              = 0x05,  <span class="comment">// roleswap start</span></div><div class="line">} <a class="code" href="group___a_p_p___b_t___s_n_i_f_f_i_n_g___exported___types.html#ga4b6b6455f97be108d5a518e6dd3e8d9c">T_APP_BT_SNIFFING_STATE</a></div></div><!-- fragment --><div class="image">
<img src="sniffing_state_machine.png" alt="sniffing_state_machine.png"/>
</div>
<h2><a class="anchor" id="A2DP_sniffing_flow"></a>
A2DP sniffing flow</h2>
<div class="image">
<img src="a2dp_sniffing.png" alt="a2dp_sniffing.png"/>
</div>
<h2><a class="anchor" id="HFP_Sniffing_flow"></a>
HFP sniffing flow</h2>
<div class="image">
<img src="hfp_sniffing.png" alt="hfp_sniffing.png"/>
</div>
<h2><a class="anchor" id="Roleswap"></a>
Roleswap</h2>
<p>Triggers: do roleswap when these events happend</p><ul>
<li>Low Battery</li>
<li>Pri bud in-case</li>
<li>Pri bud in-ear/out-ear</li>
</ul>
<div class="image">
<img src="roleswap.png" alt="roleswap.png"/>
</div>
 </div></div><!-- contents -->

<HR SIZE=5>
<font size="3" color="black">Copyright(c) 2020, <a href=" http://www.realtek.com.tw/"><font size="3" color="#6FB7B7"><b>Realtek Semiconductor Corporation</b></font></a>. All rights reserved.</font> 
