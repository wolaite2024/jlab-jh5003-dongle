<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BT AUDIO SDK: $title</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bbpro-h55px.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BT AUDIO SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,true,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="contents">
<div class="textblock"><p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
 </p>
<h1><a class="anchor" id="APP_Stereo_Multilink_Dongle_Page"></a>
APP Stereo_Multilink_Dongle Application Note    </h1>
<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
 </p><center><b>V1.1</b></center><p><br />
 </p><center><b>2024/01/19</b></center><div style="page-break-after: always;"></div><h2><a class="anchor" id="Stereo_Multilink_Dongle_APP_Rev"></a>
Revision History</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Version  </th><th class="markdownTableHeadLeft">Date  </th><th class="markdownTableHeadLeft">Description   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">V1.0.0.0  </td><td class="markdownTableBodyLeft">2021/10/21  </td><td class="markdownTableBodyLeft">Stable Release   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">V1.1  </td><td class="markdownTableBodyLeft">2024/01/19  </td><td class="markdownTableBodyLeft">Modify contents   </td></tr>
</table>
<div style="page-break-after: always;"></div><h2>Contents</h2>
<ul>
<li><a class="el" href="_a_n048__a_p_p__stereo__multilink__dongle.html#Stereo_Multilink_Dongle_APP_Rev">Revision History</a></li>
<li><a class="el" href="_a_n048__a_p_p__stereo__multilink__dongle.html#Stereo_Multilink_Dongle_APP_Table_List">Table List</a></li>
<li><a class="el" href="_a_n048__a_p_p__stereo__multilink__dongle.html#Stereo_Multilink_Dongle_APP_Figure_List">Figure List</a></li>
<li><a class="el" href="_a_n048__a_p_p__stereo__multilink__dongle.html#Stereo_Multilink_Dongle_APP_Glossary">Glossary</a></li>
<li><a class="el" href="_a_n048__a_p_p__stereo__multilink__dongle.html#Stereo_Multilink_Dongle_Introduction">1 Introduction</a><ul>
<li><a class="el" href="_a_n048__a_p_p__stereo__multilink__dongle.html#Stereo_Multilink_Dongle_APP_Introduction_Background_Knowledge">1.1 Background Knowledge</a></li>
<li><a class="el" href="_a_n048__a_p_p__stereo__multilink__dongle.html#Stereo_Multilink_Dongle_APP_Introduction_Tpoll_Rules">1.2 Tpoll Rules</a></li>
<li><a class="el" href="_a_n048__a_p_p__stereo__multilink__dongle.html#Stereo_Multilink_Dongle_APP_Introduction_Htpoll_Rules">1.3 Htpoll Rules</a></li>
</ul>
</li>
<li><a class="el" href="_a_n048__a_p_p__stereo__multilink__dongle.html#Stereo_Multilink_Dongle_Source_code_overview">2 Source Code Overview</a><ul>
<li><a class="el" href="_a_n048__a_p_p__stereo__multilink__dongle.html#Stereo_Multilink_Dongle_Source_code_overview_Setting_Tpoll">2.1 Setting Tpoll</a></li>
<li><a class="el" href="_a_n048__a_p_p__stereo__multilink__dongle.html#Stereo_Multilink_Dongle_Source_code_overview_Setting_Htpoll">2.2 Setting Htpoll</a></li>
</ul>
</li>
</ul>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="Stereo_Multilink_Dongle_APP_Table_List"></a>
Table List</h2>
<ul>
<li><a href="#table_1_1">Table 1-1 Tpoll Rules</a></li>
<li><a href="#table_1_2">Table 1-2 Htpoll Rules</a></li>
</ul>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="Stereo_Multilink_Dongle_APP_Figure_List"></a>
Figure List</h2>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="Stereo_Multilink_Dongle_APP_Glossary"></a>
Glossary</h2>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="Stereo_Multilink_Dongle_Introduction"></a>
1 Introduction</h2>
<p>The purpose of this document is to give an overview of setting stereo multilink's tpoll and htpoll, the source can be gaming dongle or phone.</p>
<h3><a class="anchor" id="Stereo_Multilink_Dongle_APP_Introduction_Background_Knowledge"></a>
1.1 Background Knowledge</h3>
<p>(1) A piconet consists of 2-8 Bluetooth devices, with one as the master and the others as slave.<br />
 (2) Both the master and slave can be in either the Sniff mode or the active mode.<br />
 (3) In active mode, the master poll the slave, and the slave responds to the polling.<br />
 (4) When the master poll, it tx first and then rx, while the slave rx first and then tx.<br />
 (5) There are two types of polling time strategies: tpoll uses interval, htpoll uses duty cycle.<br />
 (6) The tpoll is the uncertain bandwidth, whereas htpoll ensures more certain bandwidth.<br />
 (7) Htpoll is a higher priority than tpoll. If both are set, htpoll take effect.<br />
 (8) Htpoll is commonly used among Realtek devices, such as in the B2B or Bud to a gaming dongle.<br />
 (9) Since phone do not support htpoll, usually bud use htpoll and phone use tpoll in B2S.<br />
</p>
<h3><a class="anchor" id="Stereo_Multilink_Dongle_APP_Introduction_Tpoll_Rules"></a>
1.2 Tpoll Rules</h3>
<center><div id="table_1_1"><b>Table 1-1 Tpoll Rules</b></div></center><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Pri  </th><th class="markdownTableHeadLeft">Global State  </th><th class="markdownTableHeadLeft">B2s-per-link's Tpoll   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">1  </td><td class="markdownTableBodyLeft">flash update  </td><td class="markdownTableBodyLeft">is_active_link ? 16:(40+2*index)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">2  </td><td class="markdownTableBodyLeft">data capture  </td><td class="markdownTableBodyLeft">is_active_link ? tpoll_from_tool:(40+2*index)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">3  </td><td class="markdownTableBodyLeft">gaming dongle  </td><td class="markdownTableBodyLeft">is_active_link ? 12:(40+2*index)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">4  </td><td class="markdownTableBodyLeft">call  </td><td class="markdownTableBodyLeft">is_active_link ? (40+2*index):28   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">5  </td><td class="markdownTableBodyLeft">audio  </td><td class="markdownTableBodyLeft">in_lea_stream ? (is_active_link ? 110:(40+2*index)):(is_active_link ? 26:28)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">6  </td><td class="markdownTableBodyLeft">linkback  </td><td class="markdownTableBodyLeft">is_linkback_one ? 16 : 120   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">7  </td><td class="markdownTableBodyLeft">idle  </td><td class="markdownTableBodyLeft">40+2*index   </td></tr>
</table>
<h3><a class="anchor" id="Stereo_Multilink_Dongle_APP_Introduction_Htpoll_Rules"></a>
1.3 Htpoll Rules</h3>
<p>Note: If dongle is in a2dp, it maybe is calling or playing music. Set htpoll only when has a2dp.<br />
</p>
<center><div id="table_1_2"><b>Table 1-2 Htpoll Rules</b></div></center><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Dongle State  </th><th class="markdownTableHeadLeft">Phone State  </th><th class="markdownTableHeadLeft">Dongle Htpoll  </th><th class="markdownTableHeadLeft">Phone Htpoll   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">a2dp  </td><td class="markdownTableBodyLeft">sco  </td><td class="markdownTableBodyLeft">16/6  </td><td class="markdownTableBodyLeft">set as ref   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">a2dp  </td><td class="markdownTableBodyLeft">a2dp  </td><td class="markdownTableBodyLeft">16/8  </td><td class="markdownTableBodyLeft">-   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">a2dp  </td><td class="markdownTableBodyLeft">idle  </td><td class="markdownTableBodyLeft">58/50  </td><td class="markdownTableBodyLeft">-   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">a2dp  </td><td class="markdownTableBodyLeft">no-link  </td><td class="markdownTableBodyLeft">30/22  </td><td class="markdownTableBodyLeft">-   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">idle/no-link  </td><td class="markdownTableBodyLeft">a2dp  </td><td class="markdownTableBodyLeft">-  </td><td class="markdownTableBodyLeft">58/50   </td></tr>
</table>
<h2><a class="anchor" id="Stereo_Multilink_Dongle_Source_code_overview"></a>
2 Source Code Overview</h2>
<p>This section discribes the main parts of setting stereo multilink's tpoll and htpoll, the source can be gaming dongle or phone.</p>
<h3><a class="anchor" id="Stereo_Multilink_Dongle_Source_code_overview_Setting_Tpoll"></a>
2.1 Setting Tpoll</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> app_bt_policy_qos_param_update(uint8_t *bd_addr, <a class="code" href="group___a_p_p___b_t___p_o_l_i_c_y.html#gab5a783728285a7d6ec7ccfca86488a45">T_BP_TPOLL_EVENT</a> event)</div><div class="line">{</div><div class="line">    <a class="code" href="struct_t___a_p_p___b_r___l_i_n_k.html">T_APP_BR_LINK</a> *p_link;</div><div class="line"></div><div class="line">    app_bt_policy_update_tpoll_context(bd_addr, event);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___a_p_p___l_i_n_k.html#gaac87535034e5cc4d6d4823bc58b2fbf7">app_link_get_b2s_link_num</a>() == 0)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (tpoll_ctx.<a class="code" href="struct_t___b_p___t_p_o_l_l___c_o_n_t_e_x_t.html#a24f43223155793ac285a502497490841">need_reset</a>)</div><div class="line">    {</div><div class="line">        p_link = <a class="code" href="group___a_p_p___l_i_n_k.html#ga71a02a83a5037c696161a06afd2cf31b">app_link_find_b2s_link</a>(bd_addr);</div><div class="line">        <span class="keywordflow">if</span> (p_link != <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line">        {</div><div class="line">            app_bt_policy_set_tpoll(p_link-&gt;<a class="code" href="struct_t___a_p_p___b_r___l_i_n_k.html#a1e6927fa1486224044e568f9c370519b">id</a>, p_link-&gt;tpoll_value);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (tpoll_ctx.<a class="code" href="struct_t___b_p___t_p_o_l_l___c_o_n_t_e_x_t.html#a3b07c6ff2f7acb0acd3d21d039741a36">in_flash_update</a>)</div><div class="line">    {</div><div class="line">        app_bt_policy_set_both_tpoll(flash_update_idx, TPOLL_FLASH_UPDATE_ACTIVE, TPOLL_IDLE);</div><div class="line">    }</div><div class="line"><span class="preprocessor">#if F_APP_SPP_CAPTURE_DSP_DATA_1 ||F_APP_SPP_CAPTURE_DSP_DATA_2</span></div><div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tpoll_ctx.<a class="code" href="struct_t___b_p___t_p_o_l_l___c_o_n_t_e_x_t.html#a10c5751e12d31bf7f16e2abbbe7b20a8">in_data_capture</a>)</div><div class="line">    {</div><div class="line">        app_bt_policy_set_both_tpoll(data_capture_idx, data_capture_tpoll, TPOLL_IDLE);</div><div class="line">    }</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"><span class="preprocessor">#if F_APP_GAMING_DONGLE_SUPPORT</span></div><div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tpoll_ctx.<a class="code" href="struct_t___b_p___t_p_o_l_l___c_o_n_t_e_x_t.html#af4df2122ccaa120eb23a28f3801a79b5">in_dongle_spp</a> || tpoll_ctx.in_dongle_a2dp)</div><div class="line">    {</div><div class="line">        app_bt_policy_set_both_tpoll(dongle_idx, TPOLL_DONGLE_ACTIVE, TPOLL_IDLE);</div><div class="line">    }</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tpoll_ctx.<a class="code" href="struct_t___b_p___t_p_o_l_l___c_o_n_t_e_x_t.html#a9f0543b565e0adb03ff78aad5d3fe32d">in_sco</a>)</div><div class="line">    {</div><div class="line">        app_bt_policy_set_both_tpoll(...hfp_active_idx, TPOLL_SCO_ACTIVE, TPOLL_SCO_INACTIVE);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tpoll_ctx.<a class="code" href="struct_t___b_p___t_p_o_l_l___c_o_n_t_e_x_t.html#a678be2d7397c96006414254e81b94173">in_a2dp</a>)</div><div class="line">    {</div><div class="line"><span class="preprocessor">#if F_APP_LEA_SUPPORT</span></div><div class="line">        <span class="keywordflow">if</span> (tpoll_ctx.in_lea_streaming)</div><div class="line">        {</div><div class="line">            app_bt_policy_set_both_tpoll(...a2dp_active_idx, TPOLL_LEA_A2DP_ACTIVE, TPOLL_IDLE);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">        {</div><div class="line">            app_bt_policy_set_both_tpoll(...a2dp_active_idx,TPOLL_A2DP_ACTIVE,TPOLL_A2DP_INACTIVE);</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tpoll_ctx.<a class="code" href="struct_t___b_p___t_p_o_l_l___c_o_n_t_e_x_t.html#a0fb1d4f126c9266231f123869af47644">in_linkback</a>)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="group___a_p_p___l_i_n_k.html#ga51f528a501ab0487c37c465106298105">MAX_BR_LINK_NUM</a>; i++)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group___a_p_p___l_i_n_k.html#gab7b8243381f0a5998580ef3a0cffce1f">app_link_check_b2s_link_by_id</a>(i))</div><div class="line">            {</div><div class="line">                <span class="keywordflow">if</span> (<a class="code" href="group___a_p_p___l_i_n_k_b_a_c_k.html#gae5371aa68d75601436ae474e3ca30f0b">linkback_active_node_judge_cur_conn_addr</a>(<a class="code" href="group___a_p_p___m_a_i_n___exported___variables.html#gacfc09f2731e227125edccf8bcf944926">app_db</a>.<a class="code" href="struct_t___a_p_p___d_b.html#a790da4b2b0fd0935efe47dc4aad8f147">br_link</a>[i].<a class="code" href="struct_t___a_p_p___b_r___l_i_n_k.html#a624fd24b46be2b40c8731334c9de5d06">bd_addr</a>))</div><div class="line">                {</div><div class="line">                    app_bt_policy_set_tpoll(i, TPOLL_LINKBACK_ACTIVE);</div><div class="line">                }</div><div class="line">                <span class="keywordflow">else</span></div><div class="line">                {</div><div class="line">                    app_bt_policy_set_tpoll(i, TPOLL_LINKBACK_INACTIVE);</div><div class="line">                }</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="group___a_p_p___l_i_n_k.html#ga51f528a501ab0487c37c465106298105">MAX_BR_LINK_NUM</a>; i++)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group___a_p_p___l_i_n_k.html#gab7b8243381f0a5998580ef3a0cffce1f">app_link_check_b2s_link_by_id</a>(i))</div><div class="line">            {</div><div class="line">                app_bt_policy_set_tpoll(i, TPOLL_IDLE);</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><h3><a class="anchor" id="Stereo_Multilink_Dongle_Source_code_overview_Setting_Htpoll"></a>
2.2 Setting Htpoll</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> app_dongle_htpoll_control(T_APP_DONGLE_HTPOLL_EVENT event)</div><div class="line">{</div><div class="line">    ......</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (p_dongle_link != <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">if</span> (is_streaming)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group___a_p_p___h_f_p___exported___functions.html#gaef1ce035ad8830e5e55ea898347d06ed">app_hfp_sco_is_connected</a>() == <span class="keyword">false</span>)</div><div class="line">            {</div><div class="line">                <span class="keywordflow">if</span> (connected_device_num == 1)</div><div class="line">                {</div><div class="line">                    <span class="comment">/* dongle a2dp + phone no link : 30/22 */</span></div><div class="line">                    setting = GAMING_SETTING_LINKBACK;</div><div class="line">                }</div><div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (connected_device_num &gt; 1)</div><div class="line">                {</div><div class="line">                    <span class="keywordflow">if</span> (p_dongle_link-&gt;streaming_fg &amp;&amp;</div><div class="line">                        (p_non_dongle_link &amp;&amp; p_non_dongle_link-&gt;streaming_fg))</div><div class="line">                    {</div><div class="line">                        <span class="comment">/* dongle a2dp + phone a2dp : 16/8 */</span></div><div class="line">                        setting = GAMING_SETTING_MULTI_SRC_MIX_PLAYING;</div><div class="line"></div><div class="line">                    }</div><div class="line">                    <span class="keywordflow">else</span></div><div class="line">                    {</div><div class="line">                        <span class="comment">/* dongle a2dp + phone idle : 58/50 */</span></div><div class="line">                        <span class="comment">/* dongle idle + phone a2dp : 58/50 */</span></div><div class="line">                        setting = GAMING_SETTING_MULTI_SRC_PLAYING;</div><div class="line">                    }</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                <span class="comment">/* dongle a2dp + phone sco : 16/6 */</span></div><div class="line">                setting = GAMING_SETTING_MULTI_SRC_MIX_PLAYING_WITH_SCO;</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* there is a lack of dongle no link + phone a2dp !!! */</span></div><div class="line"></div><div class="line">    ......</div><div class="line"></div><div class="line">SET_HTOPLL:</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (setting != GAMING_SETTING_NONE)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">if</span> (htpoll_active)</div><div class="line">        {</div><div class="line">            <span class="comment">/* clear current active and set new one */</span></div><div class="line">            <a class="code" href="group___b_t___b_t_m.html#ga0ecb80a51220054100d436691e4a8d93">bt_link_traffic_qos_clear</a>(htpoll_active_addr);</div><div class="line"></div><div class="line">            <span class="comment">/* dongle a2dp + phone sco */</span></div><div class="line">            <span class="keywordflow">if</span> (setting == GAMING_SETTING_MULTI_SRC_MIX_PLAYING_WITH_SCO)</div><div class="line">            {</div><div class="line">                <span class="keywordflow">if</span> (p_non_dongle_link != <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line">                {</div><div class="line">                    <span class="comment">/* set phone as reference */</span></div><div class="line">                    <a class="code" href="group___b_t___b_t_m.html#gaad2113ae570578a61efd2e0efbf0ec88">bt_link_periodic_traffic_set</a>(p_non_dongle_link-&gt;bd_addr);</div><div class="line">                }</div><div class="line"></div><div class="line">                <span class="comment">/* set dongle htpoll */</span></div><div class="line">                <a class="code" href="group___b_t___b_t_m.html#ga1cd0373542c006886035b4daee37e445">bt_link_periodic_sync_traffic_qos_set</a>(target_addr, interval, rsvd_slot);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                <span class="comment">/* other case set */</span></div><div class="line">                <a class="code" href="group___b_t___b_t_m.html#gaf314021a89bd8f5487fb23185a97d153">bt_link_periodic_traffic_qos_set</a>(target_addr, interval, rsvd_slot, <span class="keyword">false</span>);</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">        {</div><div class="line">            <span class="comment">/* first or after clear to set htpoll */</span></div><div class="line">            <a class="code" href="group___b_t___b_t_m.html#gaf314021a89bd8f5487fb23185a97d153">bt_link_periodic_traffic_qos_set</a>(target_addr, interval, rsvd_slot, <span class="keyword">false</span>);</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="keywordflow">if</span> (htpoll_active)</div><div class="line">        {</div><div class="line">            <span class="comment">/* clear htpoll */</span></div><div class="line">            <a class="code" href="group___b_t___b_t_m.html#ga0ecb80a51220054100d436691e4a8d93">bt_link_traffic_qos_clear</a>(htpoll_active_addr);</div><div class="line">            htpoll_active = <span class="keyword">false</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->

<HR SIZE=5>
<font size="3" color="black">Copyright(c) 2020, <a href=" http://www.realtek.com.tw/"><font size="3" color="#6FB7B7"><b>Realtek Semiconductor Corporation</b></font></a>. All rights reserved.</font> 
