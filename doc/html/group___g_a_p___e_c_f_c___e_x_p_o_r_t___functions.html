<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BT AUDIO SDK: GAP ECFC Exported Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bbpro-h55px.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BT AUDIO SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,true,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">GAP ECFC Exported Functions<div class="ingroups"><a class="el" href="group___a_p_i___reference.html">API Reference</a> &raquo; <a class="el" href="group___b_l_u_e_t_o_o_t_h.html">Bluetooth</a> &raquo; <a class="el" href="group___g_a_p.html">GAP</a> &raquo; <a class="el" href="group___g_a_p___l_e.html">GAP LE Module</a> &raquo; <a class="el" href="group___g_a_p___e_c_f_c___m_o_d_u_l_e.html">GAP ECFC Module</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga253a5d4928fb573a58a09cf46516fc2a"><td class="memItemLeft" align="right" valign="top">typedef uint16_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga253a5d4928fb573a58a09cf46516fc2a">P_GAP_ECFC_CB</a>) (void *p_buf, <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#gad5e6320f36897b067d4121b07200e343">T_GAP_ECFC_MSG</a> msg)</td></tr>
<tr class="memdesc:ga253a5d4928fb573a58a09cf46516fc2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prototype of callback function to handle L2CAP ECFC related messages.  <a href="#ga253a5d4928fb573a58a09cf46516fc2a">More...</a><br /></td></tr>
<tr class="separator:ga253a5d4928fb573a58a09cf46516fc2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gad305a8ba6b61f1bce64983607764d898"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#gad305a8ba6b61f1bce64983607764d898">gap_ecfc_init</a> (uint8_t proto_num)</td></tr>
<tr class="memdesc:gad305a8ba6b61f1bce64983607764d898"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize parameters of GAP ECFC Module.  <a href="#gad305a8ba6b61f1bce64983607764d898">More...</a><br /></td></tr>
<tr class="separator:gad305a8ba6b61f1bce64983607764d898"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac61e52f0eab4e8e4ace607cfd05fe390"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#gac61e52f0eab4e8e4ace607cfd05fe390">gap_ecfc_set_param</a> (<a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#gad1231486ce516e6e20d1c577b5db7687">T_GAP_ECFC_PARAM_TYPE</a> param, uint8_t len, void *p_value)</td></tr>
<tr class="memdesc:gac61e52f0eab4e8e4ace607cfd05fe390"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a GAP ECFC parameter.  <a href="#gac61e52f0eab4e8e4ace607cfd05fe390">More...</a><br /></td></tr>
<tr class="separator:gac61e52f0eab4e8e4ace607cfd05fe390"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga381781e549cac92e9be6035a0c4aa75a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga381781e549cac92e9be6035a0c4aa75a">gap_ecfc_reg_proto</a> (uint16_t psm, <a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga253a5d4928fb573a58a09cf46516fc2a">P_GAP_ECFC_CB</a> callback, bool is_le, uint8_t *p_proto_id, uint8_t data_path)</td></tr>
<tr class="memdesc:ga381781e549cac92e9be6035a0c4aa75a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a callback function to handle L2CAP ECFC related messages for a specific PSM.  <a href="#ga381781e549cac92e9be6035a0c4aa75a">More...</a><br /></td></tr>
<tr class="separator:ga381781e549cac92e9be6035a0c4aa75a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0e23ef579b49d736927522a77fc6aa68"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga0e23ef579b49d736927522a77fc6aa68">gap_ecfc_send_conn_req</a> (uint16_t psm, uint16_t proto_id, uint16_t local_mtu, uint8_t *bd_addr, uint8_t bd_type, uint8_t cid_num)</td></tr>
<tr class="memdesc:ga0e23ef579b49d736927522a77fc6aa68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a request to create L2CAP ECFC connections. If the request was successfully sent, <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343ad80899ffa7290c069cc0416a586b0c03">GAP_ECFC_CONN_RSP</a> will be received in the callback function registed by <a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga381781e549cac92e9be6035a0c4aa75a">gap_ecfc_reg_proto</a> to indicate whether the procedure was started successfully. If the procedure was started, <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343ad64b80e455a086056a2b7bfe7e5f6a03">GAP_ECFC_CONN_CMPL</a> will be received later to tell the result of L2CAP channel establishment.  <a href="#ga0e23ef579b49d736927522a77fc6aa68">More...</a><br /></td></tr>
<tr class="separator:ga0e23ef579b49d736927522a77fc6aa68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3486607e38c8bd3de8dcfff294e5a46e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga3486607e38c8bd3de8dcfff294e5a46e">gap_ecfc_send_conn_cfm</a> (uint16_t conn_handle, uint16_t identity_id, <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#gadc55d80bcc88d2cd3b89a2836ed8dd9f">T_GAP_ECFC_CONN_CFM_CAUSE</a> cause, uint16_t *p_cid, uint8_t cid_num, uint16_t local_mtu)</td></tr>
<tr class="memdesc:ga3486607e38c8bd3de8dcfff294e5a46e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a confirmation for a L2CAP ECFC connection request from remote device. If the confirmation was successfully sent with cause as <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#ggadc55d80bcc88d2cd3b89a2836ed8dd9faf715a3239312839eadb31f64b26bd4d8">GAP_ECFC_CONN_ACCEPT</a>, <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343ad64b80e455a086056a2b7bfe7e5f6a03">GAP_ECFC_CONN_CMPL</a> will also be received in the callback function registered by <a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga381781e549cac92e9be6035a0c4aa75a">gap_ecfc_reg_proto</a> to tell the result of L2CAP ECFC channels establishment. If there was no resources to establishment all cid_num(<a class="el" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___i_n_d.html">T_GAP_ECFC_CONN_IND</a>) channels, the confirmation can reduce cid_num and sent with cause as <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#ggadc55d80bcc88d2cd3b89a2836ed8dd9fab18b9aba3355926048959d6dc5070ece">GAP_ECFC_CONN_NO_RESOURCES</a>,.  <a href="#ga3486607e38c8bd3de8dcfff294e5a46e">More...</a><br /></td></tr>
<tr class="separator:ga3486607e38c8bd3de8dcfff294e5a46e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae1a2c97766eda0030b26e82c790913f4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#gae1a2c97766eda0030b26e82c790913f4">gap_ecfc_send_disconn_req</a> (uint16_t conn_handle, uint16_t cid)</td></tr>
<tr class="memdesc:gae1a2c97766eda0030b26e82c790913f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a request to disconnect a L2CAP ECFC connection. If the request was successfully sent, <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343a6e08f47f691e28799b05a0635d879d6b">GAP_ECFC_DISCONN_RSP</a> will be received in the callback function registed by <a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga381781e549cac92e9be6035a0c4aa75a">gap_ecfc_reg_proto</a> to show the result of disconnection.  <a href="#gae1a2c97766eda0030b26e82c790913f4">More...</a><br /></td></tr>
<tr class="separator:gae1a2c97766eda0030b26e82c790913f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0294a48ce933f78ba3e0bcbc7a4f93f4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga0294a48ce933f78ba3e0bcbc7a4f93f4">gap_ecfc_send_data_req</a> (uint16_t conn_handle, uint16_t cid, uint8_t *p_data, uint16_t length)</td></tr>
<tr class="memdesc:ga0294a48ce933f78ba3e0bcbc7a4f93f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a request to send L2CAP ECFC channel data to remote device. Application can use this API when data_path is GAP_ECFC_DATA_PATH_APP configured by <a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga381781e549cac92e9be6035a0c4aa75a">gap_ecfc_reg_proto</a>.  <a href="#ga0294a48ce933f78ba3e0bcbc7a4f93f4">More...</a><br /></td></tr>
<tr class="separator:ga0294a48ce933f78ba3e0bcbc7a4f93f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga050fc2348945407af46fd595d45096d8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga050fc2348945407af46fd595d45096d8">gap_ecfc_send_sec_reg_req</a> (bool is_le, uint8_t active, uint16_t psm, uint16_t uuid, uint8_t requirement, uint8_t key_size)</td></tr>
<tr class="memdesc:ga050fc2348945407af46fd595d45096d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a request to register/deregister a protocol security entry over L2CAP. The security will be used when establishing a L2CAP ECFC channel. If the request was successfully sent, a message whose type is <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343abed0d09b0c7dd7a8a386fc1804532346">GAP_ECFC_SEC_REG_RSP</a> and data is <a class="el" href="struct_t___g_a_p___e_c_f_c___s_e_c___r_e_g___r_s_p.html">T_GAP_ECFC_SEC_REG_RSP</a> will be received in the callback function registered by <a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga381781e549cac92e9be6035a0c4aa75a">gap_ecfc_reg_proto</a>.  <a href="#ga050fc2348945407af46fd595d45096d8">More...</a><br /></td></tr>
<tr class="separator:ga050fc2348945407af46fd595d45096d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafe1e6cd1fdcf5096462aaaf61b751f90"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#gafe1e6cd1fdcf5096462aaaf61b751f90">gap_ecfc_send_reconfigure_req</a> (uint16_t conn_handle, uint16_t *p_cid, uint8_t cid_num, uint16_t local_mtu, uint16_t local_mps)</td></tr>
<tr class="memdesc:gafe1e6cd1fdcf5096462aaaf61b751f90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a request to reconfigure L2CAP ECFC channel. If the request was successfully sent, <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343a0784d8a83a02b885f2e951e90a46fbf9">GAP_ECFC_RECONFIGURE_RSP</a> will be received in the callback function registed by <a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga381781e549cac92e9be6035a0c4aa75a">gap_ecfc_reg_proto</a> to indicate whether the procedure was successful.  <a href="#gafe1e6cd1fdcf5096462aaaf61b751f90">More...</a><br /></td></tr>
<tr class="separator:gafe1e6cd1fdcf5096462aaaf61b751f90"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga253a5d4928fb573a58a09cf46516fc2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga253a5d4928fb573a58a09cf46516fc2a">&#9670;&nbsp;</a></span>P_GAP_ECFC_CB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint16_t(*  P_GAP_ECFC_CB) (void *p_buf, <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#gad5e6320f36897b067d4121b07200e343">T_GAP_ECFC_MSG</a> msg)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prototype of callback function to handle L2CAP ECFC related messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_buf</td><td>Message data and the content of data is dependent on message type. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>callback msy type <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#gad5e6320f36897b067d4121b07200e343">T_GAP_ECFC_MSG</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Result </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">other</td><td>Failed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gad305a8ba6b61f1bce64983607764d898"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad305a8ba6b61f1bce64983607764d898">&#9670;&nbsp;</a></span>gap_ecfc_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool gap_ecfc_init </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>proto_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize parameters of GAP ECFC Module. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">proto_num</td><td>Initialize protocal number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Operation result. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Operation success </td></tr>
    <tr><td class="paramname">false</td><td>Operation failed.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#gad305a8ba6b61f1bce64983607764d898">gap_ecfc_init</a>(2);</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="gac61e52f0eab4e8e4ace607cfd05fe390"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac61e52f0eab4e8e4ace607cfd05fe390">&#9670;&nbsp;</a></span>gap_ecfc_set_param()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool gap_ecfc_set_param </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#gad1231486ce516e6e20d1c577b5db7687">T_GAP_ECFC_PARAM_TYPE</a>&#160;</td>
          <td class="paramname"><em>param</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a GAP ECFC parameter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">param</td><td>Profile parameter ID: <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#gad1231486ce516e6e20d1c577b5db7687">T_GAP_ECFC_PARAM_TYPE</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Length of data to write </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_value</td><td>Pointer to data to write. This is dependent on the parameter ID and WILL be cast to the appropriate data type (For example: if data type param is uint16, p_value will be cast to pointer of uint16_t). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Operation result. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Operation success </td></tr>
    <tr><td class="paramname">false</td><td>Operation failed.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keyword">static</span> <a class="code" href="group___u_s_e_r___c_m_d___p_a_r_s_e___exported___types.html#gab7f77eecc3c723d439e610daa838acec">T_USER_CMD_PARSE_RESULT</a> cmd_ecfccfg(<a class="code" href="struct_t___u_s_e_r___c_m_d___p_a_r_s_e_d___v_a_l_u_e.html">T_USER_CMD_PARSED_VALUE</a> *p_parse_value)</div><div class="line">{</div><div class="line">    uint8_t type = p_parse_value-&gt;<a class="code" href="struct_t___u_s_e_r___c_m_d___p_a_r_s_e_d___v_a_l_u_e.html#a90696670324926369a9646e55705bcbf">dw_param</a>[0];</div><div class="line">    <span class="keywordflow">if</span> (type == 0)</div><div class="line">    {</div><div class="line">        uint16_t initial_credits = p_parse_value-&gt;<a class="code" href="struct_t___u_s_e_r___c_m_d___p_a_r_s_e_d___v_a_l_u_e.html#a90696670324926369a9646e55705bcbf">dw_param</a>[1];</div><div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#gac61e52f0eab4e8e4ace607cfd05fe390">gap_ecfc_set_param</a>(<a class="code" href="group___g_a_p___e_c_f_c___exported___types.html#ggad1231486ce516e6e20d1c577b5db7687a26655b8364ab302a219c997ad7faa614">GAP_ECFC_PARAM_INIT_CREDITS</a>, <span class="keyword">sizeof</span>(uint16_t), &amp;initial_credits))</div><div class="line">        {</div><div class="line">            <span class="keywordflow">return</span> <a class="code" href="group___u_s_e_r___c_m_d___p_a_r_s_e___exported___types.html#ggab7f77eecc3c723d439e610daa838aceca0acf8b75f6fcf2284c37a773d30b5864">RESULT_SUCESS</a>;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == 1)</div><div class="line">    {</div><div class="line">        uint16_t local_mps = p_parse_value-&gt;<a class="code" href="struct_t___u_s_e_r___c_m_d___p_a_r_s_e_d___v_a_l_u_e.html#a90696670324926369a9646e55705bcbf">dw_param</a>[1];</div><div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#gac61e52f0eab4e8e4ace607cfd05fe390">gap_ecfc_set_param</a>(<a class="code" href="group___g_a_p___e_c_f_c___exported___types.html#ggad1231486ce516e6e20d1c577b5db7687a3400fa078263d58c0bbd8d1b3b44d688">GAP_ECFC_PARAM_LOCAL_MPS</a>, <span class="keyword">sizeof</span>(uint16_t), &amp;local_mps))</div><div class="line">        {</div><div class="line">            <span class="keywordflow">return</span> <a class="code" href="group___u_s_e_r___c_m_d___p_a_r_s_e___exported___types.html#ggab7f77eecc3c723d439e610daa838aceca0acf8b75f6fcf2284c37a773d30b5864">RESULT_SUCESS</a>;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> <a class="code" href="group___u_s_e_r___c_m_d___p_a_r_s_e___exported___types.html#ggab7f77eecc3c723d439e610daa838acecaed12a48e8a6db9d3e74d4e29e7eda08d">RESULT_ERR</a>;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga381781e549cac92e9be6035a0c4aa75a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga381781e549cac92e9be6035a0c4aa75a">&#9670;&nbsp;</a></span>gap_ecfc_reg_proto()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool gap_ecfc_reg_proto </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>psm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga253a5d4928fb573a58a09cf46516fc2a">P_GAP_ECFC_CB</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_le</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>p_proto_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data_path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a callback function to handle L2CAP ECFC related messages for a specific PSM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">psm</td><td>Protocol service multiplexer that the callback function is related. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">callback</td><td>Callback function to handle L2CAP ECFC messages. The function must have the prototype defined as <a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga253a5d4928fb573a58a09cf46516fc2a">P_GAP_ECFC_CB</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_le</td><td>Whether is LE transport. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_proto_id</td><td>Protocol ID assigned by GAP ECFC module which will be used in <a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga0e23ef579b49d736927522a77fc6aa68">gap_ecfc_send_conn_req</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_path</td><td>Data path to use. Should be use <a class="el" href="group___g_a_p___e_c_f_c___d_a_t_a___p_a_t_h.html">GAP ECFC Data Path</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The result of callback function register. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>The function was successfully registered. </td></tr>
    <tr><td class="paramname">false</td><td>The function was failed to register.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line">uint8_t ecfc_proto_id;</div><div class="line"></div><div class="line">uint16_t app_ecfc_callback(<span class="keywordtype">void</span> *p_buf, <a class="code" href="group___g_a_p___e_c_f_c___exported___types.html#gad5e6320f36897b067d4121b07200e343">T_GAP_ECFC_MSG</a> msg)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">     <span class="keywordflow">case</span> <a class="code" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343a5ffc3316857c4b0b498d99d32653c9c8">GAP_ECFC_PROTO_REG_RSP</a>:</div><div class="line">         {</div><div class="line">             <a class="code" href="struct_t___g_a_p___e_c_f_c___p_r_o_t_o___r_e_g___r_s_p.html">T_GAP_ECFC_PROTO_REG_RSP</a> *p_rsp = (<a class="code" href="struct_t___g_a_p___e_c_f_c___p_r_o_t_o___r_e_g___r_s_p.html">T_GAP_ECFC_PROTO_REG_RSP</a> *)p_buf;</div><div class="line">             <a class="code" href="group___t_r_a_c_e.html#ga98e2dee240d2fde3119d3380b4d98762">APP_PRINT_INFO3</a>(<span class="stringliteral">&quot;GAP_ECFC_PROTO_REG_RSP: proto_id %d, psm 0x%x, cause 0x%x&quot;</span>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___p_r_o_t_o___r_e_g___r_s_p.html#a36732ef488a83f64978aefb7f33a3fb3">proto_id</a>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___p_r_o_t_o___r_e_g___r_s_p.html#a38a3d76182946faeb6b5ea25bed58432">psm</a>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___p_r_o_t_o___r_e_g___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">         }</div><div class="line">         <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga381781e549cac92e9be6035a0c4aa75a">gap_ecfc_reg_proto</a>(<a class="code" href="group___b_t___t_y_p_e_s.html#ga9088ef63737a3c98e640b59ca2d6363d">PSM_EATT</a>, app_ecfc_callback, <span class="keyword">true</span>, &amp;ecfc_proto_id, <a class="code" href="group___g_a_p___e_c_f_c___d_a_t_a___p_a_t_h.html#ga05f76949bd124949ed0ad943122bb180">GAP_ECFC_DATA_PATH_GATT</a>);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga0e23ef579b49d736927522a77fc6aa68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0e23ef579b49d736927522a77fc6aa68">&#9670;&nbsp;</a></span>gap_ecfc_send_conn_req()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool gap_ecfc_send_conn_req </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>psm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>proto_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>local_mtu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>bd_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bd_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cid_num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a request to create L2CAP ECFC connections. If the request was successfully sent, <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343ad80899ffa7290c069cc0416a586b0c03">GAP_ECFC_CONN_RSP</a> will be received in the callback function registed by <a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga381781e549cac92e9be6035a0c4aa75a">gap_ecfc_reg_proto</a> to indicate whether the procedure was started successfully. If the procedure was started, <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343ad64b80e455a086056a2b7bfe7e5f6a03">GAP_ECFC_CONN_CMPL</a> will be received later to tell the result of L2CAP channel establishment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">psm</td><td>PSM of the L2CAP ECFC channel that will be established. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">proto_id</td><td>Protocol ID. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">local_mtu</td><td>Preferred MTU size value of the L2CAP ECFC channel. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bd_addr</td><td>Bluetooth address of remote device. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bd_type</td><td>Bluetooth address type of remote device. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cid_num</td><td>The number of the L2CAP ECFC channels request to establish. Range: (1- GAP_ECFC_CREATE_CHANN_MAX_NUM) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Operation result. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Send request success </td></tr>
    <tr><td class="paramname">false</td><td>Send request failed.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line">uint16_t app_ecfc_callback(<span class="keywordtype">void</span> *p_buf, <a class="code" href="group___g_a_p___e_c_f_c___exported___types.html#gad5e6320f36897b067d4121b07200e343">T_GAP_ECFC_MSG</a> msg)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">     <span class="keywordflow">case</span> <a class="code" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343ad80899ffa7290c069cc0416a586b0c03">GAP_ECFC_CONN_RSP</a>:</div><div class="line">         {</div><div class="line">             <a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___r_s_p.html">T_GAP_ECFC_CONN_RSP</a> *p_rsp = (<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___r_s_p.html">T_GAP_ECFC_CONN_RSP</a> *)p_buf;</div><div class="line">             <a class="code" href="group___t_r_a_c_e.html#ga63d3804cafe8ed6f9165f9692b30fd96">APP_PRINT_INFO5</a>(<span class="stringliteral">&quot;GAP_ECFC_CONN_RSP: proto_id %d, cid_num %d, cause 0x%x, bd_addr %s, bd_type 0x%x&quot;</span>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___r_s_p.html#a36732ef488a83f64978aefb7f33a3fb3">proto_id</a>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___r_s_p.html#a05f0ceef783760453ee82b64265a6ae0">cid_num</a>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>,</div><div class="line">                             <a class="code" href="group___t_r_a_c_e.html#ga21deae8960b0d6088c2d18b04a151e66">TRACE_BDADDR</a>(p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___r_s_p.html#a624fd24b46be2b40c8731334c9de5d06">bd_addr</a>),</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___r_s_p.html#adb055acc222d266d5c08de4ffa2a2b7b">bd_type</a>);</div><div class="line">         }</div><div class="line">         <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">     <span class="keywordflow">case</span> <a class="code" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343ad64b80e455a086056a2b7bfe7e5f6a03">GAP_ECFC_CONN_CMPL</a>:</div><div class="line">         {</div><div class="line">             <a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html">T_GAP_ECFC_CONN_CMPL_INFO</a> *p_info = (<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html">T_GAP_ECFC_CONN_CMPL_INFO</a> *)p_buf;</div><div class="line">             <a class="code" href="group___t_r_a_c_e.html#ga76eac5d2f173d1e601bd9d2bd4a4d809">APP_PRINT_INFO6</a>(<span class="stringliteral">&quot;GAP_ECFC_CONN_CMPL: proto_id %d, cause 0x%x, conn_handle 0x%x, ds_data_offset %d, bd_addr %s, bd_type 0x%x&quot;</span>,</div><div class="line">                             p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#a36732ef488a83f64978aefb7f33a3fb3">proto_id</a>,</div><div class="line">                             p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>,</div><div class="line">                             p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#a0d5ffe38d68e48d81e61fc6a4999ae68">conn_handle</a>,</div><div class="line">                             p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#adc72f900178029b9d2354b6b04bb3d52">ds_data_offset</a>,</div><div class="line">                             <a class="code" href="group___t_r_a_c_e.html#ga21deae8960b0d6088c2d18b04a151e66">TRACE_BDADDR</a>(p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#a624fd24b46be2b40c8731334c9de5d06">bd_addr</a>),</div><div class="line">                             p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#adb055acc222d266d5c08de4ffa2a2b7b">bd_type</a>);</div><div class="line">             <a class="code" href="group___t_r_a_c_e.html#ga98e2dee240d2fde3119d3380b4d98762">APP_PRINT_INFO3</a>(<span class="stringliteral">&quot;GAP_ECFC_CONN_CMPL: remote_mtu %d, local_mtu %d, local_mps %d&quot;</span>,</div><div class="line">                             p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#aa382b5254e6bedf1714fcc05fc3aa58b">remote_mtu</a>,</div><div class="line">                             p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#a073cf06d942a4dec85b975abf226da6b">local_mtu</a>,</div><div class="line">                             p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#a73413f5579f31f3139574f257ab629d6">local_mps</a>);</div><div class="line">             <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#a05f0ceef783760453ee82b64265a6ae0">cid_num</a>; i++)</div><div class="line">             {</div><div class="line">                 <a class="code" href="group___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;GAP_ECFC_CONN_CMPL: cis[%d] 0x%x&quot;</span>, i, p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#ab5df0490e43c8100cb16aaeadb3ef5da">cid</a>[i]);</div><div class="line">             }</div><div class="line">         }</div><div class="line">         <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga381781e549cac92e9be6035a0c4aa75a">gap_ecfc_reg_proto</a>(<a class="code" href="group___b_t___t_y_p_e_s.html#ga9088ef63737a3c98e640b59ca2d6363d">PSM_EATT</a>, app_ecfc_callback, <span class="keyword">true</span>, &amp;ecfc_proto_id, <a class="code" href="group___g_a_p___e_c_f_c___d_a_t_a___p_a_t_h.html#ga05f76949bd124949ed0ad943122bb180">GAP_ECFC_DATA_PATH_GATT</a>);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"> <span class="keyword">static</span> <a class="code" href="group___u_s_e_r___c_m_d___p_a_r_s_e___exported___types.html#gab7f77eecc3c723d439e610daa838acec">T_USER_CMD_PARSE_RESULT</a> cmd_ecfccon(<a class="code" href="struct_t___u_s_e_r___c_m_d___p_a_r_s_e_d___v_a_l_u_e.html">T_USER_CMD_PARSED_VALUE</a> *p_parse_value)</div><div class="line"> {</div><div class="line">     uint8_t addr[6] = {0};</div><div class="line">     uint8_t addr_len;</div><div class="line">     <span class="keywordflow">for</span> (addr_len = 0; addr_len &lt; <a class="code" href="group___g_a_p___common___macros.html#gabc4071e1504b01ea8bc4e09ff0b2f37a">GAP_BD_ADDR_LEN</a>; addr_len++)</div><div class="line">     {</div><div class="line">         addr[addr_len] = p_parse_value-&gt;<a class="code" href="struct_t___u_s_e_r___c_m_d___p_a_r_s_e_d___v_a_l_u_e.html#a90696670324926369a9646e55705bcbf">dw_param</a>[<a class="code" href="group___g_a_p___common___macros.html#gabc4071e1504b01ea8bc4e09ff0b2f37a">GAP_BD_ADDR_LEN</a> - addr_len - 1];</div><div class="line">     }</div><div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga0e23ef579b49d736927522a77fc6aa68">gap_ecfc_send_conn_req</a>(<a class="code" href="group___b_t___t_y_p_e_s.html#ga9088ef63737a3c98e640b59ca2d6363d">PSM_EATT</a>, ecfc_proto_id,</div><div class="line">                             ecfc_local_mtu, addr, <a class="code" href="group___g_a_p___common___exported___types.html#gga41dd9d848e985c7c492f8f43e1da9249a0f8c733d0498ba8895498a882385afb1">GAP_REMOTE_ADDR_LE_PUBLIC</a>, p_parse_value-&gt;<a class="code" href="struct_t___u_s_e_r___c_m_d___p_a_r_s_e_d___v_a_l_u_e.html#a90696670324926369a9646e55705bcbf">dw_param</a>[6]))</div><div class="line">     {</div><div class="line">         <span class="keywordflow">return</span> <a class="code" href="group___u_s_e_r___c_m_d___p_a_r_s_e___exported___types.html#ggab7f77eecc3c723d439e610daa838aceca0acf8b75f6fcf2284c37a773d30b5864">RESULT_SUCESS</a>;</div><div class="line">     }</div><div class="line">     <span class="keywordflow">return</span> <a class="code" href="group___u_s_e_r___c_m_d___p_a_r_s_e___exported___types.html#ggab7f77eecc3c723d439e610daa838acecaed12a48e8a6db9d3e74d4e29e7eda08d">RESULT_ERR</a>;</div><div class="line"> }</div></div><!-- fragment --> 
</div>
</div>
<a id="ga3486607e38c8bd3de8dcfff294e5a46e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3486607e38c8bd3de8dcfff294e5a46e">&#9670;&nbsp;</a></span>gap_ecfc_send_conn_cfm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool gap_ecfc_send_conn_cfm </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>identity_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#gadc55d80bcc88d2cd3b89a2836ed8dd9f">T_GAP_ECFC_CONN_CFM_CAUSE</a>&#160;</td>
          <td class="paramname"><em>cause</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>p_cid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cid_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>local_mtu</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a confirmation for a L2CAP ECFC connection request from remote device. If the confirmation was successfully sent with cause as <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#ggadc55d80bcc88d2cd3b89a2836ed8dd9faf715a3239312839eadb31f64b26bd4d8">GAP_ECFC_CONN_ACCEPT</a>, <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343ad64b80e455a086056a2b7bfe7e5f6a03">GAP_ECFC_CONN_CMPL</a> will also be received in the callback function registered by <a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga381781e549cac92e9be6035a0c4aa75a">gap_ecfc_reg_proto</a> to tell the result of L2CAP ECFC channels establishment. If there was no resources to establishment all cid_num(<a class="el" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___i_n_d.html">T_GAP_ECFC_CONN_IND</a>) channels, the confirmation can reduce cid_num and sent with cause as <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#ggadc55d80bcc88d2cd3b89a2836ed8dd9fab18b9aba3355926048959d6dc5070ece">GAP_ECFC_CONN_NO_RESOURCES</a>,. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>Connection handle of the ACL link. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">identity_id</td><td>Indentity id. The value shall be get from <a class="el" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___i_n_d.html">T_GAP_ECFC_CONN_IND</a> message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cause</td><td>Confirmation cause for the connection request from remote device. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_cid</td><td>Confirmation the cid array allow to establish. The array shall be the subset of the p_cid get from <a class="el" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___i_n_d.html">T_GAP_ECFC_CONN_IND</a> message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cid_num</td><td>Confirmation the number of the L2CAP ECFC channels allow to establish. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">local_mtu</td><td>Preferred MTU size value of the L2CAP ECFC channel. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Operation result. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Send request success </td></tr>
    <tr><td class="paramname">false</td><td>Send request failed.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line">uint16_t app_ecfc_callback(<span class="keywordtype">void</span> *p_buf, <a class="code" href="group___g_a_p___e_c_f_c___exported___types.html#gad5e6320f36897b067d4121b07200e343">T_GAP_ECFC_MSG</a> msg)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">     <span class="keywordflow">case</span> <a class="code" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343a47971aa40148c9e4c9107e146274fa67">GAP_ECFC_CONN_IND</a>:</div><div class="line">         {</div><div class="line">             <a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___i_n_d.html">T_GAP_ECFC_CONN_IND</a> *p_ind = (<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___i_n_d.html">T_GAP_ECFC_CONN_IND</a> *)p_buf;</div><div class="line">             <a class="code" href="group___g_a_p___e_c_f_c___exported___types.html#gadc55d80bcc88d2cd3b89a2836ed8dd9f">T_GAP_ECFC_CONN_CFM_CAUSE</a> cause = <a class="code" href="group___g_a_p___e_c_f_c___exported___types.html#ggadc55d80bcc88d2cd3b89a2836ed8dd9faf715a3239312839eadb31f64b26bd4d8">GAP_ECFC_CONN_ACCEPT</a>;</div><div class="line">             <a class="code" href="group___t_r_a_c_e.html#ga6a5156df932d602adcb975351083836b">APP_PRINT_INFO8</a>(<span class="stringliteral">&quot;GAP_ECFC_CONN_IND: proto_id %d, conn_handle 0x%x, remote_mtu %d, cid_num %d, cis %b, bd_addr %s, bd_type 0x%x, identity_id 0x%x&quot;</span>,</div><div class="line">                             p_ind-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___i_n_d.html#a36732ef488a83f64978aefb7f33a3fb3">proto_id</a>,</div><div class="line">                             p_ind-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___i_n_d.html#a0d5ffe38d68e48d81e61fc6a4999ae68">conn_handle</a>,</div><div class="line">                             p_ind-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___i_n_d.html#aa382b5254e6bedf1714fcc05fc3aa58b">remote_mtu</a>,</div><div class="line">                             p_ind-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___i_n_d.html#a05f0ceef783760453ee82b64265a6ae0">cid_num</a>,</div><div class="line">                             <a class="code" href="group___t_r_a_c_e.html#ga03cf46dce6a4203e1317aaa89f6875d5">TRACE_BINARY</a>(<a class="code" href="group___g_a_p___e_c_f_c___exported___macros.html#ga65cfe529a2349192f08afae6f5d3c693">GAP_ECFC_CREATE_CHANN_MAX_NUM</a> * 2, p_ind-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___i_n_d.html#ab5df0490e43c8100cb16aaeadb3ef5da">cid</a>),</div><div class="line">                             <a class="code" href="group___t_r_a_c_e.html#ga21deae8960b0d6088c2d18b04a151e66">TRACE_BDADDR</a>(p_ind-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___i_n_d.html#a624fd24b46be2b40c8731334c9de5d06">bd_addr</a>),</div><div class="line">                             p_ind-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___i_n_d.html#adb055acc222d266d5c08de4ffa2a2b7b">bd_type</a>,</div><div class="line">                             p_ind-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___i_n_d.html#a9ae300aff7c1f96d72ed01d0f20ad97d">identity_id</a>);</div><div class="line">             <a class="code" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga3486607e38c8bd3de8dcfff294e5a46e">gap_ecfc_send_conn_cfm</a>(p_ind-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___i_n_d.html#a0d5ffe38d68e48d81e61fc6a4999ae68">conn_handle</a>, p_ind-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___i_n_d.html#a9ae300aff7c1f96d72ed01d0f20ad97d">identity_id</a>,</div><div class="line">                                 cause, p_ind-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___i_n_d.html#ab5df0490e43c8100cb16aaeadb3ef5da">cid</a>, p_ind-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___i_n_d.html#a05f0ceef783760453ee82b64265a6ae0">cid_num</a>, ecfc_local_mtu);</div><div class="line">         }</div><div class="line">         <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">     <span class="keywordflow">case</span> <a class="code" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343ad64b80e455a086056a2b7bfe7e5f6a03">GAP_ECFC_CONN_CMPL</a>:</div><div class="line">         {</div><div class="line">             <a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html">T_GAP_ECFC_CONN_CMPL_INFO</a> *p_info = (<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html">T_GAP_ECFC_CONN_CMPL_INFO</a> *)p_buf;</div><div class="line">             <a class="code" href="group___t_r_a_c_e.html#ga76eac5d2f173d1e601bd9d2bd4a4d809">APP_PRINT_INFO6</a>(<span class="stringliteral">&quot;GAP_ECFC_CONN_CMPL: proto_id %d, cause 0x%x, conn_handle 0x%x, ds_data_offset %d, bd_addr %s, bd_type 0x%x&quot;</span>,</div><div class="line">                             p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#a36732ef488a83f64978aefb7f33a3fb3">proto_id</a>,</div><div class="line">                             p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>,</div><div class="line">                             p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#a0d5ffe38d68e48d81e61fc6a4999ae68">conn_handle</a>,</div><div class="line">                             p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#adc72f900178029b9d2354b6b04bb3d52">ds_data_offset</a>,</div><div class="line">                             <a class="code" href="group___t_r_a_c_e.html#ga21deae8960b0d6088c2d18b04a151e66">TRACE_BDADDR</a>(p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#a624fd24b46be2b40c8731334c9de5d06">bd_addr</a>),</div><div class="line">                             p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#adb055acc222d266d5c08de4ffa2a2b7b">bd_type</a>);</div><div class="line">             <a class="code" href="group___t_r_a_c_e.html#ga98e2dee240d2fde3119d3380b4d98762">APP_PRINT_INFO3</a>(<span class="stringliteral">&quot;GAP_ECFC_CONN_CMPL: remote_mtu %d, local_mtu %d, local_mps %d&quot;</span>,</div><div class="line">                             p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#aa382b5254e6bedf1714fcc05fc3aa58b">remote_mtu</a>,</div><div class="line">                             p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#a073cf06d942a4dec85b975abf226da6b">local_mtu</a>,</div><div class="line">                             p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#a73413f5579f31f3139574f257ab629d6">local_mps</a>);</div><div class="line">             <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#a05f0ceef783760453ee82b64265a6ae0">cid_num</a>; i++)</div><div class="line">             {</div><div class="line">                 <a class="code" href="group___t_r_a_c_e.html#gacede19f539147e375272a511869b7a77">APP_PRINT_INFO2</a>(<span class="stringliteral">&quot;GAP_ECFC_CONN_CMPL: cis[%d] 0x%x&quot;</span>, i, p_info-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___c_o_n_n___c_m_p_l___i_n_f_o.html#ab5df0490e43c8100cb16aaeadb3ef5da">cid</a>[i]);</div><div class="line">             }</div><div class="line">         }</div><div class="line">         <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga381781e549cac92e9be6035a0c4aa75a">gap_ecfc_reg_proto</a>(<a class="code" href="group___b_t___t_y_p_e_s.html#ga9088ef63737a3c98e640b59ca2d6363d">PSM_EATT</a>, app_ecfc_callback, <span class="keyword">true</span>, &amp;ecfc_proto_id, <a class="code" href="group___g_a_p___e_c_f_c___d_a_t_a___p_a_t_h.html#ga05f76949bd124949ed0ad943122bb180">GAP_ECFC_DATA_PATH_GATT</a>);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="gae1a2c97766eda0030b26e82c790913f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae1a2c97766eda0030b26e82c790913f4">&#9670;&nbsp;</a></span>gap_ecfc_send_disconn_req()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool gap_ecfc_send_disconn_req </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a request to disconnect a L2CAP ECFC connection. If the request was successfully sent, <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343a6e08f47f691e28799b05a0635d879d6b">GAP_ECFC_DISCONN_RSP</a> will be received in the callback function registed by <a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga381781e549cac92e9be6035a0c4aa75a">gap_ecfc_reg_proto</a> to show the result of disconnection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>Connection handle of the ACL link. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cid</td><td>Local channel ID of the L2CAP ECFC channel to disconnect. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Operation result. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Send request success </td></tr>
    <tr><td class="paramname">false</td><td>Send request failed.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line">uint16_t app_ecfc_callback(<span class="keywordtype">void</span> *p_buf, <a class="code" href="group___g_a_p___e_c_f_c___exported___types.html#gad5e6320f36897b067d4121b07200e343">T_GAP_ECFC_MSG</a> msg)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">     <span class="keywordflow">case</span> <a class="code" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343a6e08f47f691e28799b05a0635d879d6b">GAP_ECFC_DISCONN_RSP</a>:</div><div class="line">         {</div><div class="line">             <a class="code" href="struct_t___g_a_p___e_c_f_c___d_i_s_c_o_n_n___r_s_p.html">T_GAP_ECFC_DISCONN_RSP</a> *p_rsp = (<a class="code" href="struct_t___g_a_p___e_c_f_c___d_i_s_c_o_n_n___r_s_p.html">T_GAP_ECFC_DISCONN_RSP</a> *)p_buf;</div><div class="line">             <a class="code" href="group___t_r_a_c_e.html#ga9a333df08413dee3d9e1a88f2993e141">APP_PRINT_INFO4</a>(<span class="stringliteral">&quot;GAP_ECFC_DISCONN_RSP: proto_id %d, conn_handle 0x%x, cid 0x%x, cause 0x%x&quot;</span>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___d_i_s_c_o_n_n___r_s_p.html#a36732ef488a83f64978aefb7f33a3fb3">proto_id</a>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___d_i_s_c_o_n_n___r_s_p.html#a0d5ffe38d68e48d81e61fc6a4999ae68">conn_handle</a>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___d_i_s_c_o_n_n___r_s_p.html#aeb65c8711b864df01fca95cfe904d924">cid</a>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___d_i_s_c_o_n_n___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">         }</div><div class="line">         <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga381781e549cac92e9be6035a0c4aa75a">gap_ecfc_reg_proto</a>(<a class="code" href="group___b_t___t_y_p_e_s.html#ga9088ef63737a3c98e640b59ca2d6363d">PSM_EATT</a>, app_ecfc_callback, <span class="keyword">true</span>, &amp;ecfc_proto_id, <a class="code" href="group___g_a_p___e_c_f_c___d_a_t_a___p_a_t_h.html#ga05f76949bd124949ed0ad943122bb180">GAP_ECFC_DATA_PATH_GATT</a>);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga0294a48ce933f78ba3e0bcbc7a4f93f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0294a48ce933f78ba3e0bcbc7a4f93f4">&#9670;&nbsp;</a></span>gap_ecfc_send_data_req()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool gap_ecfc_send_data_req </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>p_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a request to send L2CAP ECFC channel data to remote device. Application can use this API when data_path is GAP_ECFC_DATA_PATH_APP configured by <a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga381781e549cac92e9be6035a0c4aa75a">gap_ecfc_reg_proto</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>Connection handle of the ACL link. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cid</td><td>Local channel ID. The value can be get from <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343ad64b80e455a086056a2b7bfe7e5f6a03">GAP_ECFC_CONN_CMPL</a> message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_data</td><td>Point to data to be sent. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>Length of value to be sent. Range: 0 ~ local_mtu. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Operation result. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Send request success </td></tr>
    <tr><td class="paramname">false</td><td>Send request failed.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line">uint16_t app_ecfc_callback(<span class="keywordtype">void</span> *p_buf, <a class="code" href="group___g_a_p___e_c_f_c___exported___types.html#gad5e6320f36897b067d4121b07200e343">T_GAP_ECFC_MSG</a> msg)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">     <span class="keywordflow">case</span> <a class="code" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343a7efb00b1fbeb3e5c836d6e295b4e07bf">GAP_ECFC_DATA_RSP</a>:</div><div class="line">         {</div><div class="line">             <a class="code" href="struct_t___g_a_p___e_c_f_c___d_a_t_a___r_s_p.html">T_GAP_ECFC_DATA_RSP</a> *p_rsp = (<a class="code" href="struct_t___g_a_p___e_c_f_c___d_a_t_a___r_s_p.html">T_GAP_ECFC_DATA_RSP</a> *)p_buf;</div><div class="line">             <a class="code" href="group___t_r_a_c_e.html#ga9a333df08413dee3d9e1a88f2993e141">APP_PRINT_INFO4</a>(<span class="stringliteral">&quot;GAP_ECFC_DATA_RSP: proto_id %d, conn_handle 0x%d, cid 0x%x, cause 0x%x&quot;</span>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___d_a_t_a___r_s_p.html#a36732ef488a83f64978aefb7f33a3fb3">proto_id</a>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___d_a_t_a___r_s_p.html#a0d5ffe38d68e48d81e61fc6a4999ae68">conn_handle</a>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___d_a_t_a___r_s_p.html#aeb65c8711b864df01fca95cfe904d924">cid</a>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___d_a_t_a___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">         }</div><div class="line">         <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga381781e549cac92e9be6035a0c4aa75a">gap_ecfc_reg_proto</a>(<a class="code" href="group___b_t___t_y_p_e_s.html#ga9088ef63737a3c98e640b59ca2d6363d">PSM_EATT</a>, app_ecfc_callback, <span class="keyword">true</span>, &amp;ecfc_proto_id, <a class="code" href="group___g_a_p___e_c_f_c___d_a_t_a___p_a_t_h.html#ga05f76949bd124949ed0ad943122bb180">GAP_ECFC_DATA_PATH_GATT</a>);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga050fc2348945407af46fd595d45096d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga050fc2348945407af46fd595d45096d8">&#9670;&nbsp;</a></span>gap_ecfc_send_sec_reg_req()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool gap_ecfc_send_sec_reg_req </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_le</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>active</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>psm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>requirement</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>key_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a request to register/deregister a protocol security entry over L2CAP. The security will be used when establishing a L2CAP ECFC channel. If the request was successfully sent, a message whose type is <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343abed0d09b0c7dd7a8a386fc1804532346">GAP_ECFC_SEC_REG_RSP</a> and data is <a class="el" href="struct_t___g_a_p___e_c_f_c___s_e_c___r_e_g___r_s_p.html">T_GAP_ECFC_SEC_REG_RSP</a> will be received in the callback function registered by <a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga381781e549cac92e9be6035a0c4aa75a">gap_ecfc_reg_proto</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">is_le</td><td>Whether is LE transport. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">active</td><td>Register/Deregister the security entry. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">psm</td><td>PSM value for protocol. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uuid</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">requirement</td><td>Security requirement of the entry. Valid values are combinations of <a class="el" href="group___g_a_p___e_c_f_c___s_e_c___s_e_t_t_i_n_g.html">GAP ECFC Security Setting</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_size</td><td>Key size requirement of the entry. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Operation result. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Send request success </td></tr>
    <tr><td class="paramname">false</td><td>Send request failed.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line">uint16_t app_ecfc_callback(<span class="keywordtype">void</span> *p_buf, <a class="code" href="group___g_a_p___e_c_f_c___exported___types.html#gad5e6320f36897b067d4121b07200e343">T_GAP_ECFC_MSG</a> msg)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">     <span class="keywordflow">case</span> <a class="code" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343abed0d09b0c7dd7a8a386fc1804532346">GAP_ECFC_SEC_REG_RSP</a>:</div><div class="line">         {</div><div class="line">             <a class="code" href="struct_t___g_a_p___e_c_f_c___s_e_c___r_e_g___r_s_p.html">T_GAP_ECFC_SEC_REG_RSP</a> *p_rsp = (<a class="code" href="struct_t___g_a_p___e_c_f_c___s_e_c___r_e_g___r_s_p.html">T_GAP_ECFC_SEC_REG_RSP</a> *)p_buf;</div><div class="line">             <a class="code" href="group___t_r_a_c_e.html#ga63d3804cafe8ed6f9165f9692b30fd96">APP_PRINT_INFO5</a>(<span class="stringliteral">&quot;GAP_ECFC_SEC_REG_RSP: is_le %d, psm 0x%x, active %d, uuid 0x%x, cause 0x%x&quot;</span>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___s_e_c___r_e_g___r_s_p.html#a0265261ef2918f8212db79ef536d4663">is_le</a>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___s_e_c___r_e_g___r_s_p.html#a38a3d76182946faeb6b5ea25bed58432">psm</a>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___s_e_c___r_e_g___r_s_p.html#a05c940dbc220f5a723afd70071aebff8">active</a>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___s_e_c___r_e_g___r_s_p.html#aaa1ded1f77a9c12a196ed4ba2ce5f95d">uuid</a>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___s_e_c___r_e_g___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>);</div><div class="line">         }</div><div class="line">         <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga381781e549cac92e9be6035a0c4aa75a">gap_ecfc_reg_proto</a>(<a class="code" href="group___b_t___t_y_p_e_s.html#ga9088ef63737a3c98e640b59ca2d6363d">PSM_EATT</a>, app_ecfc_callback, <span class="keyword">true</span>, &amp;ecfc_proto_id, <a class="code" href="group___g_a_p___e_c_f_c___d_a_t_a___p_a_t_h.html#ga05f76949bd124949ed0ad943122bb180">GAP_ECFC_DATA_PATH_GATT</a>);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"><span class="keyword">static</span> <a class="code" href="group___u_s_e_r___c_m_d___p_a_r_s_e___exported___types.html#gab7f77eecc3c723d439e610daa838acec">T_USER_CMD_PARSE_RESULT</a> cmd_ecfcsec(<a class="code" href="struct_t___u_s_e_r___c_m_d___p_a_r_s_e_d___v_a_l_u_e.html">T_USER_CMD_PARSED_VALUE</a> *p_parse_value)</div><div class="line"> {</div><div class="line">     uint8_t requirements = p_parse_value-&gt;<a class="code" href="struct_t___u_s_e_r___c_m_d___p_a_r_s_e_d___v_a_l_u_e.html#a90696670324926369a9646e55705bcbf">dw_param</a>[0];</div><div class="line">     <span class="keywordflow">if</span> (<a class="code" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga050fc2348945407af46fd595d45096d8">gap_ecfc_send_sec_reg_req</a>(<span class="keyword">true</span>, 1, <a class="code" href="group___b_t___t_y_p_e_s.html#ga9088ef63737a3c98e640b59ca2d6363d">PSM_EATT</a>, 0, requirements, 16))</div><div class="line">     {</div><div class="line">         <span class="keywordflow">return</span> <a class="code" href="group___u_s_e_r___c_m_d___p_a_r_s_e___exported___types.html#ggab7f77eecc3c723d439e610daa838aceca0acf8b75f6fcf2284c37a773d30b5864">RESULT_SUCESS</a>;</div><div class="line">     }</div><div class="line">     <span class="keywordflow">else</span></div><div class="line">     {</div><div class="line">         <span class="keywordflow">return</span> <a class="code" href="group___u_s_e_r___c_m_d___p_a_r_s_e___exported___types.html#ggab7f77eecc3c723d439e610daa838acecaed12a48e8a6db9d3e74d4e29e7eda08d">RESULT_ERR</a>;</div><div class="line">     }</div><div class="line"> }</div></div><!-- fragment --> 
</div>
</div>
<a id="gafe1e6cd1fdcf5096462aaaf61b751f90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafe1e6cd1fdcf5096462aaaf61b751f90">&#9670;&nbsp;</a></span>gap_ecfc_send_reconfigure_req()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool gap_ecfc_send_reconfigure_req </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>p_cid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cid_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>local_mtu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>local_mps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a request to reconfigure L2CAP ECFC channel. If the request was successfully sent, <a class="el" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343a0784d8a83a02b885f2e951e90a46fbf9">GAP_ECFC_RECONFIGURE_RSP</a> will be received in the callback function registed by <a class="el" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga381781e549cac92e9be6035a0c4aa75a">gap_ecfc_reg_proto</a> to indicate whether the procedure was successful. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>Connection handle of the ACL link. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_cid</td><td>Local CID array need to reconfigure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cid_num</td><td>The cid number of p_cid array. Range: (1- GAP_ECFC_CREATE_CHANN_MAX_NUM) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">local_mtu</td><td>Preferred Local MTU size value of the L2CAP ECFC channel. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">local_mps</td><td>Preferred Local MPS value of the L2CAP ECFC channel. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Operation result. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Send request success </td></tr>
    <tr><td class="paramname">false</td><td>Send request failed.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line">uint16_t app_ecfc_callback(<span class="keywordtype">void</span> *p_buf, <a class="code" href="group___g_a_p___e_c_f_c___exported___types.html#gad5e6320f36897b067d4121b07200e343">T_GAP_ECFC_MSG</a> msg)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (msg)</div><div class="line">    {</div><div class="line">     <span class="keywordflow">case</span> <a class="code" href="group___g_a_p___e_c_f_c___exported___types.html#ggad5e6320f36897b067d4121b07200e343a0784d8a83a02b885f2e951e90a46fbf9">GAP_ECFC_RECONFIGURE_RSP</a>:</div><div class="line">         {</div><div class="line">             <a class="code" href="struct_t___g_a_p___e_c_f_c___r_e_c_o_n_f_i_g_u_r_e___r_s_p.html">T_GAP_ECFC_RECONFIGURE_RSP</a> *p_rsp = (<a class="code" href="struct_t___g_a_p___e_c_f_c___r_e_c_o_n_f_i_g_u_r_e___r_s_p.html">T_GAP_ECFC_RECONFIGURE_RSP</a> *)p_buf;</div><div class="line">             <a class="code" href="group___t_r_a_c_e.html#ga481df17295a7fd7ec58a911615f366e3">APP_PRINT_INFO7</a>(<span class="stringliteral">&quot;GAP_ECFC_RECONFIGURE_RSP: proto_id %d, cause 0x%x, conn_handle 0x%x, local_mtu %d, local_mps %d,cid_num %d, cis %b&quot;</span>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___r_e_c_o_n_f_i_g_u_r_e___r_s_p.html#a36732ef488a83f64978aefb7f33a3fb3">proto_id</a>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___r_e_c_o_n_f_i_g_u_r_e___r_s_p.html#aa4f2c0f4dd13d2ab4a435cbbc672c1f3">cause</a>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___r_e_c_o_n_f_i_g_u_r_e___r_s_p.html#a0d5ffe38d68e48d81e61fc6a4999ae68">conn_handle</a>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___r_e_c_o_n_f_i_g_u_r_e___r_s_p.html#a073cf06d942a4dec85b975abf226da6b">local_mtu</a>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___r_e_c_o_n_f_i_g_u_r_e___r_s_p.html#a73413f5579f31f3139574f257ab629d6">local_mps</a>,</div><div class="line">                             p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___r_e_c_o_n_f_i_g_u_r_e___r_s_p.html#a05f0ceef783760453ee82b64265a6ae0">cid_num</a>,</div><div class="line">                             <a class="code" href="group___t_r_a_c_e.html#ga03cf46dce6a4203e1317aaa89f6875d5">TRACE_BINARY</a>(<a class="code" href="group___g_a_p___e_c_f_c___exported___macros.html#ga65cfe529a2349192f08afae6f5d3c693">GAP_ECFC_CREATE_CHANN_MAX_NUM</a> * 2, p_rsp-&gt;<a class="code" href="struct_t___g_a_p___e_c_f_c___r_e_c_o_n_f_i_g_u_r_e___r_s_p.html#ab5df0490e43c8100cb16aaeadb3ef5da">cid</a>));</div><div class="line">         }</div><div class="line">         <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___g_a_p___e_c_f_c___e_x_p_o_r_t___functions.html#ga381781e549cac92e9be6035a0c4aa75a">gap_ecfc_reg_proto</a>(<a class="code" href="group___b_t___t_y_p_e_s.html#ga9088ef63737a3c98e640b59ca2d6363d">PSM_EATT</a>, app_ecfc_callback, <span class="keyword">true</span>, &amp;ecfc_proto_id, <a class="code" href="group___g_a_p___e_c_f_c___d_a_t_a___p_a_t_h.html#ga05f76949bd124949ed0ad943122bb180">GAP_ECFC_DATA_PATH_GATT</a>);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->

<HR SIZE=5>
<font size="3" color="black">Copyright(c) 2020, <a href=" http://www.realtek.com.tw/"><font size="3" color="#6FB7B7"><b>Realtek Semiconductor Corporation</b></font></a>. All rights reserved.</font> 
