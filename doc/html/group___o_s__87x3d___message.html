<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BT AUDIO SDK: Message Queue</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bbpro-h55px.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BT AUDIO SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,true,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">Message Queue<div class="ingroups"><a class="el" href="group___a_p_i___reference.html">API Reference</a> &raquo; <a class="el" href="group___o_s.html">OSIF</a> &raquo; <a class="el" href="group___o_s__87x3d.html">rtl87x3d</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Exchange messages between tasks in a FIFO-like operation.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga78583ff4df155099dbb1592bd71dedfb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___message.html#ga78583ff4df155099dbb1592bd71dedfb">os_msg_queue_create</a>(pp_handle,  p_name,  msg_num,  msg_size)&#160;&#160;&#160;os_msg_queue_create_intern(pp_handle, p_name, msg_num, msg_size, __func__, __LINE__)</td></tr>
<tr class="memdesc:ga78583ff4df155099dbb1592bd71dedfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a message queue instance. This allocates the storage required by the new queue and passes back a handle for the queue.  <a href="#ga78583ff4df155099dbb1592bd71dedfb">More...</a><br /></td></tr>
<tr class="separator:ga78583ff4df155099dbb1592bd71dedfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8c92a710972cfd686abce3d47c897ce4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___message.html#ga8c92a710972cfd686abce3d47c897ce4">os_msg_queue_delete</a>(p_handle)&#160;&#160;&#160;os_msg_queue_delete_intern(p_handle, __func__, __LINE__)</td></tr>
<tr class="memdesc:ga8c92a710972cfd686abce3d47c897ce4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete the specified message queue, and free all the memory allocated for storing of items placed on the queue.  <a href="#ga8c92a710972cfd686abce3d47c897ce4">More...</a><br /></td></tr>
<tr class="separator:ga8c92a710972cfd686abce3d47c897ce4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga234c04b0347900315a7e214fb1a6fa9f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___message.html#ga234c04b0347900315a7e214fb1a6fa9f">os_msg_queue_peek</a>(p_handle,  p_msg_num)&#160;&#160;&#160;os_msg_queue_peek_intern(p_handle, p_msg_num, __func__, __LINE__)</td></tr>
<tr class="memdesc:ga234c04b0347900315a7e214fb1a6fa9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Peek the number of items sent and resided on the message queue.  <a href="#ga234c04b0347900315a7e214fb1a6fa9f">More...</a><br /></td></tr>
<tr class="separator:ga234c04b0347900315a7e214fb1a6fa9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaa510b44bebf45ba68bd83820dfc6456"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___message.html#gaaa510b44bebf45ba68bd83820dfc6456">os_msg_send</a>(p_handle,  p_msg,  wait_ms)&#160;&#160;&#160;os_msg_send_intern(p_handle, p_msg, wait_ms, __func__, __LINE__)</td></tr>
<tr class="memdesc:gaaa510b44bebf45ba68bd83820dfc6456"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an item to the back of the specified message queue. The item is queued by copy, not by reference.  <a href="#gaaa510b44bebf45ba68bd83820dfc6456">More...</a><br /></td></tr>
<tr class="separator:gaaa510b44bebf45ba68bd83820dfc6456"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga10998e34fdfdd3297af840e60d03b09b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___message.html#ga10998e34fdfdd3297af840e60d03b09b">os_msg_recv</a>(p_handle,  p_msg,  wait_ms)&#160;&#160;&#160;os_msg_recv_intern(p_handle, p_msg, wait_ms, __func__, __LINE__)</td></tr>
<tr class="memdesc:ga10998e34fdfdd3297af840e60d03b09b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive an item from the specified message queue. The item is received by copy rather than by reference, so a buffer of adequate size must be provided.  <a href="#ga10998e34fdfdd3297af840e60d03b09b">More...</a><br /></td></tr>
<tr class="separator:ga10998e34fdfdd3297af840e60d03b09b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa7d57411711cce2c813f8cf29bcb0524"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___message.html#gaa7d57411711cce2c813f8cf29bcb0524">os_msg_peek</a>(p_handle,  p_msg,  wait_ms)&#160;&#160;&#160;os_msg_peek_intern(p_handle, p_msg, wait_ms, __func__, __LINE__)</td></tr>
<tr class="memdesc:gaa7d57411711cce2c813f8cf29bcb0524"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive but not remove an item from the specified message queue. The item is received by copy rather than by reference, so a buffer of adequate size must be provided.  <a href="#gaa7d57411711cce2c813f8cf29bcb0524">More...</a><br /></td></tr>
<tr class="separator:gaa7d57411711cce2c813f8cf29bcb0524"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Exchange messages between tasks in a FIFO-like operation. </p>
<p>The Message Queue function group allows to control, send, receive, or wait for message. Message transmission is a basic communication model between tasks that one task sends data explicitly, while another task receives it. The operation is more like some kind of I/O rather than a direct access to information to be shared. The data to be passed can be any type.<br />
 </p><div class="image">
<img src="OS-message-queue-overview.jpg" alt="OS-message-queue-overview.jpg" width="617px" height="321px"/>
<div class="caption">
Message Queue Overview</div></div>
 <h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga78583ff4df155099dbb1592bd71dedfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga78583ff4df155099dbb1592bd71dedfb">&#9670;&nbsp;</a></span>os_msg_queue_create</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define os_msg_queue_create</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">pp_handle, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p_name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">msg_num, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">msg_size&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;os_msg_queue_create_intern(pp_handle, p_name, msg_num, msg_size, __func__, __LINE__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a message queue instance. This allocates the storage required by the new queue and passes back a handle for the queue. </p>
<p>os_msg.h</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">pp_handle</td><td>Used to pass back a handle by which the message queue can be referenced.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_name</td><td>A descriptive name for the message queue.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg_num</td><td>The maximum number of items that the queue can contain.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg_size</td><td>The number of bytes each item in the queue will require. Items are queued by copy, not by reference, so this is the number of bytes that will be copied for each posted item. Each item on the queue must be the same size.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the message queue creation. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Message queue was created successfully. </td></tr>
    <tr><td class="paramname">false</td><td>Message queue was failed to create.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keyword">struct </span>test_msg</div><div class="line">{</div><div class="line">    uint8_t id;</div><div class="line">    uint8_t data[16];</div><div class="line">}</div><div class="line"></div><div class="line"><span class="preprocessor">#define MSG_NUM  10</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordtype">void</span> *p_handle = <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"></div><div class="line">    <span class="comment">// Create a queue capable of containing 10 items of structure test_msg.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3d___message.html#ga78583ff4df155099dbb1592bd71dedfb">os_msg_queue_create</a>(&amp;p_handle, <span class="stringliteral">&quot;msg queue name&quot;</span>, MSG_NUM, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> test_msg)) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Message queue created successfully.</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">// Message queue failed to create.</span></div><div class="line">        <span class="keywordflow">return</span> -1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Delete the message queue.</span></div><div class="line">    <a class="code" href="group___o_s__87x3d___message.html#ga8c92a710972cfd686abce3d47c897ce4">os_msg_queue_delete</a>(p_handle);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga8c92a710972cfd686abce3d47c897ce4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8c92a710972cfd686abce3d47c897ce4">&#9670;&nbsp;</a></span>os_msg_queue_delete</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define os_msg_queue_delete</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p_handle</td><td>)</td>
          <td>&#160;&#160;&#160;os_msg_queue_delete_intern(p_handle, __func__, __LINE__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete the specified message queue, and free all the memory allocated for storing of items placed on the queue. </p>
<p>os_msg.h</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_handle</td><td>The handle to the message queue being deleted.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the message queue deletion. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Message queue was deleted successfully. </td></tr>
    <tr><td class="paramname">false</td><td>Message queue was failed to delete.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keyword">struct </span>test_msg</div><div class="line">{</div><div class="line">    uint8_t id;</div><div class="line">    uint8_t data[16];</div><div class="line">}</div><div class="line"></div><div class="line"><span class="preprocessor">#define MSG_NUM  10</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordtype">void</span> *p_handle = <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"></div><div class="line">    <span class="comment">// Create a queue capable of containing 10 items of structure test_msg.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3d___message.html#ga78583ff4df155099dbb1592bd71dedfb">os_msg_queue_create</a>(&amp;p_handle, <span class="stringliteral">&quot;msg queue name&quot;</span>, MSG_NUM, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> test_msg)) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Message queue created successfully.</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">// Message queue failed to create.</span></div><div class="line">        <span class="keywordflow">return</span> -1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Delete the message queue.</span></div><div class="line">    <a class="code" href="group___o_s__87x3d___message.html#ga8c92a710972cfd686abce3d47c897ce4">os_msg_queue_delete</a>(p_handle);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga234c04b0347900315a7e214fb1a6fa9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga234c04b0347900315a7e214fb1a6fa9f">&#9670;&nbsp;</a></span>os_msg_queue_peek</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define os_msg_queue_peek</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p_handle, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p_msg_num&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;os_msg_queue_peek_intern(p_handle, p_msg_num, __func__, __LINE__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Peek the number of items sent and resided on the message queue. </p>
<p>os_msg.h</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_handle</td><td>The handle to the message queue being peeked.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_msg_num</td><td>Used to pass back the number of items residing on the message queue.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the message queue peek. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Message queue was peeked successfully. </td></tr>
    <tr><td class="paramname">false</td><td>Message queue was failed to peek.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keyword">struct </span>test_msg</div><div class="line">{</div><div class="line">    uint8_t id;</div><div class="line">    uint8_t data[16];</div><div class="line">}</div><div class="line"></div><div class="line"><span class="preprocessor">#define MSG_NUM  10</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordtype">void</span> *p_handle = <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line">    uint32_t msg_num;</div><div class="line"></div><div class="line">    <span class="comment">// Create a queue capable of containing 10 items of structure test_msg.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3d___message.html#ga78583ff4df155099dbb1592bd71dedfb">os_msg_queue_create</a>(&amp;p_handle, <span class="stringliteral">&quot;msg queue name&quot;</span>, MSG_NUM, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> test_msg)) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Message queue created successfully.</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">// Message queue failed to create.</span></div><div class="line">        <span class="keywordflow">return</span> -1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Peek the number of items sent on this message queue.</span></div><div class="line">    <a class="code" href="group___o_s__87x3d___message.html#ga234c04b0347900315a7e214fb1a6fa9f">os_msg_queue_peek</a>(p_handle, &amp;msg_num);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="gaaa510b44bebf45ba68bd83820dfc6456"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaa510b44bebf45ba68bd83820dfc6456">&#9670;&nbsp;</a></span>os_msg_send</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define os_msg_send</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p_handle, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p_msg, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">wait_ms&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;os_msg_send_intern(p_handle, p_msg, wait_ms, __func__, __LINE__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send an item to the back of the specified message queue. The item is queued by copy, not by reference. </p>
<p>os_msg.h</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_handle</td><td>The handle to the message queue on which the item is to be sent.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_msg</td><td>Pointer to the item that is to be sent on the queue. The referenced item rather than pointer itself will be copied on the queue.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">wait_ms</td><td>The maximum amount of time in milliseconds that the task should block waiting for the item to sent on the queue. <ul>
<li><code>0</code> No blocking and return immediately. </li>
<li><code>0xFFFFFFFF</code> Block infinitely until the item sent. </li>
<li><code>others</code> The timeout value in milliseconds.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the message item sent. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Message item was sent successfully. </td></tr>
    <tr><td class="paramname">false</td><td>Message item was failed to send.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keyword">struct </span>test_msg</div><div class="line">{</div><div class="line">    uint8_t id;</div><div class="line">    uint8_t data[16];</div><div class="line">}</div><div class="line"></div><div class="line"><span class="preprocessor">#define MSG_NUM  10</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordtype">void</span> *p_handle = <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line">    <span class="keyword">struct </span>test_msg msg;</div><div class="line"></div><div class="line">    <span class="comment">// Create a queue capable of containing 10 items of structure test_msg.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3d___message.html#ga78583ff4df155099dbb1592bd71dedfb">os_msg_queue_create</a>(&amp;p_handle, <span class="stringliteral">&quot;msg queue name&quot;</span>, MSG_NUM, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> test_msg)) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Message queue created successfully.</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">// Message queue failed to create.</span></div><div class="line">        <span class="keywordflow">return</span> -1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Send the item to this message queue.</span></div><div class="line">    msg.id = 1;</div><div class="line">    msg.data[0] = 0;</div><div class="line">    <a class="code" href="group___o_s__87x3d___message.html#gaaa510b44bebf45ba68bd83820dfc6456">os_msg_send</a>(p_handle, &amp;msg, 0);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga10998e34fdfdd3297af840e60d03b09b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga10998e34fdfdd3297af840e60d03b09b">&#9670;&nbsp;</a></span>os_msg_recv</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define os_msg_recv</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p_handle, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p_msg, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">wait_ms&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;os_msg_recv_intern(p_handle, p_msg, wait_ms, __func__, __LINE__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive an item from the specified message queue. The item is received by copy rather than by reference, so a buffer of adequate size must be provided. </p>
<p>os_msg.h</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_handle</td><td>The handle to the message queue from which the item is to be received.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_msg</td><td>Pointer to the buffer into which the received item will be copied. item rather than pointer itself will be copied on the queue.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">wait_ms</td><td>The maximum amount of time in milliseconds that the task should block waiting for an item to be received from the queue. <ul>
<li><code>0</code> No blocking and return immediately. </li>
<li><code>0xFFFFFFFF</code> Block infinitely until the item received. </li>
<li><code>others</code> The timeout value in milliseconds.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the message item received. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Message item was received successfully. </td></tr>
    <tr><td class="paramname">false</td><td>Message item was failed to receive.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keyword">struct </span>test_msg</div><div class="line">{</div><div class="line">    uint8_t id;</div><div class="line">    uint8_t data[16];</div><div class="line">}</div><div class="line"></div><div class="line"><span class="preprocessor">#define MSG_NUM  10</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> *p_handle = <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> send_msg(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keyword">struct </span>test_msg msg;</div><div class="line"></div><div class="line">    <span class="comment">// Create a queue capable of containing 10 items of structure test_msg.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3d___message.html#ga78583ff4df155099dbb1592bd71dedfb">os_msg_queue_create</a>(&amp;p_handle, <span class="stringliteral">&quot;msg queue name&quot;</span>, MSG_NUM, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> test_msg)) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Message queue created successfully.</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">// Message queue failed to create.</span></div><div class="line">        <span class="keywordflow">return</span> -1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Send the item to this message queue.</span></div><div class="line">    msg.id = 1;</div><div class="line">    msg.data[0] = 0;</div><div class="line">    <a class="code" href="group___o_s__87x3d___message.html#gaaa510b44bebf45ba68bd83820dfc6456">os_msg_send</a>(p_handle, &amp;msg, 0);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> receive_msg(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keyword">struct </span>test_msg msg;</div><div class="line"></div><div class="line">    <span class="comment">// Receive the message queue item.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3d___message.html#ga10998e34fdfdd3297af840e60d03b09b">os_msg_recv</a>(p_handle, &amp;msg, 0) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Message item received successfully.</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">// Message item failed to receive.</span></div><div class="line">        <span class="keywordflow">return</span> -1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="gaa7d57411711cce2c813f8cf29bcb0524"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa7d57411711cce2c813f8cf29bcb0524">&#9670;&nbsp;</a></span>os_msg_peek</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define os_msg_peek</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p_handle, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p_msg, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">wait_ms&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;os_msg_peek_intern(p_handle, p_msg, wait_ms, __func__, __LINE__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive but not remove an item from the specified message queue. The item is received by copy rather than by reference, so a buffer of adequate size must be provided. </p>
<p>os_msg.h</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_handle</td><td>The handle to the message queue on which the item is to be peeked.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_msg</td><td>Pointer to the buffer into which the received item will be copied. item rather than pointer itself will be copied on the queue.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">wait_ms</td><td>The maximum amount of time in milliseconds that the task should block waiting for an item to be received from the queue. <ul>
<li><code>0</code> No blocking and return immediately. </li>
<li><code>0xFFFFFFFF</code> Block infinitely until the item received. </li>
<li><code>others</code> The timeout value in milliseconds.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the message item received. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Message item was received successfully. </td></tr>
    <tr><td class="paramname">false</td><td>Message item was failed to receive.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keyword">struct </span>test_msg</div><div class="line">{</div><div class="line">    uint8_t id;</div><div class="line">    uint8_t data[16];</div><div class="line">}</div><div class="line"></div><div class="line"><span class="preprocessor">#define MSG_NUM  10</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> *p_handle = <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> send_msg(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keyword">struct </span>test_msg msg;</div><div class="line"></div><div class="line">    <span class="comment">// Create a queue capable of containing 10 items of structure test_msg.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3d___message.html#ga78583ff4df155099dbb1592bd71dedfb">os_msg_queue_create</a>(&amp;p_handle, <span class="stringliteral">&quot;msg queue name&quot;</span>, MSG_NUM, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> test_msg)) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Message queue created successfully.</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">// Message queue failed to create.</span></div><div class="line">        <span class="keywordflow">return</span> -1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Send the item to this message queue.</span></div><div class="line">    msg.id = 1;</div><div class="line">    msg.data[0] = 0;</div><div class="line">    <a class="code" href="group___o_s__87x3d___message.html#gaaa510b44bebf45ba68bd83820dfc6456">os_msg_send</a>(p_handle, &amp;msg, 0);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> peek_msg(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keyword">struct </span>test_msg msg;</div><div class="line"></div><div class="line">    <span class="comment">// Peek the message queue item.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3d___message.html#gaa7d57411711cce2c813f8cf29bcb0524">os_msg_peek</a>(p_handle, &amp;msg, 0) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Message item peeked successfully.</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">// Message item failed to peek.</span></div><div class="line">        <span class="keywordflow">return</span> -1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->

<HR SIZE=5>
<font size="3" color="black">Copyright(c) 2020, <a href=" http://www.realtek.com.tw/"><font size="3" color="#6FB7B7"><b>Realtek Semiconductor Corporation</b></font></a>. All rights reserved.</font> 
