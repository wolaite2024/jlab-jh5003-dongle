<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BT AUDIO SDK: $title</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bbpro-h55px.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BT AUDIO SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,true,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="contents">
<div class="textblock"><p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
 </p>
<h1><a class="anchor" id="Slide_Switch_Page"></a>
Slide Switch Module Application Note </h1>
<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
 </p><center><b>V1.1</b></center><p><br />
 </p><center><b>2023/05/12</b></center><div style="page-break-after: always;"></div><h2><a class="anchor" id="Slide_Switch_Rev"></a>
Revision History</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Version  </th><th class="markdownTableHeadCenter">Date  </th><th class="markdownTableHeadCenter">Description   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">V1.0.0.0  </td><td class="markdownTableBodyCenter">2021/12/01  </td><td class="markdownTableBodyCenter">Stable Release   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">V1.1  </td><td class="markdownTableBodyCenter">2023/05/12  </td><td class="markdownTableBodyCenter">Optimize content   </td></tr>
</table>
<div style="page-break-after: always;"></div><h2>Contents</h2>
<ul>
<li><a class="el" href="_a_n047__s_l_i_d_e__s_w_i_t_c_h__a_p_p_l_i_c_a_t_i_o_n__n_o_t_e.html#Slide_Switch_Rev">Revision History</a></li>
<li><a class="el" href="_a_n047__s_l_i_d_e__s_w_i_t_c_h__a_p_p_l_i_c_a_t_i_o_n__n_o_t_e.html#Slide_Switch_Table_List">Table List</a></li>
<li><a class="el" href="_a_n047__s_l_i_d_e__s_w_i_t_c_h__a_p_p_l_i_c_a_t_i_o_n__n_o_t_e.html#Slide_Switch_Figure_List">Figure List</a></li>
<li><a class="el" href="_a_n047__s_l_i_d_e__s_w_i_t_c_h__a_p_p_l_i_c_a_t_i_o_n__n_o_t_e.html#Slide_Switch_Glossary">Glossary</a></li>
<li><a class="el" href="_a_n047__s_l_i_d_e__s_w_i_t_c_h__a_p_p_l_i_c_a_t_i_o_n__n_o_t_e.html#Slide_Switch_Introduction">1 Introduction</a></li>
<li><a class="el" href="_a_n047__s_l_i_d_e__s_w_i_t_c_h__a_p_p_l_i_c_a_t_i_o_n__n_o_t_e.html#Slide_Switch_McuConfigTool_Configuration">2 McuConfigTool Configuration</a></li>
<li><a class="el" href="_a_n047__s_l_i_d_e__s_w_i_t_c_h__a_p_p_l_i_c_a_t_i_o_n__n_o_t_e.html#Slide_Switch_Source_Code_Overview">3 Source Code Overview</a><ul>
<li><a class="el" href="_a_n047__s_l_i_d_e__s_w_i_t_c_h__a_p_p_l_i_c_a_t_i_o_n__n_o_t_e.html#Slide_Switch_Initialization">3.1 Slide Switch Initialization</a></li>
<li><a class="el" href="_a_n047__s_l_i_d_e__s_w_i_t_c_h__a_p_p_l_i_c_a_t_i_o_n__n_o_t_e.html#Deal_With_Slide_Switch_Interruption">3.2 Deal With Slide Switch Interruption</a></li>
<li><a class="el" href="_a_n047__s_l_i_d_e__s_w_i_t_c_h__a_p_p_l_i_c_a_t_i_o_n__n_o_t_e.html#Slide_Switch_Low_Power_Mode">3.3 Slide Switch Low Power Mode</a></li>
</ul>
</li>
</ul>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="Slide_Switch_Table_List"></a>
Table List</h2>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="Slide_Switch_Figure_List"></a>
Figure List</h2>
<ul>
<li><a href="#figure_2_1">Figure 2-1 Slide Switch Enable</a></li>
<li><a href="#figure_2_2">Figure 2-2 Slide Switch Pinmux Config</a></li>
<li><a href="#figure_2_3">Figure 2-3 Slide Switch Action Selection</a></li>
<li><a href="#figure_3_1">Figure 3-1 Slide Switch Flow</a></li>
</ul>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="Slide_Switch_Glossary"></a>
Glossary</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Terms  </th><th class="markdownTableHeadCenter">Definitions   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td></tr>
</table>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="Slide_Switch_Introduction"></a>
1 Introduction</h2>
<p>This document provides overview of slide switch module. The following topics are included:</p><ul>
<li>Configuration in McuConfigTool</li>
<li>Source code review</li>
</ul>
<p>Macro F_APP_SLIDE_SWITCH_SUPPORT should be defined when slide switch module is used.</p>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="Slide_Switch_McuConfigTool_Configuration"></a>
2 McuConfigTool Configuration</h2>
<p>This chapter will show you how to use McuConfigTool for slide switch configuration.</p>
<p>Slide switch can be enabled in "HW Feature" page as shown in following figure. </p><div class="image">
<img src="slide_switch_enable.png" alt="slide_switch_enable.png"/>
</div>
 <center><div id="figure_2_1"><b>Figure 2-1 Slide Switch Enable</b></div></center><p><br />
 <br />
 Slide switch pin can be choosed from available GPIO pins. </p><div class="image">
<img src="slide_switch_pinmux_config.png" alt="slide_switch_pinmux_config.png"/>
</div>
 <center><div id="figure_2_2"><b>Figure 2-2 Slide Switch Pinmux Config</b></div></center><p><br />
 <br />
 Following action items can be selected as slide switch high/low action. </p><div class="image">
<img src="slide_switch_high_low_action.png" alt="slide_switch_high_low_action.png"/>
</div>
 <center><div id="figure_2_3"><b>Figure 2-3 Slide Switch Action Selection</b></div></center><p><br />
 <br />
</p>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="Slide_Switch_Source_Code_Overview"></a>
3 Source Code Overview</h2>
<p>This chapter will show the source code of slide switch module, and its flow chart is as follows. </p><div class="image">
<img src="slide_switch_flow_chart.png" alt="slide_switch_flow_chart.png"/>
</div>
 <center><div id="figure_3_1"><b>Figure 3-1 Slide Switch Flow</b></div></center><h3><a class="anchor" id="Slide_Switch_Initialization"></a>
3.1 Slide Switch Initialization</h3>
<p>The components of slide switch initialization are as follows:</p><ul>
<li>Configuration initialization</li>
<li>Pad and pinmux initialization</li>
<li>Driver initialization</li>
<li>Register callback function</li>
</ul>
<p>The following API copys app configuration to local storage. Vendor actions can be added here without using McuConfig Tool. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> app_slide_switch_cfg_init(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    uint8_t i = 0;</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; APP_SLIDE_SWITCH_TOTAL; i++)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">if</span> (i == 0)</div><div class="line">        {</div><div class="line">            slide_switch[i].support = <a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#a903dc01312e5361f26870b74dd63a862">slide_switch_0_support</a>;</div><div class="line">            slide_switch[i].low_action = (T_SWITCH_ACTION)<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#a5f9085b7733019870b129ddc318d2c83">slide_switch_0_low_action</a>;</div><div class="line">            slide_switch[i].high_action = (T_SWITCH_ACTION)<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#a261d97e24767c9e1284133ebc125b4fd">slide_switch_0_high_action</a>;</div><div class="line">            slide_switch[i].pinmux = <a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="group___a_p_p___c_f_g.html#ga5457473a3a3e4158d00b79c7ede22837">slide_switch_0_pinmux</a>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i == 1)</div><div class="line">        {</div><div class="line">            slide_switch[i].support = <a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#ac117e5c3dad5b750403a37267aab95b5">slide_switch_1_support</a>;</div><div class="line">            slide_switch[i].low_action = (T_SWITCH_ACTION)<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#aac2b969d366059ebc9aad8070d8c9969">slide_switch_1_low_action</a>;</div><div class="line">            slide_switch[i].high_action = (T_SWITCH_ACTION)<a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#a926119ec6383d1b741ba5358a783632e">slide_switch_1_high_action</a>;</div><div class="line">            slide_switch[i].pinmux = <a class="code" href="group___a_p_p___c_f_g___exported___types.html#gae5da1e58b53e3ae552aafa6d26ade7a2">app_cfg_const</a>.<a class="code" href="struct_t___a_p_p___c_f_g___c_o_n_s_t.html#a8d9475338a782bde4c0c133a9d79ff5b">slide_switch_1_pinmux</a>;</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p> The following API does pad and pinmux initialization. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> app_slide_switch_board_init(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___p_a_d___pull___mode.html#ga4aaa6ff1976e9a523470b15e6f116eeb">PAD_Pull_Mode</a> pull_mode = <a class="code" href="group__x3e___p_a_d___pull___mode.html#ggaed6ddbb1abccbd7d16dd3dcb8319f475ae7cf699523e72c6a7d461137324b4830">PAD_PULL_UP</a>;</div><div class="line">    uint8_t i = 0;</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; APP_SLIDE_SWITCH_TOTAL; i++)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">if</span> (!slide_switch[i].support)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">continue</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        <a class="code" href="group___p_i_n_m_u_x___exported___functions.html#ga54f185f00ccea46d0645189f40a4f8d0">Pinmux_Config</a>(slide_switch[i].pinmux, <a class="code" href="group___pin___function___number.html#ga9d5468fc89ece8692bbc8e132e2e2471">DWGPIO</a>);</div><div class="line"></div><div class="line"><span class="preprocessor">#if (F_APP_SLIDE_SWITCH_POWER_ON_OFF == 1)</span></div><div class="line">        <span class="keywordflow">if</span> (slide_switch[i].low_action == ACTION_POWER_ON)</div><div class="line">        {</div><div class="line">            <span class="comment">//reduce power consumption</span></div><div class="line">            pull_mode = <a class="code" href="group__x3e___p_a_d___pull___mode.html#ggaed6ddbb1abccbd7d16dd3dcb8319f475a7428dd8f0f6a28898ca7abfbcc02c02b">PAD_PULL_DOWN</a>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (slide_switch[i].high_action == ACTION_POWER_ON)</div><div class="line">        {</div><div class="line">            <span class="comment">//reduce power consumption</span></div><div class="line">            pull_mode = <a class="code" href="group__x3e___p_a_d___pull___mode.html#ggaed6ddbb1abccbd7d16dd3dcb8319f475ae7cf699523e72c6a7d461137324b4830">PAD_PULL_UP</a>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">        {</div><div class="line">            pull_mode = <a class="code" href="group__x3e___p_a_d___pull___mode.html#ggaed6ddbb1abccbd7d16dd3dcb8319f475ae7cf699523e72c6a7d461137324b4830">PAD_PULL_UP</a>;</div><div class="line">        }</div><div class="line"></div><div class="line">        <a class="code" href="group___p_i_n_m_u_x___exported___functions.html#ga38de86a8ea4d49c04e681494cc1c69cc">Pad_Config</a>(slide_switch[i].pinmux,</div><div class="line">                   <a class="code" href="group__x3e___p_a_d___mode.html#gga2cc156cba11040bcf54db2efeb9cb587a8309999f45f91d480cb6fbb7082efbf3">PAD_PINMUX_MODE</a>, <a class="code" href="group__x3e___p_a_d___power___mode.html#ggac2e804c73a9d287080d1cf1207e6a177a64ef7041a073bac1e848da51333064e0">PAD_IS_PWRON</a>, pull_mode, <a class="code" href="group__x3e___p_a_d___output___config.html#ggacfc9e3ea370eb8401828c4b97c110dd0addca868800d517c0513e6a87c3350a00">PAD_OUT_DISABLE</a>, <a class="code" href="group__x3e___p_a_d___output___value.html#gga1bbbfd046e26ccb142c1b42f1d4dccd7a2c46edbcf7e322cae25b4a64fc568bb8">PAD_OUT_HIGH</a>);</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p> The following API does driver initialization. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> app_slide_switch_driver_init(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    uint8_t i = 0;</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; APP_SLIDE_SWITCH_TOTAL; i++)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">if</span> (slide_switch[i].support)</div><div class="line">        {</div><div class="line">            app_slide_switch_x_driver_init((T_APP_SLIDE_SWITCH_ID)i);</div><div class="line">            <a class="code" href="group___a_p_p___d_l_p_s___exported___functions.html#ga611e2789af34e2acda459795ecba30ee">app_dlps_pad_wake_up_polarity_invert</a>(slide_switch[i].pinmux);</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p> In the following API, registering necessary functions is done. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> app_slide_switch_init(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___s_y_s_t_e_m___m_a_n_a_g_e_r.html#ga6b27ecfe7b3dfa93341db098f907a839">sys_mgr_cback_register</a>(app_slide_switch_dm_cback);</div><div class="line">    <a class="code" href="group___a_p_p___t_i_m_e_r.html#ga5d2a3ae9710b2036a2907647a1932f0f">app_timer_reg_cb</a>(app_slide_switch_timeout_cb, &amp;app_slide_switch_timer_id);</div><div class="line">}</div></div><!-- fragment --><h3><a class="anchor" id="Deal_With_Slide_Switch_Interruption"></a>
3.2 Deal With Slide Switch Interruption</h3>
<p>This chapter will show the procedure for slide switch interruption.<br />
 IO message is sent in slide switch interrupt callback function. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> app_slide_switch_intr_callback(T_APP_SLIDE_SWITCH_ID <span class="keywordtype">id</span>)</div><div class="line">{</div><div class="line">    ...</div><div class="line"></div><div class="line">    gpio_msg.<a class="code" href="struct_t___i_o___m_s_g.html#acb5cfd209ba75c853d03f701e7f91679">type</a> = <a class="code" href="group___a_p_p___m_s_g___exported___types.html#gga468a59751cf5bb96e120b43fea01e074af11ba4096588dc277d9bd604f1007024">IO_MSG_TYPE_GPIO</a>;</div><div class="line">    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == APP_SLIDE_SWITCH_0)</div><div class="line">    {</div><div class="line">        gpio_msg.<a class="code" href="struct_t___i_o___m_s_g.html#ac5d9ab8403fb9ca24facc32b821dd53b">subtype</a> = <a class="code" href="group___a_p_p___m_s_g___exported___types.html#ggac53061b3924b56c44eacd7e43a711f10ae7d32ae29ee363ad6a34360028d30ef7">IO_MSG_GPIO_SLIDE_SWITCH_0</a>;</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == APP_SLIDE_SWITCH_1)</div><div class="line">    {</div><div class="line">        gpio_msg.<a class="code" href="struct_t___i_o___m_s_g.html#ac5d9ab8403fb9ca24facc32b821dd53b">subtype</a> = <a class="code" href="group___a_p_p___m_s_g___exported___types.html#ggac53061b3924b56c44eacd7e43a711f10a8a117fc8c3e0e02895c9dc98db573a35">IO_MSG_GPIO_SLIDE_SWITCH_1</a>;</div><div class="line">    }</div><div class="line"></div><div class="line">    gpio_msg.<a class="code" href="struct_t___i_o___m_s_g.html#ac3cb856d7e1befacacda7d89dbaabd13">u</a>.<a class="code" href="struct_t___i_o___m_s_g.html#aba18f3d521fde3af39c58b809a9c7ef0">param</a> = gpio_status;</div><div class="line"></div><div class="line">    <a class="code" href="group___a_p_p___i_o___m_s_g.html#ga8e58ced01ede310ff10ebb90248942d2">app_io_send_msg</a>(&amp;gpio_msg);</div><div class="line">}</div></div><!-- fragment --><p> When slide switch msg received, debounce timer is started. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> app_slide_switch_handle_msg(<a class="code" href="struct_t___i_o___m_s_g.html">T_IO_MSG</a> *msg)</div><div class="line">{</div><div class="line">    ...</div><div class="line"></div><div class="line">    <a class="code" href="group___a_p_p___t_i_m_e_r.html#ga7e0ebc306e15dabba884fda9e981df9a">app_start_timer</a>(&amp;timer_idx_slide_switch_debounce[channel], <span class="stringliteral">&quot;slide_switch_debouce&quot;</span>,</div><div class="line">                    app_slide_switch_timer_id, timer_chann, 0, <span class="keyword">false</span>,</div><div class="line">                    APP_SLIDE_SWITCH_DEBOUCE_TIME);</div><div class="line">}</div></div><!-- fragment --><p> After debounce timer timeout, specific level action can be exeuted. </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> app_slide_switch_timeout_cb(uint8_t timer_evt, uint16_t param)</div><div class="line">{</div><div class="line">    ...</div><div class="line">                <span class="keywordflow">if</span> (gpio_status)</div><div class="line">                {</div><div class="line">                    app_slide_switch_action_handle(slide_switch[channel].high_action);</div><div class="line">                }</div><div class="line">                <span class="keywordflow">else</span></div><div class="line">                {</div><div class="line">                    app_slide_switch_action_handle(slide_switch[channel].low_action);</div><div class="line">                }</div><div class="line">    ...</div><div class="line">}</div></div><!-- fragment --><p> Executing the actions in the following function, and vendor actions can be handled here if needed. </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> app_slide_switch_action_handle(T_SWITCH_ACTION action)</div><div class="line">{</div><div class="line">    <a class="code" href="group__x3d___t_r_a_c_e.html#ga81687b044a4d8600c4be891734f4839a">APP_PRINT_INFO1</a>(<span class="stringliteral">&quot;app_slide_switch_action_handle: action %d&quot;</span>, action);</div><div class="line">    <span class="keywordflow">switch</span> (action)</div><div class="line">    {</div><div class="line">    <span class="keywordflow">case</span> ACTION_ANC_ON:</div><div class="line">        {</div><div class="line">            ...</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ACTION_ANC_OFF:</div><div class="line">        {</div><div class="line">            ...</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        ...</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> <h3><a class="anchor" id="Slide_Switch_Low_Power_Mode"></a>
3.3 Slide Switch Low Power Mode</h3>
<p>Low power mode related procedure will include the following parts:</p><ul>
<li>Enter/exit dlps pad/pinmux setting</li>
<li>Pad setting before entering power down mode</li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">void</span>  app_slide_switch_enter_dlps_pad_set(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    uint8_t i = 0;</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; APP_SLIDE_SWITCH_TOTAL; i++)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">if</span> (slide_switch[i].support)</div><div class="line">        {</div><div class="line">            <a class="code" href="group___a_p_p___d_l_p_s___exported___functions.html#ga0647e6ec2063078c1de49f6917deea48">app_dlps_pad_wake_up_enable</a>(slide_switch[i].pinmux);</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span>  app_slide_switch_exit_dlps_pad_set(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    uint8_t i = 0;</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; APP_SLIDE_SWITCH_TOTAL; i++)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">if</span> (slide_switch[i].support)</div><div class="line">        {</div><div class="line">            <a class="code" href="group___a_p_p___d_l_p_s___exported___functions.html#ga8450a5f8dfe3743fc33d7cc4268fc448">app_dlps_restore_pad</a>(slide_switch[i].pinmux);</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p> Considering power consumption, pad will be pulled up or down according to current io level. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span>  app_slide_switch_enter_power_down_pad_set(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    uint8_t i = 0;</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; APP_SLIDE_SWITCH_TOTAL; i++)</div><div class="line">    {</div><div class="line">        ...</div><div class="line"></div><div class="line">        <span class="comment">//to reduce power consumption</span></div><div class="line">        <span class="keywordflow">if</span> (slide_switch[i].support)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (gpio_read_input_level(slide_switch[i].pinmux))</div><div class="line">            {</div><div class="line">                <a class="code" href="group___p_i_n_m_u_x___exported___functions.html#ga38de86a8ea4d49c04e681494cc1c69cc">Pad_Config</a>(slide_switch[i].pinmux,</div><div class="line">                           <a class="code" href="group__x3e___p_a_d___mode.html#gga2cc156cba11040bcf54db2efeb9cb587a63d53e3c9ddf88d4806c1f7aa539564c">PAD_SW_MODE</a>, <a class="code" href="group__x3e___p_a_d___power___mode.html#ggac2e804c73a9d287080d1cf1207e6a177a64ef7041a073bac1e848da51333064e0">PAD_IS_PWRON</a>, <a class="code" href="group__x3e___p_a_d___pull___mode.html#ggaed6ddbb1abccbd7d16dd3dcb8319f475ae7cf699523e72c6a7d461137324b4830">PAD_PULL_UP</a>, <a class="code" href="group__x3e___p_a_d___output___config.html#ggacfc9e3ea370eb8401828c4b97c110dd0addca868800d517c0513e6a87c3350a00">PAD_OUT_DISABLE</a>, <a class="code" href="group__x3e___p_a_d___output___value.html#gga1bbbfd046e26ccb142c1b42f1d4dccd7a2c46edbcf7e322cae25b4a64fc568bb8">PAD_OUT_HIGH</a>);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                <a class="code" href="group___p_i_n_m_u_x___exported___functions.html#ga38de86a8ea4d49c04e681494cc1c69cc">Pad_Config</a>(slide_switch[i].pinmux,</div><div class="line">                           <a class="code" href="group__x3e___p_a_d___mode.html#gga2cc156cba11040bcf54db2efeb9cb587a63d53e3c9ddf88d4806c1f7aa539564c">PAD_SW_MODE</a>, <a class="code" href="group__x3e___p_a_d___power___mode.html#ggac2e804c73a9d287080d1cf1207e6a177a64ef7041a073bac1e848da51333064e0">PAD_IS_PWRON</a>, <a class="code" href="group__x3e___p_a_d___pull___mode.html#ggaed6ddbb1abccbd7d16dd3dcb8319f475a7428dd8f0f6a28898ca7abfbcc02c02b">PAD_PULL_DOWN</a>, <a class="code" href="group__x3e___p_a_d___output___config.html#ggacfc9e3ea370eb8401828c4b97c110dd0addca868800d517c0513e6a87c3350a00">PAD_OUT_DISABLE</a>, <a class="code" href="group__x3e___p_a_d___output___value.html#gga1bbbfd046e26ccb142c1b42f1d4dccd7a2c46edbcf7e322cae25b4a64fc568bb8">PAD_OUT_HIGH</a>);</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->

<HR SIZE=5>
<font size="3" color="black">Copyright(c) 2020, <a href=" http://www.realtek.com.tw/"><font size="3" color="#6FB7B7"><b>Realtek Semiconductor Corporation</b></font></a>. All rights reserved.</font> 
