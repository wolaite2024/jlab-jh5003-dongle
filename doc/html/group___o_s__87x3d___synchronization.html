<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BT AUDIO SDK: Inter-Task Communication</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bbpro-h55px.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BT AUDIO SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,true,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Inter-Task Communication<div class="ingroups"><a class="el" href="group___a_p_i___reference.html">API Reference</a> &raquo; <a class="el" href="group___o_s.html">OSIF</a> &raquo; <a class="el" href="group___o_s__87x3d.html">rtl87x3d</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Manage Inter-task communication functions.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac3c525a745d9e4141dcaa39cf0fa9b46"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___synchronization.html#gac3c525a745d9e4141dcaa39cf0fa9b46">os_lock</a> (void)</td></tr>
<tr class="memdesc:gac3c525a745d9e4141dcaa39cf0fa9b46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enter the critical region. Disable preemptive context switch and interrupts.  <a href="#gac3c525a745d9e4141dcaa39cf0fa9b46">More...</a><br /></td></tr>
<tr class="separator:gac3c525a745d9e4141dcaa39cf0fa9b46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf2ddcad068f1c06096b7ae1f81f42af1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___synchronization.html#gaf2ddcad068f1c06096b7ae1f81f42af1">os_unlock</a> (uint32_t s)</td></tr>
<tr class="memdesc:gaf2ddcad068f1c06096b7ae1f81f42af1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exit the critical region. Enable preemptive context switch and interrupts.  <a href="#gaf2ddcad068f1c06096b7ae1f81f42af1">More...</a><br /></td></tr>
<tr class="separator:gaf2ddcad068f1c06096b7ae1f81f42af1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8cf116acd094696c10d6a29561ea9af4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___synchronization.html#ga8cf116acd094696c10d6a29561ea9af4">os_sem_create</a> (void **pp_handle, const char *p_name, uint32_t init_count, uint32_t max_count)</td></tr>
<tr class="memdesc:ga8cf116acd094696c10d6a29561ea9af4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a counting semaphore.  <a href="#ga8cf116acd094696c10d6a29561ea9af4">More...</a><br /></td></tr>
<tr class="separator:ga8cf116acd094696c10d6a29561ea9af4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga313d8d7fc582d01164ca5eaa7d24252a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___synchronization.html#ga313d8d7fc582d01164ca5eaa7d24252a">os_sem_delete</a> (void *p_handle)</td></tr>
<tr class="memdesc:ga313d8d7fc582d01164ca5eaa7d24252a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a semaphore.  <a href="#ga313d8d7fc582d01164ca5eaa7d24252a">More...</a><br /></td></tr>
<tr class="separator:ga313d8d7fc582d01164ca5eaa7d24252a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga32d178cf6630a5be52c4b9447e8e0c36"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___synchronization.html#ga32d178cf6630a5be52c4b9447e8e0c36">os_sem_take</a> (void *p_handle, uint32_t wait_ms)</td></tr>
<tr class="memdesc:ga32d178cf6630a5be52c4b9447e8e0c36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take a semaphore.  <a href="#ga32d178cf6630a5be52c4b9447e8e0c36">More...</a><br /></td></tr>
<tr class="separator:ga32d178cf6630a5be52c4b9447e8e0c36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga83173a61eb31b9bf588ebcca658452a3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___synchronization.html#ga83173a61eb31b9bf588ebcca658452a3">os_sem_give</a> (void *p_handle)</td></tr>
<tr class="memdesc:ga83173a61eb31b9bf588ebcca658452a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Give a semaphore.  <a href="#ga83173a61eb31b9bf588ebcca658452a3">More...</a><br /></td></tr>
<tr class="separator:ga83173a61eb31b9bf588ebcca658452a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaccff2c623b9528c485bbd20d078e0bbf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___synchronization.html#gaccff2c623b9528c485bbd20d078e0bbf">os_mutex_create</a> (void **pp_handle)</td></tr>
<tr class="memdesc:gaccff2c623b9528c485bbd20d078e0bbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a mutex.  <a href="#gaccff2c623b9528c485bbd20d078e0bbf">More...</a><br /></td></tr>
<tr class="separator:gaccff2c623b9528c485bbd20d078e0bbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga689221a4800d87a3126dc2c0ce630fe6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___synchronization.html#ga689221a4800d87a3126dc2c0ce630fe6">os_mutex_delete</a> (void *p_handle)</td></tr>
<tr class="memdesc:ga689221a4800d87a3126dc2c0ce630fe6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a mutex.  <a href="#ga689221a4800d87a3126dc2c0ce630fe6">More...</a><br /></td></tr>
<tr class="separator:ga689221a4800d87a3126dc2c0ce630fe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga61e9d9cb357e3d5fca3d4749a3c19ed0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___synchronization.html#ga61e9d9cb357e3d5fca3d4749a3c19ed0">os_mutex_take</a> (void *p_handle, uint32_t wait_ms)</td></tr>
<tr class="memdesc:ga61e9d9cb357e3d5fca3d4749a3c19ed0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take a mutex.  <a href="#ga61e9d9cb357e3d5fca3d4749a3c19ed0">More...</a><br /></td></tr>
<tr class="separator:ga61e9d9cb357e3d5fca3d4749a3c19ed0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga013a5dd9bd89964cff3ed569a3404c38"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___o_s__87x3d___synchronization.html#ga013a5dd9bd89964cff3ed569a3404c38">os_mutex_give</a> (void *p_handle)</td></tr>
<tr class="memdesc:ga013a5dd9bd89964cff3ed569a3404c38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Give a mutex.  <a href="#ga013a5dd9bd89964cff3ed569a3404c38">More...</a><br /></td></tr>
<tr class="separator:ga013a5dd9bd89964cff3ed569a3404c38"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Manage Inter-task communication functions. </p>
<p>Tasks need to communicate with each other or access shared resources together. There are many ways to exchange data between tasks, for example using shared data, polling loops and message passing.<br />
 Many resources can be considered as serially-reusable. This means that they can be used repeatedly by different tasks, but only by one task at a time.<br />
 The following mechanisms are available to the user:<br />
</p><ul>
<li><b>Lock</b> </li>
<li><b>Semaphore</b> </li>
<li><b>Mutex</b> </li>
</ul>
<h2 class="groupheader">Function Documentation</h2>
<a id="gac3c525a745d9e4141dcaa39cf0fa9b46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac3c525a745d9e4141dcaa39cf0fa9b46">&#9670;&nbsp;</a></span>os_lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t os_lock </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enter the critical region. Disable preemptive context switch and interrupts. </p>
<p>os_sync.h</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Interrupt mask flag.</dd></dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    uint32_t s;</div><div class="line"></div><div class="line">    <span class="comment">// Enter the critical section.</span></div><div class="line">    s = <a class="code" href="group___o_s__87x3e___synchronization.html#ga88def286e91c3a3c0459b90afc3d015d">os_lock</a>();</div><div class="line">    <span class="comment">// Allow only one task or ISR to operate the list.</span></div><div class="line">    list_add(p_list, &amp;item);</div><div class="line">    <span class="comment">// Exit the critical section and restore ISR mask flag.</span></div><div class="line">    <a class="code" href="group___o_s__87x3e___synchronization.html#ga7e0bcc8639e1d232ebdb99a7229abc99">os_unlock</a>(s);</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="gaf2ddcad068f1c06096b7ae1f81f42af1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf2ddcad068f1c06096b7ae1f81f42af1">&#9670;&nbsp;</a></span>os_unlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_unlock </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Exit the critical region. Enable preemptive context switch and interrupts. </p>
<p>os_sync.h</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">s</td><td>Interrupt mask flag to be restored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None.</dd></dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    uint32_t s;</div><div class="line"></div><div class="line">    <span class="comment">// Enter the critical section.</span></div><div class="line">    s = <a class="code" href="group___o_s__87x3e___synchronization.html#ga88def286e91c3a3c0459b90afc3d015d">os_lock</a>();</div><div class="line">    <span class="comment">// Allow only one task or ISR to operate the list.</span></div><div class="line">    list_add(p_list, &amp;item);</div><div class="line">    <span class="comment">// Exit the critical section and restore ISR mask flag.</span></div><div class="line">    <a class="code" href="group___o_s__87x3e___synchronization.html#ga7e0bcc8639e1d232ebdb99a7229abc99">os_unlock</a>(s);</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga8cf116acd094696c10d6a29561ea9af4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8cf116acd094696c10d6a29561ea9af4">&#9670;&nbsp;</a></span>os_sem_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool os_sem_create </td>
          <td>(</td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>pp_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>p_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>init_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>max_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a counting semaphore. </p>
<p>os_sync.h</p>
<p>Semaphores are used to manage and protect access to shared resources. A semaphore can be used to permit a fixed number of task to access a pool of shared resources. Using semaphores.<br />
 A semaphore object should be initialized to the maximum number of available tokens. This number of available resources is specified as parameter of the <a class="el" href="group___o_s__87x3e___synchronization.html#ga5a9e7149421d51d38a411a15af7b822c" title="Create a counting semaphore. ">os_sem_create()</a> function. Each time a semaphore token is obtained with <a class="el" href="group___o_s__87x3e___synchronization.html#ga02b524d6a4f0ba4dd02c0ee82a035f91" title="Take a semaphore. ">os_sem_take()</a>, the semaphore count is decremented. When the semaphore count is 0, no semaphore token can be obtained. The task that tries to obtain the semaphore token needs to wait until the next token is free. Semaphores are released with <a class="el" href="group___o_s__87x3e___synchronization.html#ga62b51200ec7cad298a9f916467255cb3" title="Give a semaphore. ">os_sem_give()</a> incrementing the semaphore count.</p>
<div class="image">
<img src="OS-semaphore-overview.jpg" alt="OS-semaphore-overview.jpg" width="496px" height="346px"/>
<div class="caption">
Semaphore Overview</div></div>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">pp_handle</td><td>Used to pass back the created semaphore handle.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_name</td><td>A descriptive name for the semaphore.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">init_count</td><td>The count value assigned to the semaphore when created.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_count</td><td>The maximum count value that can be reached. If the max_count is 1, a binary semaphore is being created.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the semaphore creation. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Semaphore was created successfully. </td></tr>
    <tr><td class="paramname">false</td><td>Semaphore was failed to create.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordtype">void</span> *p_handle;</div><div class="line"></div><div class="line">    <span class="comment">// Create a semaphore with initial value 0 and maximum value 10.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3e___synchronization.html#ga5a9e7149421d51d38a411a15af7b822c">os_sem_create</a>(&amp;p_handle, <span class="stringliteral">&quot;sem name&quot;</span>, 0, 10) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Semaphore created successfully.</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">// Semaphore failed to create.</span></div><div class="line">        <span class="keywordflow">return</span> -1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga313d8d7fc582d01164ca5eaa7d24252a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga313d8d7fc582d01164ca5eaa7d24252a">&#9670;&nbsp;</a></span>os_sem_delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool os_sem_delete </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a semaphore. </p>
<p>os_sync.h</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_handle</td><td>The handle of the semaphore to be deleted.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the semaphore deletion. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Semaphore was deleted successfully. </td></tr>
    <tr><td class="paramname">false</td><td>Semaphore was failed to delete.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordtype">void</span> *p_handle;</div><div class="line"></div><div class="line">    <span class="comment">// Create a semaphore with initial value 0 and maximum value 10.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3e___synchronization.html#ga5a9e7149421d51d38a411a15af7b822c">os_sem_create</a>(&amp;p_handle, <span class="stringliteral">&quot;sem name&quot;</span>, 0, 10) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Semaphore created successfully.</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">// Semaphore failed to create.</span></div><div class="line">        <span class="keywordflow">return</span> -1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Delete the created semaphore.</span></div><div class="line">    <a class="code" href="group___o_s__87x3e___synchronization.html#gab7fc601d8d71e53b0cfa7241ca0fdc14">os_sem_delete</a>(p_handle);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga32d178cf6630a5be52c4b9447e8e0c36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga32d178cf6630a5be52c4b9447e8e0c36">&#9670;&nbsp;</a></span>os_sem_take()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool os_sem_take </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>wait_ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Take a semaphore. </p>
<p>os_sync.h</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_handle</td><td>The handle of the semaphore to be taken.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">wait_ms</td><td>The time in milliseconds to wait for the semaphore to become available. <ul>
<li><code>0</code> No blocking and return immediately. </li>
<li><code>0xFFFFFFFF</code> Block infinitely until the semaphore taken. </li>
<li><code>others</code> The timeout value in milliseconds.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the semaphore taking. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Semaphore was taken successfully. </td></tr>
    <tr><td class="paramname">false</td><td>Semaphore was failed to take.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> *p_handle = <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"></div><div class="line"><span class="comment">// One task creates a semaphore.</span></div><div class="line"><span class="keywordtype">void</span> task1(<span class="keywordtype">void</span> *p_param)</div><div class="line">{</div><div class="line">    <span class="comment">// Create a full binary semaphore.</span></div><div class="line">    <a class="code" href="group___o_s__87x3e___synchronization.html#ga5a9e7149421d51d38a411a15af7b822c">os_sem_create</a>(&amp;p_handle, <span class="stringliteral">&quot;sem name&quot;</span>, 1, 1);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Anohter task uses the semaphore.</span></div><div class="line"><span class="keywordtype">void</span> task2(<span class="keywordtype">void</span> *p_param)</div><div class="line">{</div><div class="line">    <span class="comment">// See if we can obtain the semaphore. If the semaphore is</span></div><div class="line">    <span class="comment">// not available, wait for 100ms.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3e___synchronization.html#ga02b524d6a4f0ba4dd02c0ee82a035f91">os_sem_take</a>(p_handle, 100) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Access the share resource.</span></div><div class="line"></div><div class="line">        <span class="comment">// Finish accessing the share resource, then release the semaphore.</span></div><div class="line">        <a class="code" href="group___o_s__87x3e___synchronization.html#ga62b51200ec7cad298a9f916467255cb3">os_sem_give</a>(p_handle);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">// Could not access the share resource.</span></div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga83173a61eb31b9bf588ebcca658452a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga83173a61eb31b9bf588ebcca658452a3">&#9670;&nbsp;</a></span>os_sem_give()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool os_sem_give </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Give a semaphore. </p>
<p>os_sync.h</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_handle</td><td>The handle of the semaphore to be given.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the semaphore giving. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Semaphore was given successfully. </td></tr>
    <tr><td class="paramname">false</td><td>Semaphore was failed to give.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordtype">void</span> *p_handle = <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"></div><div class="line">    <span class="comment">// Create an empty binary semaphore.</span></div><div class="line">    <a class="code" href="group___o_s__87x3e___synchronization.html#ga5a9e7149421d51d38a411a15af7b822c">os_sem_create</a>(&amp;p_handle, <span class="stringliteral">&quot;sem name&quot;</span>, 0, 1);</div><div class="line"></div><div class="line">    <span class="comment">// Obtaining the empty semaphore immediately will be failed.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3e___synchronization.html#ga02b524d6a4f0ba4dd02c0ee82a035f91">os_sem_take</a>(p_handle, 0) == <span class="keyword">false</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Failed.</span></div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Give the sempahore</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3e___synchronization.html#ga62b51200ec7cad298a9f916467255cb3">os_sem_give</a>(p_hanel) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Now we can take the semaphore.</span></div><div class="line">        <a class="code" href="group___o_s__87x3e___synchronization.html#ga02b524d6a4f0ba4dd02c0ee82a035f91">os_sem_take</a>(p_handle, 0);</div><div class="line"></div><div class="line">        <span class="comment">// Again taking the binary semaphore will be failed.</span></div><div class="line">        <a class="code" href="group___o_s__87x3e___synchronization.html#ga02b524d6a4f0ba4dd02c0ee82a035f91">os_sem_take</a>(p_handle, 0);</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="gaccff2c623b9528c485bbd20d078e0bbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaccff2c623b9528c485bbd20d078e0bbf">&#9670;&nbsp;</a></span>os_mutex_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool os_mutex_create </td>
          <td>(</td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>pp_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a mutex. </p>
<p>os_sync.h</p>
<p>Mutex (Mutual Exclusion) is used to protect a shared resource that can be accessed only by one task at a time.<br />
 A mutex is a special version of a binary empty semaphore. The advantage of a mutex is that it introduces task ownership. When a task acquires a mutex and becomes its owner, subsequent mutex acquires from that task will succeed immediately. Thus, mutex acquires/releases can be nested.<br />
 </p><div class="image">
<img src="OS-mutex-overview.jpg" alt="OS-mutex-overview.jpg" width="451px" height="196px"/>
<div class="caption">
Mutex Overview</div></div>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">pp_handle</td><td>Used to pass back the created mutex handle.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the mutex creation. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Mutex was created successfully. </td></tr>
    <tr><td class="paramname">false</td><td>Mutex was failed to create.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordtype">void</span> *p_handle = <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"></div><div class="line">    <span class="comment">// Create a mutex.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3e___synchronization.html#ga3ce9b924c409b227d20728bb42abcb77">os_mutex_create</a>(&amp;p_handle) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// The mutex created successfully.</span></div><div class="line">        <span class="comment">// Now it can be used.</span></div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga689221a4800d87a3126dc2c0ce630fe6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga689221a4800d87a3126dc2c0ce630fe6">&#9670;&nbsp;</a></span>os_mutex_delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool os_mutex_delete </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a mutex. </p>
<p>os_sync.h</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_handle</td><td>The handle of the mutex to be deleted.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the Mutex deletion. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Mutex was deleted successfully. </td></tr>
    <tr><td class="paramname">false</td><td>Mutex was failed to delete.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordtype">void</span> *p_handle;</div><div class="line"></div><div class="line">    <span class="comment">// Create a mutex.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3e___synchronization.html#ga3ce9b924c409b227d20728bb42abcb77">os_mutex_create</a>(&amp;p_handle) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Mutex created successfully.</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">// Mutex failed to create.</span></div><div class="line">        <span class="keywordflow">return</span> -1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Delete the created mutex.</span></div><div class="line">    <a class="code" href="group___o_s__87x3e___synchronization.html#gaaa59599a323dad7f70a3084cdb9ff82b">os_mutex_delete</a>(p_handle);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga61e9d9cb357e3d5fca3d4749a3c19ed0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga61e9d9cb357e3d5fca3d4749a3c19ed0">&#9670;&nbsp;</a></span>os_mutex_take()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool os_mutex_take </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>wait_ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Take a mutex. </p>
<p>os_sync.h</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_handle</td><td>The handle of the mutex to be taken.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">wait_ms</td><td>The time in milliseconds to wait for the mutex to become available. <ul>
<li><code>0</code> No blocking and return immediately. </li>
<li><code>0xFFFFFFFF</code> Block infinitely until the mutex taken. </li>
<li><code>others</code> The timeout value in milliseconds.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the mutex taking. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Mutex was taken successfully. </td></tr>
    <tr><td class="paramname">false</td><td>Mutex was failed to take.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> *p_handle = <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"></div><div class="line"><span class="comment">// One task creates a mutex.</span></div><div class="line"><span class="keywordtype">void</span> task1(<span class="keywordtype">void</span> *p_param)</div><div class="line">{</div><div class="line">    <span class="comment">// Create a mutex.</span></div><div class="line">    <a class="code" href="group___o_s__87x3e___synchronization.html#ga3ce9b924c409b227d20728bb42abcb77">os_mutex_create</a>(&amp;p_handle);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Anohter task uses the mutex.</span></div><div class="line"><span class="keywordtype">void</span> task2(<span class="keywordtype">void</span> *p_param)</div><div class="line">{</div><div class="line">    <span class="comment">// See if we can obtain the mutex. If the mutex is</span></div><div class="line">    <span class="comment">// not available, wait for 100ms.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3e___synchronization.html#gadabe7ea66ecfa1a9ddc0a7ced45fd982">os_mutex_take</a>(p_handle, 100) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Access the share resource.</span></div><div class="line"></div><div class="line">        <span class="comment">// In real code, recursive calls of mutex may occur.</span></div><div class="line">        <a class="code" href="group___o_s__87x3e___synchronization.html#gadabe7ea66ecfa1a9ddc0a7ced45fd982">os_mutex_take</a>(p_handle, 100);</div><div class="line">        <a class="code" href="group___o_s__87x3e___synchronization.html#gadabe7ea66ecfa1a9ddc0a7ced45fd982">os_mutex_take</a>(p_handle, 200);</div><div class="line"></div><div class="line">        <span class="comment">// The mutex has now been &#39;taken&#39; three times, so will not be</span></div><div class="line">        <span class="comment">// available to another task until it has also been given back</span></div><div class="line">        <span class="comment">// three times.</span></div><div class="line">        <a class="code" href="group___o_s__87x3e___synchronization.html#ga2a9a42b2660941692d99772bb5a18c35">os_mutex_give</a>(p_handle);</div><div class="line">        <a class="code" href="group___o_s__87x3e___synchronization.html#ga2a9a42b2660941692d99772bb5a18c35">os_mutex_give</a>(p_handle);</div><div class="line">        <a class="code" href="group___o_s__87x3e___synchronization.html#ga2a9a42b2660941692d99772bb5a18c35">os_mutex_give</a>(p_handle);</div><div class="line"></div><div class="line">        <span class="comment">// Finish accessing the share resource, then release the semaphore.</span></div><div class="line">        <span class="comment">// Now the mutex can be taken by other tasks.</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">// Could not access the share resource.</span></div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="ga013a5dd9bd89964cff3ed569a3404c38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga013a5dd9bd89964cff3ed569a3404c38">&#9670;&nbsp;</a></span>os_mutex_give()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool os_mutex_give </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Give a mutex. </p>
<p>os_sync.h</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_handle</td><td>The handle of the mutex to be given.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The status of the mutex giving. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Mutex was given successfully. </td></tr>
    <tr><td class="paramname">false</td><td>Mutex was failed to give.</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example usage</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> *p_handle = <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"></div><div class="line"><span class="comment">// One task creates a mutex.</span></div><div class="line"><span class="keywordtype">void</span> task1(<span class="keywordtype">void</span> *p_param)</div><div class="line">{</div><div class="line">    <span class="comment">// Create a mutex.</span></div><div class="line">    <a class="code" href="group___o_s__87x3e___synchronization.html#ga3ce9b924c409b227d20728bb42abcb77">os_mutex_create</a>(&amp;p_handle);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Anohter task uses the mutex.</span></div><div class="line"><span class="keywordtype">void</span> task2(<span class="keywordtype">void</span> *p_param)</div><div class="line">{</div><div class="line">    <span class="comment">// See if we can obtain the mutex. If the mutex is</span></div><div class="line">    <span class="comment">// not available, wait for 100ms.</span></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___o_s__87x3e___synchronization.html#gadabe7ea66ecfa1a9ddc0a7ced45fd982">os_mutex_take</a>(p_handle, 100) == <span class="keyword">true</span>)</div><div class="line">    {</div><div class="line">        <span class="comment">// Access the share resource.</span></div><div class="line"></div><div class="line">        <span class="comment">// In real code, recursive calls of mutex may occur.</span></div><div class="line">        <a class="code" href="group___o_s__87x3e___synchronization.html#gadabe7ea66ecfa1a9ddc0a7ced45fd982">os_mutex_take</a>(p_handle, 100);</div><div class="line">        <a class="code" href="group___o_s__87x3e___synchronization.html#gadabe7ea66ecfa1a9ddc0a7ced45fd982">os_mutex_take</a>(p_handle, 200);</div><div class="line"></div><div class="line">        <span class="comment">// The mutex has now been &#39;taken&#39; three times, so will not be</span></div><div class="line">        <span class="comment">// available to another task until it has also been given back</span></div><div class="line">        <span class="comment">// three times.</span></div><div class="line">        <a class="code" href="group___o_s__87x3e___synchronization.html#ga2a9a42b2660941692d99772bb5a18c35">os_mutex_give</a>(p_handle);</div><div class="line">        <a class="code" href="group___o_s__87x3e___synchronization.html#ga2a9a42b2660941692d99772bb5a18c35">os_mutex_give</a>(p_handle);</div><div class="line">        <a class="code" href="group___o_s__87x3e___synchronization.html#ga2a9a42b2660941692d99772bb5a18c35">os_mutex_give</a>(p_handle);</div><div class="line"></div><div class="line">        <span class="comment">// Finish accessing the share resource, then release the semaphore.</span></div><div class="line">        <span class="comment">// Now the mutex can be taken by other tasks.</span></div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">// Could not access the share resource.</span></div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->

<HR SIZE=5>
<font size="3" color="black">Copyright(c) 2020, <a href=" http://www.realtek.com.tw/"><font size="3" color="#6FB7B7"><b>Realtek Semiconductor Corporation</b></font></a>. All rights reserved.</font> 
