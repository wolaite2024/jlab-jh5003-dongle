<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BT AUDIO SDK: $title</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bbpro-h55px.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BT AUDIO SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,true,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="contents">
<div class="textblock"><p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
 </p>
<h1><a class="anchor" id="USB_Device_Page"></a>
USB DEVICE Application Note </h1>
<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
 </p><center><b>V1.1</b></center><p><br />
 </p><center><b>2023/5/31</b></center><div style="page-break-after: always;"></div><h2><a class="anchor" id="USB_DEVICE_Rev"></a>
Revision History</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Version  </th><th class="markdownTableHeadCenter">Date  </th><th class="markdownTableHeadCenter">Description   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">V1.0.0.0  </td><td class="markdownTableBodyCenter">2021/10/21  </td><td class="markdownTableBodyCenter">Stable Release   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">V1.1  </td><td class="markdownTableBodyCenter">2023/5/31  </td><td class="markdownTableBodyCenter">Change version number to 2 digits   </td></tr>
</table>
<div style="page-break-after: always;"></div> <h2><a class="anchor" id="USB_Device_Content"></a>
Contents</h2>
<ul>
<li><a class="el" href="_a_n082__u_s_b__d_e_v_i_c_e__a_p_p_l_i_c_a_t_i_o_n.html#USB_DEVICE_Rev">Revision History</a></li>
<li><a class="el" href="_a_n082__u_s_b__d_e_v_i_c_e__a_p_p_l_i_c_a_t_i_o_n.html#USB_DEVICE_Table_List">Table List</a></li>
<li><a class="el" href="_a_n082__u_s_b__d_e_v_i_c_e__a_p_p_l_i_c_a_t_i_o_n.html#USB_DEVICE_Figure_List">Figure List</a></li>
<li><a class="el" href="_a_n082__u_s_b__d_e_v_i_c_e__a_p_p_l_i_c_a_t_i_o_n.html#USB_DEVICE_Glossary">Glossary</a></li>
<li><a class="el" href="_a_n082__u_s_b__d_e_v_i_c_e__a_p_p_l_i_c_a_t_i_o_n.html#USB_DEVICE_Intro">1 Introduction</a><ul>
<li><a class="el" href="_a_n082__u_s_b__d_e_v_i_c_e__a_p_p_l_i_c_a_t_i_o_n.html#AN082_USB_DEVICE_CFG_DESC">1.1 USB device configure descriptor</a></li>
</ul>
</li>
<li><a class="el" href="_a_n082__u_s_b__d_e_v_i_c_e__a_p_p_l_i_c_a_t_i_o_n.html#USB_DEVICE_Ov">2 Source Code Overview</a><ul>
<li><a class="el" href="_a_n082__u_s_b__d_e_v_i_c_e__a_p_p_l_i_c_a_t_i_o_n.html#AN082_USB_DEVICE_CFG">2.1 USB DEVICE Configure</a></li>
</ul>
</li>
</ul>
<div style="page-break-after: always;"></div> <h2><a class="anchor" id="USB_DEVICE_Table_List"></a>
Table List</h2>
<ul>
<li><a href="#table_2_1">Table 2-1 Decice descrptor</a></li>
</ul>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="USB_DEVICE_Figure_List"></a>
Figure List</h2>
<div style="page-break-after: always;"></div><h2><a class="anchor" id="USB_DEVICE_Glossary"></a>
Glossary</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Terms  </th><th class="markdownTableHeadCenter">Definitions   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">USB  </td><td class="markdownTableBodyCenter">Universal Serial Bus   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter">HID  </td><td class="markdownTableBodyCenter">Human Interface Devices   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">BCD  </td><td class="markdownTableBodyCenter">Binary-Coded Decimal   </td></tr>
</table>
<div style="page-break-after: always;"></div> <h2><a class="anchor" id="USB_DEVICE_Intro"></a>
1 Introduction</h2>
<p>The purpose of this document is to give an overview of the USB Device application.</p>
<h3><a class="anchor" id="AN082_USB_DEVICE_CFG_DESC"></a>
1.1 USB device configure descriptor</h3>
<ul>
<li>A device descriptor describes general information about a USB device. It includes information that applies globally to the device and all of the device's configurations. A USB device has only one device descriptor. A high-speed capable device that has different device information for full-speed and high-speed must also have a device_qualifier descriptor.</li>
<li>Configure maximum power consumption of the USB device</li>
</ul>
<div style="page-break-after: always;"></div> <h2><a class="anchor" id="USB_DEVICE_Ov"></a>
2 Source Code Overview</h2>
<p>The following sections describe important parts of this application.</p>
<h3><a class="anchor" id="AN082_USB_DEVICE_CFG"></a>
2.1 USB DEVICE Configure</h3>
<p>The DEVICE descriptor of a high-speed capable device has a version number of 2.0 (0200H). The bcdUSB field contains a BCD version number. The value of the bcdUSB field is 0xJJMN for version JJ.M.N (JJ:major version number, M:minor version number, N:sub-minor version number), e.g., version 2.1.3 is represented with value 0x0213 and version 2.0 is represented with a value of 0x0200.</p>
<center><div id="table_2_1"><b>Table 2-1 Decice descrptor </b></div></center> <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Field  </th><th class="markdownTableHeadLeft">Description   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">bcdUSB  </td><td class="markdownTableBodyLeft">USB Specification Release Number in Binary-Coded Decimal (2.10 is 210H).   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">bDeviceClass  </td><td class="markdownTableBodyLeft">Class code (assigned by the USB-IF).   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">bDeviceSubClass  </td><td class="markdownTableBodyLeft">Subclass code (assigned by the USB-IF).   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">bDeviceProtocol  </td><td class="markdownTableBodyLeft">Protocol code (assigned by the USB-IF).   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">bMaxPacketSize0  </td><td class="markdownTableBodyLeft">Maximum packet size for endpoint zero(only 8, 16, 32, or 64 are valid)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">idVendor  </td><td class="markdownTableBodyLeft">Vendor ID (assigned by the USB-IF)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">idProduct  </td><td class="markdownTableBodyLeft">Product ID (assigned by the manufacturer)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">bcdDevice  </td><td class="markdownTableBodyLeft">Device release number in binary-coded decimal   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">iManufacturer  </td><td class="markdownTableBodyLeft">Index of string descriptor describing manufacturer   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">iProduct  </td><td class="markdownTableBodyLeft">Index of string descriptor describing product   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">iSerialNumber  </td><td class="markdownTableBodyLeft">Index of string descriptor describing the device's serial number   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">bNumConfigurations  </td><td class="markdownTableBodyLeft">Number of possible configurations   </td></tr>
</table>
<p>USB device application can configure descriptor. </p><div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span></div><div class="line">{</div><div class="line">    <a class="code" href="group___u_s_b___d_e_v.html#gga6335b21c2a07fe0681101737b724b46fa7deed52eb5650d64e3ea4bc8b9679446">STRING_ID_UNDEFINED</a>,</div><div class="line">    <a class="code" href="group___u_s_b___d_e_v.html#gga6335b21c2a07fe0681101737b724b46fad9d8cbb000abca6735718f578c9e505e">STRING_ID_MANUFACTURER</a>,</div><div class="line">    <a class="code" href="group___u_s_b___d_e_v.html#gga6335b21c2a07fe0681101737b724b46fa8476177c8a91d2d251b4ce858b869271">STRING_ID_PRODUCT</a>,</div><div class="line">    <a class="code" href="group___u_s_b___d_e_v.html#gga6335b21c2a07fe0681101737b724b46fa62eff648088e2ce8a0e8cb464d7e0c0c">STRING_ID_SERIALNUM</a>,</div><div class="line">} <a class="code" href="group___u_s_b___d_e_v.html#ga6335b21c2a07fe0681101737b724b46f">T_STRING_ID</a>;</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct__usb__device__descriptor.html">T_USB_DEVICE_DESC</a> usb_dev_desc =</div><div class="line">{</div><div class="line">    ......</div><div class="line">    .<a class="code" href="struct__usb__device__descriptor.html#a93b2c926b005917cdf2b5e7e4b3f80a2">bMaxPacketSize0</a>        = 0x40,</div><div class="line">    .idVendor               = 0x0bda,</div><div class="line">    .idProduct              = 0x8773,</div><div class="line">    .bcdDevice              = 0x0200,</div><div class="line">    .iManufacturer          = <a class="code" href="group___u_s_b___d_e_v.html#gga6335b21c2a07fe0681101737b724b46fad9d8cbb000abca6735718f578c9e505e">STRING_ID_MANUFACTURER</a>,</div><div class="line">    .iProduct               = <a class="code" href="group___u_s_b___d_e_v.html#gga6335b21c2a07fe0681101737b724b46fa8476177c8a91d2d251b4ce858b869271">STRING_ID_PRODUCT</a>,</div><div class="line">    .iSerialNumber          = <a class="code" href="group___u_s_b___d_e_v.html#gga6335b21c2a07fe0681101737b724b46fa62eff648088e2ce8a0e8cb464d7e0c0c">STRING_ID_SERIALNUM</a>,</div><div class="line">    .bNumConfigurations     = 1,</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="struct__string.html">T_STRING</a> dev_strings[] =</div><div class="line">{</div><div class="line">    [0] =</div><div class="line">    {</div><div class="line">        .<a class="code" href="struct__string.html#a1e6927fa1486224044e568f9c370519b">id</a>     = <a class="code" href="group___u_s_b___d_e_v.html#gga6335b21c2a07fe0681101737b724b46fad9d8cbb000abca6735718f578c9e505e">STRING_ID_MANUFACTURER</a>,</div><div class="line">        .s = <span class="stringliteral">&quot;RealTek&quot;</span>,</div><div class="line">    },</div><div class="line">    [1] =</div><div class="line">    {</div><div class="line">        .id     = <a class="code" href="group___u_s_b___d_e_v.html#gga6335b21c2a07fe0681101737b724b46fa8476177c8a91d2d251b4ce858b869271">STRING_ID_PRODUCT</a>,</div><div class="line">        .s = <span class="stringliteral">&quot;USB Audio Device&quot;</span>,</div><div class="line">    },</div><div class="line">    [2] =</div><div class="line">    {</div><div class="line">        .id     = <a class="code" href="group___u_s_b___d_e_v.html#gga6335b21c2a07fe0681101737b724b46fa62eff648088e2ce8a0e8cb464d7e0c0c">STRING_ID_SERIALNUM</a>,</div><div class="line">        .s = <span class="stringliteral">&quot;0123456789A&quot;</span>,</div><div class="line">    },</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="struct__usb__config__descriptor.html">T_USB_CONFIG_DESC</a> usb_cfg_desc =</div><div class="line">{</div><div class="line">    ......</div><div class="line">    .<a class="code" href="struct__usb__config__descriptor.html#ae7c63b4cda39953db5710012a5d91c6f">bmAttributes</a> = 0x80,</div><div class="line">    .bMaxPower = 0x32</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="group___u_s_b___d_e_v.html#ga401f6f3ce6b84e44b803a2f20ebaec81">usb_dev_init</a>(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group__x3d___u_s_b___d_e_v___driver.html#ga3f7d2305eb2d60dfb8f5a1688dab0ef8">usb_dev_driver_dev_desc_register</a>((<span class="keywordtype">void</span> *)&amp;usb_dev_desc);</div><div class="line">    <a class="code" href="group__x3d___u_s_b___d_e_v___driver.html#gaf1ebf46d8d28e201251aa9a590f90fb7">usb_dev_driver_cfg_desc_register</a>((<span class="keywordtype">void</span> *)&amp;usb_cfg_desc);</div><div class="line">    <a class="code" href="group__x3d___u_s_b___d_e_v___driver.html#gae4b13dde83ac4cfe35e5a12fd7e4ee65">usb_dev_driver_string_desc_register</a>((<span class="keywordtype">void</span> *)dev_stringtabs);</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->

<HR SIZE=5>
<font size="3" color="black">Copyright(c) 2020, <a href=" http://www.realtek.com.tw/"><font size="3" color="#6FB7B7"><b>Realtek Semiconductor Corporation</b></font></a>. All rights reserved.</font> 
