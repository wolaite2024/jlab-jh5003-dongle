<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BT AUDIO SDK: USB MS DRIVER</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bbpro-h55px.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BT AUDIO SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,true,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">USB MS DRIVER<div class="ingroups"><a class="el" href="group___a_p_i___reference.html">API Reference</a> &raquo; <a class="el" href="group___u_s_b___group.html">USB</a> &raquo; <a class="el" href="group___u_s_b___c_l_a_s_s.html">USB Class</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__t__disk__driver.html">_t_disk_driver</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">disk driver  <a href="struct__t__disk__driver.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__t__rx__cb.html">_t_rx_cb</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">rx callback to process rx data  <a href="struct__t__rx__cb.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gaf288c77e37abdf1c22a37cc8bc8c9e1e"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct__t__disk__driver.html">_t_disk_driver</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#gaf288c77e37abdf1c22a37cc8bc8c9e1e">T_DISK_DRIVER</a></td></tr>
<tr class="memdesc:gaf288c77e37abdf1c22a37cc8bc8c9e1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">disk driver  <a href="#gaf288c77e37abdf1c22a37cc8bc8c9e1e">More...</a><br /></td></tr>
<tr class="separator:gaf288c77e37abdf1c22a37cc8bc8c9e1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa0f6955bd931f803ebbfb1f799da6ff0"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct__t__rx__cb.html">_t_rx_cb</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#gaa0f6955bd931f803ebbfb1f799da6ff0">T_RX_CB</a></td></tr>
<tr class="memdesc:gaa0f6955bd931f803ebbfb1f799da6ff0"><td class="mdescLeft">&#160;</td><td class="mdescRight">rx callback to process rx data  <a href="#gaa0f6955bd931f803ebbfb1f799da6ff0">More...</a><br /></td></tr>
<tr class="separator:gaa0f6955bd931f803ebbfb1f799da6ff0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadb1953e0ba6f3b3948fc19d0e390d04f"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#gadb1953e0ba6f3b3948fc19d0e390d04f">USB_MS_DRIVER_TX_COMPLETE</a>) (<a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#gaf288c77e37abdf1c22a37cc8bc8c9e1e">T_DISK_DRIVER</a> *disk, uint32_t actual, int status)</td></tr>
<tr class="memdesc:gadb1953e0ba6f3b3948fc19d0e390d04f"><td class="mdescLeft">&#160;</td><td class="mdescRight">definition of callback which will be called when data tx is complete  <a href="#gadb1953e0ba6f3b3948fc19d0e390d04f">More...</a><br /></td></tr>
<tr class="separator:gadb1953e0ba6f3b3948fc19d0e390d04f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga0a9abf4d4fb31d3120b172b169b48582"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#ga0a9abf4d4fb31d3120b172b169b48582">usb_ms_driver_data_pipe_send</a> (void *data, uint32_t len, <a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#gadb1953e0ba6f3b3948fc19d0e390d04f">USB_MS_DRIVER_TX_COMPLETE</a> complete)</td></tr>
<tr class="memdesc:ga0a9abf4d4fb31d3120b172b169b48582"><td class="mdescLeft">&#160;</td><td class="mdescRight">send data by bulk in endpoint  <a href="#ga0a9abf4d4fb31d3120b172b169b48582">More...</a><br /></td></tr>
<tr class="separator:ga0a9abf4d4fb31d3120b172b169b48582"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga982d8c54bb17221ad1f2d8452eef442c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#ga982d8c54bb17221ad1f2d8452eef442c">usb_ms_driver_data_pipe_ind_cbs_register</a> (<a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#gaa0f6955bd931f803ebbfb1f799da6ff0">T_RX_CB</a> *cbs)</td></tr>
<tr class="memdesc:ga982d8c54bb17221ad1f2d8452eef442c"><td class="mdescLeft">&#160;</td><td class="mdescRight">register callbacks to process data received  <a href="#ga982d8c54bb17221ad1f2d8452eef442c">More...</a><br /></td></tr>
<tr class="separator:ga982d8c54bb17221ad1f2d8452eef442c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf8bd564be7eeb2bd0d12176ae910f585"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#gaf8bd564be7eeb2bd0d12176ae910f585">usb_ms_driver_disk_register</a> (<a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#gaf288c77e37abdf1c22a37cc8bc8c9e1e">T_DISK_DRIVER</a> *disk)</td></tr>
<tr class="memdesc:gaf8bd564be7eeb2bd0d12176ae910f585"><td class="mdescLeft">&#160;</td><td class="mdescRight">register disk driver  <a href="#gaf8bd564be7eeb2bd0d12176ae910f585">More...</a><br /></td></tr>
<tr class="separator:gaf8bd564be7eeb2bd0d12176ae910f585"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga39b6dc2c1790ba45c9fd5e6aa9ceb6b4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#ga39b6dc2c1790ba45c9fd5e6aa9ceb6b4">usb_ms_driver_if_desc_register</a> (<a class="el" href="structusb__descriptor__header.html">T_USB_DESC_HDR</a> **descs_fs, <a class="el" href="structusb__descriptor__header.html">T_USB_DESC_HDR</a> **descs_hs)</td></tr>
<tr class="memdesc:ga39b6dc2c1790ba45c9fd5e6aa9ceb6b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register mass storage interface descriptors.  <a href="#ga39b6dc2c1790ba45c9fd5e6aa9ceb6b4">More...</a><br /></td></tr>
<tr class="separator:ga39b6dc2c1790ba45c9fd5e6aa9ceb6b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6dfe3fa6b6f48747a8a9495074effc7f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#ga6dfe3fa6b6f48747a8a9495074effc7f">usb_ms_driver_init</a> (void)</td></tr>
<tr class="memdesc:ga6dfe3fa6b6f48747a8a9495074effc7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize USB mass storage driver.  <a href="#ga6dfe3fa6b6f48747a8a9495074effc7f">More...</a><br /></td></tr>
<tr class="separator:ga6dfe3fa6b6f48747a8a9495074effc7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The module mainly supply components to realize USB Mass Storage Class. <br />
This driver only support Bulk-Only Transport, and donot concern which command set specification <br />
&amp; storage medium are used</p>
<h1><a class="anchor" id="USB_MSC_DRIVER_USAGE"></a>
How to realize USB Mass Storage interface.</h1>
<p>Step1 Realize usb msc interface descriptors array.</p>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="preprocessor">     #include &quot;usb_spec20.h&quot;</span></div><div class="line"></div><div class="line">     <a class="code" href="struct__usb__interface__descriptor.html">T_USB_INTERFACE_DESC</a> demo_ms_if_desc_fs =</div><div class="line">     {</div><div class="line">         ...init...</div><div class="line">     };</div><div class="line"></div><div class="line">     <a class="code" href="struct__usb__endpoint__descriptor.html">T_USB_ENDPOINT_DESC</a> demo_ms_bo_ep_desc_fs =</div><div class="line">     {</div><div class="line">         ...init...</div><div class="line">     };</div><div class="line"></div><div class="line">     <a class="code" href="struct__usb__endpoint__descriptor.html">T_USB_ENDPOINT_DESC</a> demo_ms_bi_ep_desc_fs =</div><div class="line">     {</div><div class="line">         ...init...</div><div class="line">     };</div><div class="line"></div><div class="line">     <a class="code" href="struct__usb__interface__descriptor.html">T_USB_INTERFACE_DESC</a> demo_ms_if_desc_hs =</div><div class="line">     {</div><div class="line">         ...init...</div><div class="line">     };</div><div class="line"></div><div class="line">     <a class="code" href="struct__usb__endpoint__descriptor.html">T_USB_ENDPOINT_DESC</a> demo_ms_bo_ep_desc_hs =</div><div class="line">     {</div><div class="line">         ...init...</div><div class="line">     };</div><div class="line"></div><div class="line">     <a class="code" href="struct__usb__endpoint__descriptor.html">T_USB_ENDPOINT_DESC</a> demo_ms_bi_ep_desc_hs =</div><div class="line">     {</div><div class="line">         ...init...</div><div class="line">     };</div><div class="line"></div><div class="line">     <a class="code" href="structusb__descriptor__header.html">T_USB_DESC_HDR</a> *demo_ms_descs_fs[] =</div><div class="line">     {</div><div class="line">         (<a class="code" href="structusb__descriptor__header.html">T_USB_DESC_HDR</a>*)&amp;demo_ms_if_desc_fs,</div><div class="line">         (<a class="code" href="structusb__descriptor__header.html">T_USB_DESC_HDR</a>*)&amp;demo_ms_bo_ep_desc_fs,</div><div class="line">         (<a class="code" href="structusb__descriptor__header.html">T_USB_DESC_HDR</a>*)&amp;demo_ms_bi_ep_desc_fs,</div><div class="line">         <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="line">     };</div><div class="line"></div><div class="line">     <a class="code" href="structusb__descriptor__header.html">T_USB_DESC_HDR</a> *demo_ms_descs_hs[] =</div><div class="line">     {</div><div class="line">         (<a class="code" href="structusb__descriptor__header.html">T_USB_DESC_HDR</a>*)&amp;demo_ms_if_desc_fs,</div><div class="line">         (<a class="code" href="structusb__descriptor__header.html">T_USB_DESC_HDR</a>*)&amp;demo_ms_bo_ep_desc_fs,</div><div class="line">         (<a class="code" href="structusb__descriptor__header.html">T_USB_DESC_HDR</a>*)&amp;demo_ms_bi_ep_desc_fs,</div><div class="line">         <a class="code" href="group___platform___types___exported___macros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="line">     };</div><div class="line"></div><div class="line">     <a class="code" href="group___u_s_b___m_s___d_r_i_v_e_r.html#ga39b6dc2c1790ba45c9fd5e6aa9ceb6b4">usb_ms_driver_if_desc_register</a>(demo_ms_descs_fs, demo_ms_descs_hs);</div><div class="line"></div><div class="line">Step 2 Register disk driver.</div><div class="line"></div><div class="line">@par Example</div><div class="line">@code</div><div class="line">     <span class="keywordtype">int</span> demo_usb_ms_disk_format(<span class="keywordtype">void</span>)</div><div class="line">     {</div><div class="line">         ...</div><div class="line">     }</div><div class="line"></div><div class="line">     <span class="keywordtype">int</span> demo_usb_ms_disk_read(uint32_t lba, uint32_t blk_num, uint8_t *data)</div><div class="line">     {</div><div class="line">         ...</div><div class="line">     }</div><div class="line"></div><div class="line">     <span class="keywordtype">int</span> demo_usb_ms_disk_write(uint32_t lba, uint32_t blk_num, uint8_t *data)</div><div class="line">     {</div><div class="line">         ...</div><div class="line">     }</div><div class="line"></div><div class="line">     <span class="keywordtype">bool</span> demo_usb_ms_disk_is_ready(<span class="keywordtype">void</span>)</div><div class="line">     {</div><div class="line">         ...</div><div class="line">     }</div><div class="line"></div><div class="line">     <span class="keywordtype">int</span> demo_usb_ms_disk_remove(<span class="keywordtype">void</span>)</div><div class="line">     {</div><div class="line">         ...</div><div class="line">     }</div><div class="line"></div><div class="line">     <span class="keywordtype">int</span> usb_ms_disk_capacity_get(uint32_t *max_lba, uint32_t *blk_len)</div><div class="line">     {</div><div class="line">         ...</div><div class="line">     }</div><div class="line"></div><div class="line">     <a class="code" href="struct__t__disk__driver.html">T_DISK_DRIVER</a> demo_usb_ms_disk_driver =</div><div class="line">     {</div><div class="line">         .<a class="code" href="struct__t__disk__driver.html#a1d127017fb298b889f4ba24752d08b8e">type</a> = 0,</div><div class="line">         .format = demo_usb_ms_disk_format,</div><div class="line">         .read = demo_usb_ms_disk_read,</div><div class="line">         .write = demo_usb_ms_disk_write,</div><div class="line">         .is_ready = demo_usb_ms_disk_is_ready,</div><div class="line">         .remove = demo_usb_ms_disk_remove,</div><div class="line">         .capacity_get = usb_ms_disk_capacity_get</div><div class="line">     };</div><div class="line"></div><div class="line"> `   <a class="code" href="group___u_s_b___m_s___d_r_i_v_e_r.html#gaf8bd564be7eeb2bd0d12176ae910f585">usb_ms_driver_disk_register</a>((<a class="code" href="struct__t__disk__driver.html">T_DISK_DRIVER</a> *)&amp;demo_usb_ms_disk_driver);</div></div><!-- fragment --></dd></dl>
<p>Step 3 Register callbacks to process command set specification.</p>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">int</span> demo_usb_ms_cmd_proc(<a class="code" href="struct__t__disk__driver.html">T_DISK_DRIVER</a> *disk, T_CBW *cbw)</div><div class="line">{</div><div class="line">    <span class="comment">//process command set such as SCSI command</span></div><div class="line">    ...</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> demo_usb_ms_data_proc(<a class="code" href="struct__t__disk__driver.html">T_DISK_DRIVER</a> *disk, uint8_t *data, uint32_t len)</div><div class="line">{</div><div class="line">    <span class="comment">//process data stage</span></div><div class="line">    ...</div><div class="line">}</div><div class="line"></div><div class="line"><a class="code" href="struct__t__rx__cb.html">T_RX_CB</a> demo_usb_ms_rx_cb =</div><div class="line">{</div><div class="line">    .<a class="code" href="struct__t__rx__cb.html#a5d739c59ab50f3b237502a354c94abc0">cmd</a> = demo_usb_ms_cmd_proc,</div><div class="line">    .data = demo_usb_ms_data_proc</div><div class="line">};</div><div class="line"><a class="code" href="group___u_s_b___m_s___d_r_i_v_e_r.html#ga982d8c54bb17221ad1f2d8452eef442c">usb_ms_driver_data_pipe_ind_cbs_register</a>(&amp;demo_usb_ms_rx_cb);</div></div><!-- fragment --></dd></dl>
<h1><a class="anchor" id="Definitions"></a>
Definitions</h1>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gaf288c77e37abdf1c22a37cc8bc8c9e1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf288c77e37abdf1c22a37cc8bc8c9e1e">&#9670;&nbsp;</a></span>T_DISK_DRIVER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct__t__disk__driver.html">_t_disk_driver</a>  <a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#gaf288c77e37abdf1c22a37cc8bc8c9e1e">T_DISK_DRIVER</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>disk driver </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>disk type </td></tr>
    <tr><td class="paramname">format</td><td>callback to format disk </td></tr>
    <tr><td class="paramname">read</td><td>callback to read data from disk. <br />
 parameter: lba logical block address to read <br />
 blk_num block number to read from lba <br />
 data data that be read <br />
 return value indicate if read successfully, refer to "errno.h" </td></tr>
    <tr><td class="paramname">write</td><td>callback to write data to disk. <br />
 parameter: lba logical block address to write <br />
 blk_num block number to write from lba <br />
 data data to write <br />
 return value indicate if write successfully, refer to "errno.h" </td></tr>
    <tr><td class="paramname">is_ready</td><td>callback to judge if disk is ready. <br />
</td></tr>
    <tr><td class="paramname">remove</td><td>callback to remove disk. </td></tr>
    <tr><td class="paramname">capacity_get</td><td>callback to get disk capacity. <br />
 parameter: max_lba maximum logical block address. <br />
 blk_len length per block return value indicate if get capacity successfully, refer to "errno.h" </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaa0f6955bd931f803ebbfb1f799da6ff0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa0f6955bd931f803ebbfb1f799da6ff0">&#9670;&nbsp;</a></span>T_RX_CB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct__t__rx__cb.html">_t_rx_cb</a>  <a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#gaa0f6955bd931f803ebbfb1f799da6ff0">T_RX_CB</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>rx callback to process rx data </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>callback to process CBW stage of BOT <br />
 parameter: disk disk driver defined as <a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#gaf288c77e37abdf1c22a37cc8bc8c9e1e">T_DISK_DRIVER</a>. <br />
 cbw CBW to process. <br />
 return value indicate if cbw processed successfully, refer to "errno.h" </td></tr>
    <tr><td class="paramname">data</td><td>callback to process data stage of BOT parameter: disk disk driver defined as <a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#gaf288c77e37abdf1c22a37cc8bc8c9e1e">T_DISK_DRIVER</a>. <br />
 data data to process. <br />
 len length of data. <br />
 return value indicate if cbw processed successfully, refer to "errno.h" </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gadb1953e0ba6f3b3948fc19d0e390d04f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadb1953e0ba6f3b3948fc19d0e390d04f">&#9670;&nbsp;</a></span>USB_MS_DRIVER_TX_COMPLETE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* USB_MS_DRIVER_TX_COMPLETE) (<a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#gaf288c77e37abdf1c22a37cc8bc8c9e1e">T_DISK_DRIVER</a> *disk, uint32_t actual, int status)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>definition of callback which will be called when data tx is complete </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">disk</td><td>disk driver defined as <a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#gaf288c77e37abdf1c22a37cc8bc8c9e1e">T_DISK_DRIVER</a>. </td></tr>
    <tr><td class="paramname">actual</td><td>actual length of data that has been sent </td></tr>
    <tr><td class="paramname">status</td><td>indicate if data has been sent successfully </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>refer to "errno.h" </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga0a9abf4d4fb31d3120b172b169b48582"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0a9abf4d4fb31d3120b172b169b48582">&#9670;&nbsp;</a></span>usb_ms_driver_data_pipe_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int usb_ms_driver_data_pipe_send </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#gadb1953e0ba6f3b3948fc19d0e390d04f">USB_MS_DRIVER_TX_COMPLETE</a>&#160;</td>
          <td class="paramname"><em>complete</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>send data by bulk in endpoint </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>data to send </td></tr>
    <tr><td class="paramname">len</td><td>length of data to send </td></tr>
    <tr><td class="paramname">complete</td><td>refer to <a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#gadb1953e0ba6f3b3948fc19d0e390d04f">USB_MS_DRIVER_TX_COMPLETE</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int refer to "errno.h"</dd></dl>
<dl class="section note"><dt>Note</dt><dd></dd></dl>
<dl class="Experimental_Added_API_2_13_0_0"><dt><b><a class="el" href="_experimental__added__a_p_i_2_13_0_0.html#_Experimental_Added_API_2_13_0_0000212">Experimental Added Since 2.13.0.0:</a></b></dt><dd></dd></dl>
<dl class="section user"><dt>Example</dt><dd>Please refer to <a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#USB_MSC_DRIVER_USAGE">How to realize USB Mass Storage interface.</a> </dd></dl>

</div>
</div>
<a id="ga982d8c54bb17221ad1f2d8452eef442c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga982d8c54bb17221ad1f2d8452eef442c">&#9670;&nbsp;</a></span>usb_ms_driver_data_pipe_ind_cbs_register()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int usb_ms_driver_data_pipe_ind_cbs_register </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#gaa0f6955bd931f803ebbfb1f799da6ff0">T_RX_CB</a> *&#160;</td>
          <td class="paramname"><em>cbs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>register callbacks to process data received </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cbs</td><td>refer to <a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#gaa0f6955bd931f803ebbfb1f799da6ff0">T_RX_CB</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int refer to "errno.h"</dd></dl>
<dl class="section note"><dt>Note</dt><dd></dd></dl>
<dl class="Experimental_Added_API_2_13_0_0"><dt><b><a class="el" href="_experimental__added__a_p_i_2_13_0_0.html#_Experimental_Added_API_2_13_0_0000213">Experimental Added Since 2.13.0.0:</a></b></dt><dd></dd></dl>
<dl class="section user"><dt>Example</dt><dd>Please refer to <a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#USB_MSC_DRIVER_USAGE">How to realize USB Mass Storage interface.</a> </dd></dl>

</div>
</div>
<a id="gaf8bd564be7eeb2bd0d12176ae910f585"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf8bd564be7eeb2bd0d12176ae910f585">&#9670;&nbsp;</a></span>usb_ms_driver_disk_register()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int usb_ms_driver_disk_register </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#gaf288c77e37abdf1c22a37cc8bc8c9e1e">T_DISK_DRIVER</a> *&#160;</td>
          <td class="paramname"><em>disk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>register disk driver </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">disk</td><td>refer to <a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#gaf288c77e37abdf1c22a37cc8bc8c9e1e">T_DISK_DRIVER</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int refer to "errno.h"</dd></dl>
<dl class="section note"><dt>Note</dt><dd></dd></dl>
<dl class="Experimental_Added_API_2_13_0_0"><dt><b><a class="el" href="_experimental__added__a_p_i_2_13_0_0.html#_Experimental_Added_API_2_13_0_0000214">Experimental Added Since 2.13.0.0:</a></b></dt><dd></dd></dl>
<dl class="section user"><dt>Example</dt><dd>Please refer to <a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#USB_MSC_DRIVER_USAGE">How to realize USB Mass Storage interface.</a> </dd></dl>

</div>
</div>
<a id="ga39b6dc2c1790ba45c9fd5e6aa9ceb6b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga39b6dc2c1790ba45c9fd5e6aa9ceb6b4">&#9670;&nbsp;</a></span>usb_ms_driver_if_desc_register()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int usb_ms_driver_if_desc_register </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structusb__descriptor__header.html">T_USB_DESC_HDR</a> **&#160;</td>
          <td class="paramname"><em>descs_fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structusb__descriptor__header.html">T_USB_DESC_HDR</a> **&#160;</td>
          <td class="paramname"><em>descs_hs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register mass storage interface descriptors. </p>
<p><a class="el" href="usb__ms__driver_8h_source.html" title="usb mass storage driverâ€“only support BOT (Bulk-Only Transport) ">usb_ms_driver.h</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fs_desc</td><td>Mass storage interface descriptor of full speed. </td></tr>
    <tr><td class="paramname">hs_desc</td><td>Mass storage interface descriptor of high speed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Refer to <code>errno.h</code>.</dd></dl>
<dl class="section user"><dt>Example</dt><dd>Please refer to <a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#USB_MSC_DRIVER_USAGE">How to realize USB Mass Storage interface.</a>. </dd></dl>

</div>
</div>
<a id="ga6dfe3fa6b6f48747a8a9495074effc7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6dfe3fa6b6f48747a8a9495074effc7f">&#9670;&nbsp;</a></span>usb_ms_driver_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int usb_ms_driver_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize USB mass storage driver. </p>
<dl class="section return"><dt>Returns</dt><dd>Refer to <code>errno.h</code>.</dd></dl>
<dl class="section user"><dt>Example</dt><dd>Please refer to <a class="el" href="group___u_s_b___m_s___d_r_i_v_e_r.html#USB_MSC_DRIVER_USAGE">How to realize USB Mass Storage interface.</a>. </dd></dl>

</div>
</div>
</div><!-- contents -->

<HR SIZE=5>
<font size="3" color="black">Copyright(c) 2020, <a href=" http://www.realtek.com.tw/"><font size="3" color="#6FB7B7"><b>Realtek Semiconductor Corporation</b></font></a>. All rights reserved.</font> 
